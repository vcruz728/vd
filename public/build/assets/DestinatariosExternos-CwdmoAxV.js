import{r as l,G as A,j as e,S as T,A as u}from"./app-CLURJkGK.js";import{A as L,p as k}from"./pageHeader-D_1LwfWO.js";/* empty css                     */import{E as x,l as j,D as F}from"./es-MX-C92AoiMh.js";import"./responsive.bootstrap5-Bcyh6sb7.js";import c from"./InputError-g248v_Br.js";import{S as f}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{R as h,B as n,V as g}from"./index-6M-nTxTF.js";import{C as r}from"./Col-BmTaf4dG.js";import{C as d}from"./Card-DrgDsYzZ.js";import{T as M,a as b}from"./Tabs-BsEQq-Nu.js";import{M as H,a as I,b as K,c as R,d as z}from"./Modal-MDHOTQRA.js";import{F as o}from"./Form-CZ3SpEJp.js";import"./commonimages-Db2ZVa_Y.js";import"./CloseButton-ZLY2bF9Q.js";import"./ElementChildren-KYUFPN3z.js";x.use(F);function se({destinatarios:m}){const[v,i]=l.useState(!1),[C,y]=l.useState(),[N,D]=l.useState(),t=A({id:0,nombre:"",cargo:"",dependencia:"",email:""}),S=a=>{a.preventDefault(),t.post(route("catalogos.saveDestinatario"),{onSuccess:E})},E=()=>{p(),i(!1)},p=()=>{t.setDefaults({id:0,nombre:"",cargo:"",dependencia:"",email:""}),t.reset()};l.useEffect(()=>{y((m||[]).filter(a=>a.deleted_at===null).map(a=>({...a}))),D((m||[]).filter(a=>a.deleted_at!==null).map(a=>({...a})))},[m]);const B=a=>{f.fire({title:"¿Está seguro?",text:"El destinatario ya no aparecera en las listas de destinatarios externos en los demas modulos.",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar",customClass:{container:"swalSuperior"}}).then(s=>{s.isConfirmed&&u.delete(route("catalogos.deleteDestinatario",{id:a}),{preserveScroll:!0,onSuccess:G=>{g("Correcto: Se elimino el destinatario externo.",{style:{padding:"25px",color:"#fff",backgroundColor:"#29bf74"},position:"top-center"})}})})},w=a=>{f.fire({title:"¿Está seguro?",text:"El destinatario aparecera en las listas de destinatarios externos en los demas modulos.",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar",customClass:{container:"swalSuperior"}}).then(s=>{s.isConfirmed&&u.put(route("catalogos.reactivateDestinatario",{id:a}),{},{preserveScroll:!0,onSuccess:()=>{g("Correcto: Destinatario externo reactivado exitosamente.",{style:{padding:"25px",color:"#fff",backgroundColor:"#29bf74"},position:"top-center"})}})})};return e.jsxs(L,{children:[e.jsxs(T,{children:[e.jsx("title",{children:"Destinatarios externos"}),e.jsx("meta",{name:"listado de destinatarios externos",content:"Agrega y lista destinatarios externos por área"})]}),e.jsxs(l.Fragment,{children:[e.jsx(k,{titles:"Listado de destinatarios externos",active:"Listado de destinatarios externos",items:[]}),e.jsx(h,{children:e.jsx(r,{lg:12,md:12,children:e.jsxs(d,{children:[e.jsx(d.Header,{className:"d-flex justify-content-between",children:e.jsx(d.Title,{as:"h3",children:"Listado de destinatarios externos"})}),e.jsx(d.Body,{children:e.jsx("div",{className:"panel panel-default",children:e.jsxs(M,{defaultActiveKey:"tab1",children:[e.jsxs(b,{eventKey:"tab1",title:"Activos",children:[e.jsx(r,{md:12,className:"d-flex justify-content-center",children:e.jsxs(n,{className:"btn btn-primary",onClick:()=>{p(),i(!0)},children:[e.jsx("i",{className:"fe fe-plus me-2"}),"Nuevo destinatario"]})}),e.jsx(r,{md:12,children:e.jsx(x,{data:C,options:{language:j,order:[]},columns:[{data:"nombre",title:"Nombre"},{data:"cargo",title:"Cargo"},{data:"dependencia",title:"Dependencia"},{data:"email",title:"Correo electrónico"}],className:"display table-bordered text-nowrap border-bottom",slots:{4:(a,s)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-center",children:[e.jsx(n,{className:"btn-icon ml-1",variant:"warning",onClick:()=>{t.setData({id:s.id,nombre:s.nombre,cargo:s.cargo,dependencia:s.dependencia,email:s.email}),i(!0)},title:"Editar destinatario externo",children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx(n,{className:"btn-icon ml-1",variant:"danger",onClick:()=>{B(s.id)},title:"Eliminar destinatario externo",children:e.jsx("i",{className:"fa fa-trash"})})]})})}})})]}),e.jsx(b,{eventKey:"tab2",title:"Inactivos",children:e.jsx(r,{md:12,className:"table-responsive",children:e.jsx(x,{data:N,options:{language:j,order:[]},columns:[{data:"nombre",title:"Nombre"},{data:"cargo",title:"Cargo"},{data:"dependencia",title:"Dependencia"},{data:"email",title:"Correo electrónico"}],className:"display table-bordered text-nowrap border-bottom",slots:{4:(a,s)=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsx(n,{className:"btn-icon ml-1",variant:"success",title:"Activar destinatario externo",onClick:()=>{w(s.id)},children:e.jsx("i",{className:"fa fa-repeat"})})})})}})})})]})})})]})})}),e.jsxs(H,{size:"xl",show:v,onHide:()=>i(!1),children:[e.jsx(I,{children:e.jsx(K,{as:"h5",children:"Destinatario externo"})}),e.jsxs("form",{onSubmit:S,children:[e.jsx(R,{children:e.jsxs(h,{children:[e.jsxs(r,{xs:12,sm:6,children:[e.jsx(o.Label,{children:"Nombre"}),e.jsx(o.Control,{name:"nombre",className:t.errors.nombre?"inputError":"",value:t.data.nombre,onChange:a=>t.setData("nombre",a.target.value),type:"text"}),e.jsx(c,{className:"mt-1",message:t.errors.nombre})]}),e.jsxs(r,{xs:12,sm:6,children:[e.jsx(o.Label,{children:"Cargo"}),e.jsx(o.Control,{name:"cargo",className:t.errors.cargo?"inputError":"",value:t.data.cargo,onChange:a=>t.setData("cargo",a.target.value),type:"text"}),e.jsx(c,{className:"mt-1",message:t.errors.cargo})]}),e.jsxs(r,{xs:12,sm:6,children:[e.jsx(o.Label,{children:"Dependencia"}),e.jsx(o.Control,{name:"dependencia",className:t.errors.dependencia?"inputError":"",value:t.data.dependencia,onChange:a=>t.setData("dependencia",a.target.value),type:"text"}),e.jsx(c,{className:"mt-1",message:t.errors.dependencia})]}),e.jsxs(r,{xs:12,sm:6,children:[e.jsx(o.Label,{children:"Correo electrónico"}),e.jsx(o.Control,{name:"email",className:t.errors.email?"inputError":"",value:t.data.email,onChange:a=>t.setData("email",a.target.value),type:"text"}),e.jsx(c,{className:"mt-1",message:t.errors.email})]})]})}),e.jsxs(z,{children:[e.jsx(n,{variant:"secondary",onClick:()=>i(!1),children:"Cancelar"}),e.jsx(n,{variant:"primary",type:"submit",children:t.data.id===0?"Guardar nuevo destinatario":"Actualizar destinatario"})]})]})]})]})]})}export{se as default};
