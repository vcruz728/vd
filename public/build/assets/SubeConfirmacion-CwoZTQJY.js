import{X as D,r as o,G as M,j as e,S as V}from"./app-BZjgC7cP.js";import{A as R,p as k}from"./pageHeader-B4CRHfJf.js";/* empty css                     */import{V as w}from"./VerPdf-9nqVtfqh.js";import F from"./InputError-DcwsGt1B.js";import{E as h,l as T,D as _}from"./es-MX-Dpm40hYh.js";import{R as p,B as r,V as B}from"./index-DzsuHLcc.js";import{C as l}from"./Col-Do4GAVIT.js";import{C as n}from"./Card-B5etp3El.js";import{M as H,a as L,b as P,c as $,d as z}from"./Modal-D5fA2oin.js";import{F as u}from"./Form-B08YK_CZ.js";import"./commonimages-DICA3SGj.js";import"./CloseButton-9b_A4Smq.js";import"./ElementChildren-BWagFF9p.js";h.use(_);function ie({id:x,destinatariosOficio:j}){const b=D().props.auth.user,d=o.useRef(null),[g,c]=o.useState(!1),[v,t]=o.useState(!1),[C,f]=o.useState(""),[S,m]=o.useState("pdf"),s=M({id:0,archivo:null,tipo:""}),N=a=>{a.preventDefault(),s.post(route("subeEvidenciaRecibido"),{onSuccess:y})},y=()=>{s.setDefaults({id:0,archivo:null}),t(!1),s.reset(),d.current.value="",B("Correcto: Se guardo la confirmación de recibido del oficio.",{style:{padding:"25px",color:"#fff",backgroundColor:"#29bf74"},position:"top-center"})},E=a=>{const i=a.target;i.files&&s.setData("archivo",i.files[0])};return e.jsxs(R,{children:[e.jsxs(V,{children:[e.jsx("title",{children:"Confirmaciones de recibido"}),e.jsx("meta",{name:"Subir o visualizar las confirmaciones de recibido de los oficios",content:"Subir o visualizar las confirmaciones de recibido de los oficios"})]}),e.jsxs(o.Fragment,{children:[e.jsx(k,{titles:"Confirmaciones de recibido",active:"Detalle de confirmaciones de recibido",items:[]}),e.jsx(p,{className:"d-flex justify-content-center",children:e.jsx(l,{lg:12,xl:6,children:e.jsxs(n,{children:[e.jsx(n.Header,{children:e.jsx(n.Title,{as:"h3",children:"Listado de oficios"})}),e.jsx(n.Body,{children:e.jsx(l,{xs:12,className:"mb-5",children:e.jsx(h,{data:j,options:{language:T,autoWidth:!1,ordering:!1,pageLength:5,lengthMenu:[[5,10,20,-1],[5,10,20,"Todos"]]},columns:[{data:"id",title:"Ver oficio",width:"10%"},{title:"Nombre",data:"nombre",width:"30%"}],className:"display table-bordered  border-bottom ancho100",slots:{0:(a,i)=>e.jsxs("div",{className:"text-center",children:[e.jsx(r,{className:"btn-icon mr-1",variant:"danger",title:"Ver oficiosss",onClick:()=>{f(`imprime/nuevo/pdf/${x}/${i.id_usuario}/${i.tipo_usuario}`),m("pdf"),c(!0)},children:e.jsx("i",{className:"fa fa-file-pdf-o"})}),i.archivo_respuesta===null&&b.rol==5?e.jsx(r,{className:"btn-icon btn btn-warning mr-1",variant:"warning",title:"Subir confirmación de recibido",onClick:()=>{s.clearErrors(),s.setData({...a,id:i.id,tipo:"destinatario"}),t(!0)},children:e.jsx("i",{className:"fa fa-upload"})}):e.jsx(r,{className:"btn-icon btn btn-warning mr-1",variant:"danger",title:"Ver confirmación de recibido",onClick:()=>{console.log(i.archivo_respuesta),f(i.archivo_respuesta),m(i.extension),c(!0)},children:e.jsx("i",{className:"fa fa-file-pdf-o"})})]})}})})})]})})}),e.jsx(w,{urlPdf:C,show:g,setShow:c,tipo:S}),e.jsxs(H,{show:v,onHide:()=>t(!1),children:[e.jsx(L,{children:e.jsx(P,{as:"h5",children:"Evidencía de recibido"})}),e.jsxs("form",{onSubmit:N,children:[e.jsx($,{children:e.jsx(p,{children:e.jsxs(l,{xs:12,children:[e.jsx(u.Label,{children:"Evidencia de confirmación de recibido:"}),e.jsx(u.Control,{type:"file",accept:".pdf,.jpg,.png,.jpeg",className:s.errors.archivo?"inputError":"",ref:d,onChange:a=>E(a)}),e.jsx(F,{className:"mt-1",message:s.errors.archivo})]})})}),e.jsxs(z,{children:[e.jsx(r,{variant:"secondary",onClick:()=>t(!1),children:"Cancelar"}),e.jsx(r,{variant:"primary",type:"submit",children:"Subir evidencia"})]})]})]})]})]})}export{ie as default};
