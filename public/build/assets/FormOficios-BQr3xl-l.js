import{r as m,j as e,G as k,S as H}from"./app-BZjgC7cP.js";import{A as T,p as G}from"./pageHeader-B4CRHfJf.js";/* empty css                     */import{S as y}from"./react-select.esm-LgsBVvNq.js";import h from"./InputError-DcwsGt1B.js";import{V as M}from"./VerPdf-9nqVtfqh.js";import{S as U}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{T as q}from"./TituloCard-D8KHv2fT.js";import{u as z,c as F,C as c}from"./Col-Do4GAVIT.js";import{m as J}from"./ElementChildren-BWagFF9p.js";import{R as K,B as Q}from"./index-DzsuHLcc.js";import{C as S}from"./Card-B5etp3El.js";import{A as W}from"./Alert-CsgM3H2e.js";import{F as t}from"./Form-B08YK_CZ.js";import"./commonimages-DICA3SGj.js";import"./CloseButton-9b_A4Smq.js";const R=1e3;function X(d,i,o){const s=(d-i)/(o-i)*100;return Math.round(s*R)/R}function B({min:d,now:i,max:o,label:s,visuallyHidden:f,striped:j,animated:u,className:g,style:p,variant:N,bsPrefix:x,...v},b){return e.jsx("div",{ref:b,...v,role:"progressbar",className:F(g,`${x}-bar`,{[`bg-${N}`]:N,[`${x}-bar-animated`]:u,[`${x}-bar-striped`]:u||j}),style:{width:`${X(i,d,o)}%`,...p},"aria-valuenow":i,"aria-valuemin":d,"aria-valuemax":o,children:f?e.jsx("span",{className:"visually-hidden",children:s}):s})}const L=m.forwardRef(({isChild:d=!1,...i},o)=>{const s={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...i};if(s.bsPrefix=z(s.bsPrefix,"progress"),d)return B(s,o);const{min:f,now:j,max:u,label:g,visuallyHidden:p,striped:N,animated:x,bsPrefix:v,variant:b,className:l,children:n,...r}=s;return e.jsx("div",{ref:o,...r,className:F(l,v),children:n?J(n,C=>m.cloneElement(C,{isChild:!0})):B({min:f,now:j,max:u,label:g,visuallyHidden:p,striped:N,animated:x,bsPrefix:v,variant:b},o)})});L.displayName="ProgressBar";function xe({status:d,des:i,areas:o,oficio:s,procesos:f}){const j=m.useRef(null),u=m.useRef(null),g=m.useRef(null),p=m.useRef(null),[N,x]=m.useState([]),[v,b]=m.useState(!1),{data:l,setData:n,errors:r,post:C,progress:P,reset:V,setDefaults:A,cancel:D}=k({id:s==null?void 0:s.id,ingreso:s==null?void 0:s.ingreso,num_oficio:(s==null?void 0:s.num_oficio)||"",num_folio:(s==null?void 0:s.num_folio)||"",dep_ua:s==null?void 0:s.dep_ua,area:s==null?void 0:s.id_area,proceso_impacta:"",archivo:null,descripcion:(s==null?void 0:s.descripcion)||""}),O=a=>{a.preventDefault(),(s==null?void 0:s.id)===void 0?U.fire({title:"¿Está seguro?",text:"Una vez guardado el oficio, este no se podrá eliminar y solo se podrán editar los datos relacionados con el responsable.",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar",customClass:{container:"swalSuperior"}}).then(_=>{_.isConfirmed?C(route("saveOficio"),{onSuccess:w}):D()}):C(route("saveOficio"),{onSuccess:w})},I=a=>{const _=a.target;_.files&&n("archivo",_.files[0])},w=()=>{(s==null?void 0:s.id)===void 0&&(A({ingreso:"",num_oficio:"",num_folio:"",dep_ua:"",area:"",proceso_impacta:"",archivo:null,descripcion:""}),V(),x([]),j.current.value="",u.current.clearValue(),g.current.clearValue(),p.current.clearValue())},$=async a=>{p.current.clearValue();const E=await(await fetch(route("getProcesosPorArea",{id:a}),{method:"get"})).json();E.code==200&&x(E.data)};return m.useEffect(()=>{(s==null?void 0:s.id)!==void 0&&(u.current.selectOption({value:s.dep_ua,label:s.des}),g.current.selectOption({value:s.id_area,label:s.area}),p.current.selectOption({value:s.proceso_impacta,label:s.proceso}))},[]),e.jsxs(T,{children:[P&&e.jsx(L,{variant:"info-gradient",className:"mb-3 progress-xs",now:P.percentage}),e.jsxs(H,{children:[e.jsx("title",{children:"Recepción de oficio"}),e.jsx("meta",{name:"recepción de oficios",content:"Formaluario para la recepción de oficios"})]}),e.jsxs(m.Fragment,{children:[e.jsx(G,{titles:"Recepción de oficio",active:"Recepción de oficio",items:[{titulo:"Listado de oficios",urlHeader:"/oficios/listado-oficio"}]}),e.jsx(K,{children:e.jsx(c,{lg:12,md:12,children:e.jsxs(S,{children:[e.jsx(S.Header,{children:e.jsx(S.Title,{as:"h3",children:e.jsx(q,{titulo:"Información de ingreso",obligatorio:!0})})}),e.jsxs(S.Body,{children:[d&&e.jsx(W,{variant:"success",className:"alert-dismissible",children:d}),e.jsxs("form",{onSubmit:O,children:[e.jsx("div",{className:"form-row",children:e.jsx(c,{xl:4,md:6,className:"mb-4",children:e.jsxs(t.Group,{children:[e.jsxs(t.Label,{children:["Ingreso de la solicitud"," ",e.jsx("p",{className:"obligatorio",children:"*"})]}),e.jsxs("div",{className:"custom-controls-stacked",children:[e.jsxs("label",{className:"custom-control custom-radio-md",children:[e.jsx("input",{type:"radio",className:"custom-control-input",name:"ingreso",defaultValue:"Físico",disabled:(s==null?void 0:s.id)!==void 0,checked:l.ingreso=="Físico",onChange:()=>{n("ingreso","Físico")}}),e.jsx("span",{className:"custom-control-label",children:"Físico"})]}),e.jsxs("label",{className:"custom-control custom-radio-md",style:{marginLeft:"2rem"},children:[e.jsx("input",{type:"radio",className:"custom-control-input",name:"ingreso",defaultValue:"Email",disabled:(s==null?void 0:s.id)!==void 0,checked:l.ingreso=="Email",onChange:()=>{n("ingreso","Email")}}),e.jsx("span",{className:"custom-control-label",children:"Email"})]}),e.jsx(h,{className:"mt-1",message:r.ingreso})]})]})})}),e.jsxs("div",{className:"form-row",children:[l.ingreso=="Físico"?e.jsxs(c,{xs:12,sm:6,xl:4,className:"mb-3",children:[e.jsxs(t.Label,{children:["Número de oficio"," ",e.jsx("p",{className:"obligatorio",children:"*"})]}),e.jsx(t.Control,{name:"num_oficio",className:r.num_oficio?"inputError":"",disabled:(s==null?void 0:s.id)!==void 0,value:l.num_oficio,onChange:a=>n("num_oficio",a.target.value),type:"text"}),e.jsx(h,{className:"mt-1",message:r.num_oficio})]}):null,l.ingreso=="Email"?e.jsxs(c,{xs:12,sm:6,xl:4,className:"mb-3",children:[e.jsxs(t.Label,{children:["Número de folio"," ",e.jsx("p",{className:"obligatorio",children:"*"})]}),e.jsx(t.Control,{type:"text",name:"num_folio",className:r.num_folio?"inputError":"",disabled:(s==null?void 0:s.id)!==void 0,value:l.num_folio,onChange:a=>n("num_folio",a.target.value)}),e.jsx(h,{className:"mt-1",message:r.num_folio})]}):null,e.jsxs(c,{xs:12,sm:6,md:6,lg:6,xl:4,className:"mb-3",children:[e.jsxs(t.Label,{children:["Dependencia o Unidad Académica"," ",e.jsx("p",{className:"obligatorio",children:"*"})]}),e.jsx(y,{classNamePrefix:"Select",ref:u,className:r.dep_ua?"inputError":"",options:i,name:"dep_ua",onChange:a=>{n("dep_ua",a==null?void 0:a.value)},placeholder:"Seleccione una opción"}),e.jsx(h,{className:"mt-1",message:r.dep_ua})]}),e.jsxs(c,{xs:12,sm:6,md:6,lg:6,xl:4,className:"mb-3",children:[e.jsxs(t.Label,{children:["Área para dar respuesta"," ",e.jsx("p",{className:"obligatorio",children:"*"})]}),e.jsx(y,{classNamePrefix:"Select",ref:g,className:r.area?"inputError":"",name:"area",options:o,defaultValue:l.area,onChange:a=>{$(a==null?void 0:a.value),n("area",a==null?void 0:a.value)},placeholder:"Seleccione una opción"}),e.jsx(h,{className:"mt-1",message:r.area})]}),e.jsxs(c,{xs:12,sm:6,md:6,lg:6,xl:4,className:"mb-3",children:[e.jsxs(t.Label,{children:["Proceso al que impacta"," ",l.area=="1"?null:e.jsx("p",{className:"obligatorio",children:"*"})]}),e.jsx(y,{classNamePrefix:"Select",options:N,ref:p,name:"proceso_impacta",className:r.proceso_impacta?"inputError":"",defaultValue:l.proceso_impacta,onChange:a=>n("proceso_impacta",a==null?void 0:a.value),placeholder:"Seleccione una opción"}),e.jsx(h,{className:"mt-1",message:r.proceso_impacta})]}),(s==null?void 0:s.archivo)!==void 0?e.jsx(c,{xs:12,sm:6,xl:4,style:{padding:40},children:e.jsxs("span",{className:"tag tag-radius tag-round tag-outline-danger",onClick:()=>b(!0),children:["Click para ver archivo",e.jsx("i",{className:"fa fa-file-pdf-o",style:{padding:6}})]})}):e.jsxs(c,{xs:12,sm:6,md:6,lg:6,xl:4,className:"mb-3",children:[e.jsxs(t.Label,{children:["Adjuntar archivo PDF"," ",e.jsx("p",{className:"obligatorio",children:"*"})]}),e.jsx(t.Control,{type:"file",accept:".pdf",className:r.archivo?"inputError":"",ref:j,onChange:a=>I(a)}),e.jsx(h,{className:"mt-1",message:r.archivo})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs(t.Label,{children:["Breve descripción del asunto:"," ",e.jsx("p",{className:"obligatorio",children:"*"})]}),e.jsx("textarea",{className:r.descripcion?"form-control inputError":"form-control",name:"descripcion",value:l.descripcion,onChange:a=>n("descripcion",a.target.value),placeholder:"Máximo 1000 caracteres",rows:2,children:l.descripcion}),e.jsx(h,{className:"mt-1",message:r.descripcion})]}),e.jsx(c,{xs:12,children:e.jsx(Q,{type:"submit",className:"mt-4",children:"Guardar nuevo oficio"})}),e.jsx(c,{xs:12,className:"mt-2"})]})]})]})})}),e.jsx(M,{urlPdf:s==null?void 0:s.archivo,show:v,setShow:b,tipo:"pdf"})]})]})}export{xe as default};
