import{r as i,X as S,G as z,j as e,S as A,x as D,A as F}from"./app-DM6KxBPp.js";import{A as k,p as E,g as M}from"./pageHeader-BEJzowwR.js";/* empty css                     */import{V as T}from"./VerPdf-DqbujEtv.js";import{S as f}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import V from"./InputError-BipjQy2Z.js";import{R as p,B as n}from"./index-QFYPGdfi.js";import{C as a}from"./Col-CqGaRyvF.js";import{C as l}from"./Card-B4D8A1q4.js";import{F as j}from"./Form-CO37fe7i.js";import{M as H,a as L,b as P,c as O,d as _}from"./Modal-DrlsnFma.js";import"./commonimages-BEFzf7ip.js";import"./CloseButton-BYzpkFt_.js";import"./ElementChildren-BOQAxI4E.js";function re({status:$,id:t,archivos:m,oficio:r}){const[v,c]=i.useState(!1),[g,d]=i.useState(!1),[b,h]=i.useState(""),[N,u]=i.useState("pdf"),y=S().props.auth.user,o=z({id:0,descripcion:""}),w=s=>{s.preventDefault(),f.fire({title:"¿Está seguro?",text:"Se notificará al colaborador para que vuelva a revisar el oficio.",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar",customClass:{container:"swalSuperior"}}).then(x=>{x.isConfirmed?o.put(route("rechazarRespNuevo")):o.cancel()})},C=()=>{f.fire({title:"¿Está seguro?",text:"El oficio ya no se podrá editar y se marcará como finalizado",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&F.put(route("aceptRespNuevo",{id:t}))})},B=(s,x,R)=>{x==1?(h(s),c(!0),u(R)):window.open(s,"_blank")};return e.jsxs(k,{children:[e.jsxs(A,{children:[e.jsx("title",{children:"Revisión nuevo oficio"}),e.jsx("meta",{name:"Revision de nuevo oficio",content:"Revise la estructura de un nuevo oficio generado por la VD"})]}),e.jsxs(i.Fragment,{children:[e.jsx(E,{titles:"Revisión de nuevo oficio",active:"Revisión de nuevo oficio",items:[{titulo:"Mis oficios",urlHeader:"/oficios/mis-oficios"}]}),e.jsx(p,{className:"d-flex justify-content-center",children:e.jsx(a,{lg:12,xl:6,children:e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsx(l.Title,{as:"h3",children:"Detalle del nuevo oficio"})}),e.jsx(l.Body,{children:e.jsxs("div",{className:"form-row",children:[r.masivo==1&&r.archivo.substring(r.archivo.length-3)!=="pdf"?e.jsx(a,{xs:12,style:{padding:40},children:e.jsxs("a",{className:"tag tag-radius tag-round tag-outline-danger",target:"_BLANK",href:M(`/files/${r.archivo}`),children:["Click para descargar el archivo",e.jsx("i",{className:"fa fa-file-pdf-o",style:{padding:6}})]})}):e.jsx(a,{xs:12,style:{padding:40},children:e.jsxs("span",{className:"tag tag-radius tag-round tag-outline-danger",onClick:()=>{h(r.masivo==1?r.archivo:`imprime/nuevo/pdf/${t}`),u("pdf"),c(!0)},children:["Click para ver archivo",e.jsx("i",{className:"fa fa-file-pdf-o",style:{padding:6}})]})}),r.masivo==1?e.jsxs(a,{xs:12,className:"mb-5",children:[e.jsx(j.Label,{children:"Breve descripción del motivo del oficio"}),e.jsx("textarea",{className:"form-control",defaultValue:r.descripcion,disabled:!0,rows:4})]}):null,m.length>0?e.jsxs(e.Fragment,{children:[e.jsx(a,{xs:12,children:e.jsxs("table",{className:"table table-bordered table-hover table-striped",children:[e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:2,children:"Archivos adjuntos"})}),e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Ver"})]})]}),e.jsx("tbody",{children:m.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.nombre}),e.jsx("td",{children:e.jsx(n,{className:"btn-icon ml-1",variant:"danger",title:"Ver PDF del oficio",onClick:()=>B(s.url,s.tipo,s.extension),children:e.jsx("i",{className:"fa fa-eye"})})})]},s.id))})]})}),e.jsx(a,{xs:12,className:"mb-5 d-flex justify-content-end",children:e.jsxs("a",{href:route("oficios.downloadFiles",{id:t}),target:"_BLANK",className:"btn btn-warning btn-lg mb-1",children:["Descargar todos los archivos adjuntos  ",e.jsx("i",{className:"fa fa-download"})]})})]}):null,e.jsx(a,{xs:12,xl:6,xxl:4,className:"d-flex justify-content-center",children:e.jsx(n,{className:"btn-lg mb-1",variant:"success",onClick:C,children:"Autorizar oficio"})}),e.jsx(a,{xs:12,xl:6,xxl:4,className:"d-flex justify-content-center",children:e.jsx(n,{className:"btn-lg mb-1",variant:"danger",onClick:()=>{d(!0),o.setData("id",t)},children:"Rechazar oficio"})}),y.rol===3?e.jsx(a,{xs:12,xl:12,xxl:4,className:"d-flex justify-content-center",children:e.jsx(D,{href:`/oficios/nuevo-oficio/${t}`,className:"btn btn-primary btn-lg",children:"Editar Oficio"})}):null]})})]})})}),e.jsx(T,{urlPdf:b,show:v,setShow:c,tipo:N}),e.jsxs(H,{show:g,onHide:()=>d(!1),children:[e.jsx(L,{children:e.jsx(P,{as:"h5",children:"Rechazar Oficio"})}),e.jsxs("form",{onSubmit:w,children:[e.jsx(O,{children:e.jsx(p,{children:e.jsxs(a,{xs:12,children:[e.jsx(j.Label,{children:"Breve descripción del motivo del rechazo:"}),e.jsx("textarea",{className:o.errors.descripcion?"form-control inputError":"form-control",name:"descripcion",value:o.data.descripcion,onChange:s=>o.setData("descripcion",s.target.value),placeholder:"Máximo 500 caracteres",rows:2}),e.jsx(V,{className:"mt-1",message:o.errors.descripcion})]})})}),e.jsxs(_,{children:[e.jsx(n,{variant:"secondary",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(n,{variant:"primary",type:"submit",children:"Rechazar oficio"})]})]})]})]})]})}export{re as default};
