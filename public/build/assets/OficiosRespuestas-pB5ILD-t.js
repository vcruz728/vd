import{r as o,G as M,j as e,S as T,x as g}from"./app-BZjgC7cP.js";import{A as H,p as z}from"./pageHeader-B4CRHfJf.js";import{E as f,l as u,$ as h,D as K}from"./es-MX-Dpm40hYh.js";import I from"./InputError-DcwsGt1B.js";import{R as N,B as s,V as W}from"./index-DzsuHLcc.js";import{V as $}from"./VerPdf-9nqVtfqh.js";import{L as G}from"./LineaTiempo-mWElSbZk.js";import{C as l}from"./Col-Do4GAVIT.js";import{C as x}from"./Card-B5etp3El.js";import{T as q,a as j}from"./Tabs-CD4tr0k_.js";import{M as J,a as Q,b as U,c as X,d as Y}from"./Modal-D5fA2oin.js";import{F as w}from"./Form-B08YK_CZ.js";import"./commonimages-DICA3SGj.js";import"./CloseButton-9b_A4Smq.js";import"./ElementChildren-BWagFF9p.js";f.use(K);const he=({status:Z,oficios:p,nuevos:y})=>{const b=o.useRef(null),[S,d]=o.useState(!1),[C,n]=o.useState(!1),[F,v]=o.useState(!1),[t,c]=o.useState({urlPdf:"",extension:"",idOfico:0}),[P,_]=o.useState(),[D,E]=o.useState(),[k,V]=o.useState();o.useEffect(()=>{_((p||[]).filter(a=>a.archivo_respuesta===null&&a.id_area!=="1").map(a=>({...a}))),E((p||[]).filter(a=>a.archivo_respuesta!==null&&a.id_area!=="1").map(a=>({...a}))),V((p||[]).filter(a=>a.id_area==="1").map(a=>({...a})))},[p]);const r=M({id:0,archivo:null,tipo:""}),O=a=>{a.preventDefault(),r.post(route("subeEvidenciaRecibido"),{onSuccess:A})},R=a=>{const i=a.target;i.files&&r.setData("archivo",i.files[0])},A=()=>{r.setDefaults({id:0,archivo:null}),d(!1),r.reset(),b.current.value="",W("Correcto: Se guardo la respuesta del oficio.",{style:{padding:"25px",color:"#fff",backgroundColor:"#29bf74"},position:"top-center"})};return e.jsxs(H,{children:[e.jsxs(T,{children:[e.jsx("title",{children:"Mis oficios"}),e.jsx("meta",{name:"Oficios con respuestas",content:"Lista de oficios con respuestas asignadas."})]}),e.jsxs(o.Fragment,{children:[e.jsx(z,{titles:"Listado de oficios",active:"Listado de oficios",items:[]}),e.jsx(N,{children:e.jsx(l,{lg:12,md:12,children:e.jsxs(x,{children:[e.jsxs(x.Header,{className:"d-flex justify-content-between",children:[e.jsx(x.Title,{as:"h3",children:"Oficios con respuestas"}),e.jsxs("div",{className:"tags",children:[e.jsx("span",{className:"tag tag-radius tag-round tag-verde",children:"Se dio respuesta en tiempo"}),e.jsx("span",{className:"tag tag-radius tag-round tag-amarillo",children:"Sin respuesta, en tiempo"}),e.jsx("span",{className:"tag tag-radius tag-round tag-naranja",children:"Sin respuesta, fuera de tiempo"}),e.jsx("span",{className:"tag tag-radius tag-round tag-rojo",children:"Se dio respuesta fuera de tiempo"})]}),e.jsx("div",{className:"tags"})]}),e.jsx(x.Body,{children:e.jsx("div",{className:"panel panel-default",children:e.jsxs(q,{defaultActiveKey:"tab1",children:[e.jsx(j,{eventKey:"tab1",title:"Activos",children:e.jsx(l,{md:12,className:"table-responsive",children:e.jsx(f,{data:P,options:{language:u,autoWidth:!1},columns:[{data:"id",title:"Estatus",createdCell(a,i,m,L,B){h(a).css("background",m.color),h(a).css("color",m.color)},width:"5%"},{data:"f_ingreso",title:"Fecha de ingreso",width:"10%"},{data:"numero_oficio",title:"No. Oficio / Folio",width:"5%"},{data:"area",title:"Área",width:"10%"},{data:"proceso",title:"Proceso",width:"10%"},{data:"descripcion",title:"Breve descripción",width:"40%"},{data:"proceso",width:"15%",title:"Acciones"}],className:"display table-bordered  border-bottom ancho100",slots:{6:(a,i)=>e.jsx("div",{className:"text-center",children:i.enviado===1?e.jsx(s,{className:"btn-icon btn btn-warning",variant:"warning",title:"Subir confirmación de recibido",onClick:()=>{r.clearErrors(),r.setData({...a,id:i.id,tipo:"respuesta"}),d(!0)},children:e.jsx("i",{className:"fa fa-upload"})}):e.jsx(g,{href:route("viewRespOficio",{id:i.id}),children:e.jsxs(s,{className:"btn-icon btn btn-warning mr-1",variant:"primary",title:"Revisar respuesta",children:[e.jsx("i",{className:"zmdi zmdi-pin-account"})," "]})})})}})})}),e.jsx(j,{eventKey:"tab2",title:"Histórico",children:e.jsx(l,{md:12,className:"table-responsive",children:e.jsx(f,{data:D,options:{language:u,autoWidth:!1},columns:[{data:"id",title:"Estatus",createdCell(a,i,m,L,B){h(a).css("background",m.color),h(a).css("color",m.color)},width:"5%"},{data:"f_ingreso",title:"Fecha de ingreso",width:"10%"},{data:"numero_oficio",title:"No. Oficio / Folio",width:"5%"},{data:"area",title:"Área",width:"10%"},{data:"proceso",title:"Proceso",width:"10%"},{data:"descripcion",title:"Breve descripción",width:"40%"},{data:"proceso",width:"15%",title:"Acciones"}],className:"display table-bordered  border-bottom ancho100",slots:{6:(a,i)=>e.jsxs("div",{className:"text-center",children:[e.jsx(s,{className:"btn-icon btn btn-warning",variant:"danger",title:"Ver confirmación de recibido",onClick:()=>{c({...t,urlPdf:i.archivo_respuesta,extension:i.extension}),n(!0)},children:e.jsx("i",{className:"fa fa-file-pdf-o"})}),e.jsx(s,{className:"btn-icon btn btn-warning ml-1",variant:"danger",title:"Ver respuesta al oficio",onClick:()=>{c({...t,urlPdf:`imprime/pdf/0/${i.id}`,extension:"pdf"}),n(!0)},children:e.jsx("i",{className:"fa fa-file-pdf-o"})}),e.jsx(s,{className:"btn-icon ml-1",variant:"danger",title:"Ver PDF del oficio",onClick:()=>{c({...t,urlPdf:i.archivo,extension:"pdf"}),n(!0)},children:e.jsx("i",{className:"fa fa-eye"})}),e.jsx(s,{className:"btn-icon ml-1",variant:"success",onClick:()=>{c({...t,idOfico:i.id}),v(!0)},title:"Ver línea de tiempo del oficio",children:e.jsx("i",{className:"fa fa-history"})})]})}})})}),e.jsx(j,{eventKey:"tab3",title:"Informativos",children:e.jsx(l,{md:12,className:"table-responsive",children:e.jsx(f,{data:k,options:{language:u,autoWidth:!1},columns:[{data:"f_ingreso",title:"Fecha de ingreso",width:"10%"},{data:"numero_oficio",title:"No. Oficio / Folio",width:"5%"},{data:"descripcion",title:"Breve descripción",width:"40%"},{data:"proceso",width:"15%",title:"Acciones"}],className:"display table-bordered  border-bottom ancho100",slots:{3:(a,i)=>e.jsx("div",{className:"text-center",children:e.jsx(s,{className:"btn-icon ",variant:"danger",title:"Ver PDF del oficio",onClick:()=>{c({...t,urlPdf:i.archivo,extension:"pdf"}),n(!0)},children:e.jsx("i",{className:"fa fa-eye"})})})}})})}),e.jsx(j,{eventKey:"tab4",title:"Oficios VD",children:e.jsx(l,{md:12,className:"table-responsive",children:e.jsx(f,{data:y,options:{language:u,autoWidth:!1},columns:[{data:"f_ingreso",title:"Fecha de creación",width:"10%"},{data:"area",title:"Área",width:"10%"},{data:"destinatario",title:"Destinatario",width:"10%"},{data:"id",width:"15%",title:"Acciones"}],className:"display table-bordered  border-bottom ancho100",slots:{3:(a,i)=>e.jsxs("div",{className:"text-center",children:[i.enviado===1?i.archivo_respuesta===null?e.jsx(s,{className:"btn-icon btn btn-warning mr-1",variant:"warning",title:"Subir confirmación de recibido",onClick:()=>{r.clearErrors(),r.setData({...a,id:i.id,tipo:"nuevo"}),d(!0)},children:e.jsx("i",{className:"fa fa-upload"})}):e.jsx(s,{className:"btn-icon btn btn-warning mr-1",variant:"danger",title:"Ver confirmación de recibido",onClick:()=>{c({...t,urlPdf:i.archivo_respuesta,extension:i.extension}),n(!0)},children:e.jsx("i",{className:"fa fa-file-pdf-o"})}):i.finalizado===null?null:e.jsx(g,{href:route("viewRespNuevoOficio",{id:i.id}),children:e.jsxs(s,{className:"btn-icon btn btn-warning mr-1",variant:"primary",title:"Revisar respuesta",children:[e.jsx("i",{className:"zmdi zmdi-pin-account"})," "]})}),e.jsx(s,{className:"btn-icon ",variant:"danger",title:"Ver PDF del oficio",onClick:()=>{c({...t,urlPdf:`imprime/nuevo/pdf/${i.id}`,extension:"pdf"}),n(!0)},children:e.jsx("i",{className:"fa fa-eye"})})]})}})})})]})})})]})})}),e.jsxs(J,{show:S,onHide:()=>d(!1),children:[e.jsx(Q,{children:e.jsx(U,{as:"h5",children:"Evidencía de recibido"})}),e.jsxs("form",{onSubmit:O,children:[e.jsx(X,{children:e.jsx(N,{children:e.jsxs(l,{xs:12,children:[e.jsx(w.Label,{children:"Evidencia de confirmación de recibido:"}),e.jsx(w.Control,{type:"file",accept:".pdf,.jpg,.png,.jpeg",className:r.errors.archivo?"inputError":"",ref:b,onChange:a=>R(a)}),e.jsx(I,{className:"mt-1",message:r.errors.archivo})]})})}),e.jsxs(Y,{children:[e.jsx(s,{variant:"secondary",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(s,{variant:"primary",type:"submit",children:"Subir evidencia"})]})]})]}),e.jsx($,{urlPdf:t.urlPdf,show:C,tipo:t.extension,setShow:n}),e.jsx(G,{showLinea:F,setShowLinea:v,id:t.idOfico})]})]})};export{he as default};
