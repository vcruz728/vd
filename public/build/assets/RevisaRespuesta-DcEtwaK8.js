import{X as O,r as c,G as C,j as e,S as U,x as $,A as q}from"./app-CLURJkGK.js";import{A as G,p as W,g as w}from"./pageHeader-D_1LwfWO.js";/* empty css                     */import{V as K}from"./VerPdf-DXHcB1wc.js";import{S as j}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import f from"./InputError-g248v_Br.js";import{R as b,B as d}from"./index-6M-nTxTF.js";import{C as r}from"./Col-BmTaf4dG.js";import{C as o}from"./Card-DrgDsYzZ.js";import{A as X}from"./Alert-BQCR0FLF.js";import{F as a}from"./Form-CZ3SpEJp.js";import{M as R,a as S,b as B,c as E,d as F}from"./Modal-MDHOTQRA.js";import"./commonimages-Db2ZVa_Y.js";import"./CloseButton-ZLY2bF9Q.js";import"./ElementChildren-KYUFPN3z.js";function me({status:g,oficio:t,archivos:v}){const N=O().props.auth.user,[k,m]=c.useState(!1),[A,y]=c.useState(!1),[D,u]=c.useState(!1),[L,h]=c.useState(""),[z,p]=c.useState("pdf"),V=c.useRef(null),l=C({id:0,descripcion:"",archivo:null,enrutar:"SI"}),T=s=>{s.preventDefault(),j.fire({title:"¿Está seguro?",text:"Una vez guardada la respuesta, esta no se podrá editar",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar",customClass:{container:"swalSuperior"}}).then(i=>{i.isConfirmed?l.post(route("respondeOFicio")):l.cancel()})},n=C({id:0,descripcion:""}),M=s=>{s.preventDefault(),j.fire({title:"¿Está seguro?",text:"Se notificará al colaborador para que vuelva a responder el oficio.",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar",customClass:{container:"swalSuperior"}}).then(i=>{i.isConfirmed?n.put(route("rechazarResp")):n.cancel()})},H=()=>{j.fire({title:"¿Está seguro?",text:"El oficio ya no se podrá editar y se marcará como finalizado",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&q.put(route("oficios.aceptResp",{id:t.id}))})},I=s=>{const i=s.target;i.files&&l.setData("archivo",i.files[0])},x=s=>s.startsWith("http")?s:s.startsWith("imprime")?w(`/${s}`):w(`/files/${s}`),P=(s,i,_)=>{i==1?(h(x(s)),m(!0),p(_)):window.open(x(s),"_blank")};return e.jsxs(G,{children:[e.jsxs(U,{children:[e.jsx("title",{children:"Revisión de respuesta del colaborador"}),e.jsx("meta",{name:"Revision de respuesta",content:"Revise la respuesta del oficio por parte de su colaborador"})]}),e.jsxs(c.Fragment,{children:[e.jsx(W,{titles:"Revisión de respuesta",active:"Revisión de respuesta",items:[{titulo:"Mis oficios",urlHeader:"/oficios/mis-oficios"}]}),e.jsxs(b,{children:[e.jsx(r,{lg:12,xl:6,children:e.jsxs(o,{children:[e.jsx(o.Header,{children:e.jsx(o.Title,{as:"h3",children:"Información del oficio"})}),e.jsxs(o.Body,{children:[g&&e.jsx(X,{variant:"success",className:"alert-dismissible",children:g}),e.jsx("div",{className:"form-row",children:e.jsx(r,{xl:4,md:6,className:"mb-4",children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Ingreso de la solicitud"}),e.jsxs("div",{className:"custom-controls-stacked",children:[e.jsxs("label",{className:"custom-control custom-radio-md",children:[e.jsx("input",{type:"radio",className:"custom-control-input",name:"ingreso",defaultValue:"Físico",defaultChecked:t.ingreso=="Físico",disabled:!0}),e.jsx("span",{className:"custom-control-label",children:"Físico"})]}),e.jsxs("label",{className:"custom-control custom-radio-md",style:{marginLeft:"2rem"},children:[e.jsx("input",{type:"radio",className:"custom-control-input",name:"ingreso",defaultValue:"Email",defaultChecked:t.ingreso=="Email",disabled:!0}),e.jsx("span",{className:"custom-control-label",children:"Email"})]})]})]})})}),e.jsxs("div",{className:"form-row",children:[t.ingreso=="Físico"?e.jsxs(r,{xs:12,sm:6,xl:4,className:"mb-3",children:[e.jsx(a.Label,{children:"Número de oficio"}),e.jsx(a.Control,{name:"num_oficio",defaultValue:t.num_oficio,type:"text",disabled:!0})]}):null,t.ingreso=="Email"?e.jsxs(r,{xs:12,sm:6,xl:4,className:"mb-3",children:[e.jsx(a.Label,{children:"Número de folio"}),e.jsx(a.Control,{type:"text",disabled:!0,name:"num_folio",defaultValue:t.num_folio})]}):null,e.jsxs(r,{xs:12,sm:6,md:6,lg:6,xl:4,className:"mb-3",children:[e.jsx(a.Label,{children:"Dependencia o Unidad Académica"}),e.jsx(a.Control,{defaultValue:t.des,type:"text",disabled:!0})]}),e.jsxs(r,{xs:12,sm:6,md:6,lg:6,xl:4,className:"mb-3",children:[e.jsx(a.Label,{children:"Área para dar respuesta"}),e.jsx(a.Control,{defaultValue:t.area,type:"text",disabled:!0})]}),e.jsxs(r,{xs:12,sm:6,md:6,lg:6,xl:4,className:"mb-3",children:[e.jsx(a.Label,{children:"Proceso al que impacta"}),e.jsx(a.Control,{defaultValue:t.proceso,type:"text",disabled:!0})]}),e.jsx(r,{xs:12,sm:12,xl:8,style:{padding:40},children:e.jsxs("span",{className:"tag tag-radius tag-round tag-outline-danger",onClick:()=>{h(x(t.archivo)),m(!0),p("pdf")},children:["Click para ver archivo",e.jsx("i",{className:"fa fa-file-pdf-o",style:{padding:6}})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(a.Label,{children:"Breve descripción del asunto:"}),e.jsx("textarea",{className:"form-control",name:"descripcion",defaultValue:t.descripcion,rows:3,disabled:!0})]})]})]})}),e.jsx(r,{lg:12,xl:6,children:e.jsxs(o,{children:[e.jsx(o.Header,{children:e.jsx(o.Title,{as:"h3",children:"Respuesta del colaborador"})}),e.jsx(o.Body,{children:e.jsxs("div",{className:"form-row",children:[e.jsx(r,{xs:12,style:{padding:40},children:e.jsxs("span",{className:"tag tag-radius tag-round tag-outline-danger",onClick:()=>{h(x(`imprime/pdf/0/${t.id}`)),p("pdf"),m(!0)},children:["Click para ver archivo",e.jsx("i",{className:"fa fa-file-pdf-o",style:{padding:6}})]})}),v.length>0?e.jsxs(e.Fragment,{children:[e.jsx(r,{xs:12,children:e.jsxs("table",{className:"table table-bordered table-hover table-striped",children:[e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:2,children:"Archivos adjuntos"})}),e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Ver"})]})]}),e.jsx("tbody",{children:v.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.nombre}),e.jsx("td",{children:e.jsx(d,{className:"btn-icon ml-1",variant:"danger",title:"Ver PDF del oficio",onClick:()=>P(s.url,s.tipo,s.extension),children:e.jsx("i",{className:"fa fa-eye"})})})]},s.id))})]})}),e.jsx(r,{xs:12,className:"mb-5 d-flex justify-content-end",children:e.jsxs("a",{href:route("oficios.downloadFiles",{id:t.id}),target:"_BLANK",className:"btn btn-warning btn-lg mb-1",children:["Descargar todos los archivos adjuntos  ",e.jsx("i",{className:"fa fa-download"})]})})]}):null,e.jsx(r,{xs:12,xl:6,xxl:4,className:"d-flex justify-content-center",children:e.jsx(d,{className:"btn-lg mb-1",variant:"success",onClick:H,children:N.rol==5?"Aceptar respuesta":"Autorizar respuesta"})}),e.jsx(r,{xs:12,xl:6,xxl:4,className:"d-flex justify-content-center",children:e.jsx(d,{className:"btn-lg mb-1",variant:"danger",onClick:()=>{u(!0),n.setData("id",t.id)},children:"Rechazar respuesta"})}),e.jsx(r,{xs:12,xl:12,xxl:4,className:"d-flex justify-content-center",children:e.jsx($,{href:route("oficioResponder",{id:t.id}),className:"btn btn-primary btn-lg",children:N.rol==5?"Editar respuesta":"Responder oficio (Ignorando respuesta)"})})]})})]})})]}),e.jsx(K,{urlPdf:L,show:k,setShow:m,tipo:z}),e.jsxs(R,{size:"xl",show:A,onHide:()=>y(!1),children:[e.jsx(S,{children:e.jsx(B,{as:"h5",children:"Responder Oficio"})}),e.jsxs("form",{onSubmit:T,children:[e.jsx(E,{children:e.jsxs(b,{children:[e.jsxs(r,{xs:12,children:[e.jsx(a.Label,{children:"Breve descripción de la solución:"}),e.jsx("textarea",{className:l.errors.descripcion?"form-control inputError":"form-control",name:"descripcion",value:l.data.descripcion,onChange:s=>l.setData("descripcion",s.target.value),placeholder:"Máximo 1000 caracteres",rows:2}),e.jsx(f,{className:"mt-1",message:l.errors.descripcion})]}),e.jsxs(r,{xs:12,sm:6,xl:4,children:[e.jsx(a.Label,{children:"Adjuntar archivo PDF"}),e.jsx(a.Control,{type:"file",accept:".pdf",className:l.errors.archivo?"inputError":"",ref:V,onChange:s=>I(s)}),e.jsx(f,{className:"mt-1",message:l.errors.archivo})]})]})}),e.jsxs(F,{children:[e.jsx(d,{variant:"secondary",onClick:()=>y(!1),children:"Cancelar"}),e.jsx(d,{variant:"primary",type:"submit",children:"Responder oficio"})]})]})]}),e.jsxs(R,{show:D,onHide:()=>u(!1),children:[e.jsx(S,{children:e.jsx(B,{as:"h5",children:"Rechazar Respuesta de Oficio"})}),e.jsxs("form",{onSubmit:M,children:[e.jsx(E,{children:e.jsx(b,{children:e.jsxs(r,{xs:12,children:[e.jsx(a.Label,{children:"Breve descripción del motivo del rechazo:"}),e.jsx("textarea",{className:n.errors.descripcion?"form-control inputError":"form-control",name:"descripcion",value:n.data.descripcion,onChange:s=>n.setData("descripcion",s.target.value),placeholder:"Máximo 500 caracteres",rows:2}),e.jsx(f,{className:"mt-1",message:n.errors.descripcion})]})})}),e.jsxs(F,{children:[e.jsx(d,{variant:"secondary",onClick:()=>u(!1),children:"Cancelar"}),e.jsx(d,{variant:"primary",type:"submit",children:"Rechazar respuesta"})]})]})]})]})]})}export{me as default};
