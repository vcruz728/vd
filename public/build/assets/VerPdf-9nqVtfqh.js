var Ks=Object.defineProperty;var kr=h=>{throw TypeError(h)};var Js=(h,v,At)=>v in h?Ks(h,v,{enumerable:!0,configurable:!0,writable:!0,value:At}):h[v]=At;var qe=(h,v,At)=>Js(h,typeof v!="symbol"?v+"":v,At),Ri=(h,v,At)=>v.has(h)||kr("Cannot "+At);var t=(h,v,At)=>(Ri(h,v,"read from private field"),At?At.call(h):v.get(h)),pt=(h,v,At)=>v.has(h)?kr("Cannot add the same private member more than once"):v instanceof WeakSet?v.add(h):v.set(h,At),gt=(h,v,At,d)=>(Ri(h,v,"write to private field"),d?d.call(h,At):v.set(h,At),At),Q=(h,v,At)=>(Ri(h,v,"access private method"),At);var jn=(h,v,At,d)=>({set _(T){gt(h,v,T,At)},get _(){return t(h,v,d)}});import{f as require$$5,r as reactExports,j as jsxRuntimeExports}from"./app-BZjgC7cP.js";import{g as getFullUrl,O as Offcanvas}from"./pageHeader-B4CRHfJf.js";import{C as Col}from"./Col-Do4GAVIT.js";var lib={exports:{}},core_min={};function commonjsRequire(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};(function(module,exports){(function(v,At){module.exports=v.pdfjsLib=At()})(globalThis,()=>(()=>{var __webpack_modules__=[,(h,v)=>{var De;Object.defineProperty(v,"__esModule",{value:!0}),v.VerbosityLevel=v.Util=v.UnknownErrorException=v.UnexpectedResponseException=v.TextRenderingMode=v.RenderingIntentFlag=v.PromiseCapability=v.PermissionFlag=v.PasswordResponses=v.PasswordException=v.PageActionEventType=v.OPS=v.MissingPDFException=v.MAX_IMAGE_SIZE_TO_CACHE=v.LINE_FACTOR=v.LINE_DESCENT_FACTOR=v.InvalidPDFException=v.ImageKind=v.IDENTITY_MATRIX=v.FormatError=v.FeatureTest=v.FONT_IDENTITY_MATRIX=v.DocumentActionEventType=v.CMapCompressionType=v.BaseException=v.BASELINE_FACTOR=v.AnnotationType=v.AnnotationReplyType=v.AnnotationPrefix=v.AnnotationMode=v.AnnotationFlag=v.AnnotationFieldFlag=v.AnnotationEditorType=v.AnnotationEditorPrefix=v.AnnotationEditorParamsType=v.AnnotationBorderStyleType=v.AnnotationActionEventType=v.AbortException=void 0,v.assert=M,v.bytesToString=St,v.createValidAbsoluteUrl=lt,v.getModificationDate=Bt,v.getUuid=ie,v.getVerbosityLevel=Y,v.info=it,v.isArrayBuffer=et,v.isArrayEqual=Wt,v.isNodeJS=void 0,v.normalizeUnicode=$t,v.objectFromMap=Ft,v.objectSize=xt,v.setVerbosityLevel=vt,v.shadow=P,v.string32=Pt,v.stringToBytes=Et,v.stringToPDFString=wt,v.stringToUTF8String=Lt,v.unreachable=bt,v.utf8StringToString=kt,v.warn=q;const At=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");v.isNodeJS=At;const d=[1,0,0,1,0,0];v.IDENTITY_MATRIX=d;const T=[.001,0,0,.001,0,0];v.FONT_IDENTITY_MATRIX=T;const e=1e7;v.MAX_IMAGE_SIZE_TO_CACHE=e;const tt=1.35;v.LINE_FACTOR=tt;const Rt=.35;v.LINE_DESCENT_FACTOR=Rt;const G=Rt/tt;v.BASELINE_FACTOR=G;const O={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};v.RenderingIntentFlag=O;const f={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};v.AnnotationMode=f;const W="pdfjs_internal_editor_";v.AnnotationEditorPrefix=W;const j={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};v.AnnotationEditorType=j;const y={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};v.AnnotationEditorParamsType=y;const b={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};v.PermissionFlag=b;const k={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};v.TextRenderingMode=k;const _={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};v.ImageKind=_;const g={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};v.AnnotationType=g;const S={GROUP:"Group",REPLY:"R"};v.AnnotationReplyType=S;const B={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};v.AnnotationFlag=B;const w={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};v.AnnotationFieldFlag=w;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};v.AnnotationBorderStyleType=s;const u={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};v.AnnotationActionEventType=u;const a={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};v.DocumentActionEventType=a;const l={O:"PageOpen",C:"PageClose"};v.PageActionEventType=l;const c={ERRORS:0,WARNINGS:1,INFOS:5};v.VerbosityLevel=c;const N={NONE:0,BINARY:1};v.CMapCompressionType=N;const o={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};v.OPS=o;const E={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};v.PasswordResponses=E;let D=c.WARNINGS;function vt(Tt){Number.isInteger(Tt)&&(D=Tt)}function Y(){return D}function it(Tt){D>=c.INFOS&&console.log(`Info: ${Tt}`)}function q(Tt){D>=c.WARNINGS&&console.log(`Warning: ${Tt}`)}function bt(Tt){throw new Error(Tt)}function M(Tt,rt){Tt||bt(rt)}function X(Tt){switch(Tt==null?void 0:Tt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function lt(Tt,rt=null,at=null){if(!Tt)return null;try{if(at&&typeof Tt=="string"){if(at.addDefaultProtocol&&Tt.startsWith("www.")){const Jt=Tt.match(/\./g);(Jt==null?void 0:Jt.length)>=2&&(Tt=`http://${Tt}`)}if(at.tryConvertEncoding)try{Tt=Lt(Tt)}catch{}}const Xt=rt?new URL(Tt,rt):new URL(Tt);if(X(Xt))return Xt}catch{}return null}function P(Tt,rt,at,Xt=!1){return Object.defineProperty(Tt,rt,{value:at,enumerable:!Xt,configurable:!0,writable:!1}),at}const i=function(){function rt(at,Xt){this.constructor===rt&&bt("Cannot initialize BaseException."),this.message=at,this.name=Xt}return rt.prototype=new Error,rt.constructor=rt,rt}();v.BaseException=i;class r extends i{constructor(rt,at){super(rt,"PasswordException"),this.code=at}}v.PasswordException=r;class m extends i{constructor(rt,at){super(rt,"UnknownErrorException"),this.details=at}}v.UnknownErrorException=m;class F extends i{constructor(rt){super(rt,"InvalidPDFException")}}v.InvalidPDFException=F;class L extends i{constructor(rt){super(rt,"MissingPDFException")}}v.MissingPDFException=L;class x extends i{constructor(rt,at){super(rt,"UnexpectedResponseException"),this.status=at}}v.UnexpectedResponseException=x;class Z extends i{constructor(rt){super(rt,"FormatError")}}v.FormatError=Z;class mt extends i{constructor(rt){super(rt,"AbortException")}}v.AbortException=mt;function St(Tt){(typeof Tt!="object"||(Tt==null?void 0:Tt.length)===void 0)&&bt("Invalid argument for bytesToString");const rt=Tt.length,at=8192;if(rt<at)return String.fromCharCode.apply(null,Tt);const Xt=[];for(let Jt=0;Jt<rt;Jt+=at){const oe=Math.min(Jt+at,rt),H=Tt.subarray(Jt,oe);Xt.push(String.fromCharCode.apply(null,H))}return Xt.join("")}function Et(Tt){typeof Tt!="string"&&bt("Invalid argument for stringToBytes");const rt=Tt.length,at=new Uint8Array(rt);for(let Xt=0;Xt<rt;++Xt)at[Xt]=Tt.charCodeAt(Xt)&255;return at}function Pt(Tt){return String.fromCharCode(Tt>>24&255,Tt>>16&255,Tt>>8&255,Tt&255)}function xt(Tt){return Object.keys(Tt).length}function Ft(Tt){const rt=Object.create(null);for(const[at,Xt]of Tt)rt[at]=Xt;return rt}function ct(){const Tt=new Uint8Array(4);return Tt[0]=1,new Uint32Array(Tt.buffer,0,1)[0]===1}function ut(){try{return new Function(""),!0}catch{return!1}}class A{static get isLittleEndian(){return P(this,"isLittleEndian",ct())}static get isEvalSupported(){return P(this,"isEvalSupported",ut())}static get isOffscreenCanvasSupported(){return P(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?P(this,"platform",{isWin:!1,isMac:!1}):P(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var rt,at;return P(this,"isCSSRoundSupported",(at=(rt=globalThis.CSS)==null?void 0:rt.supports)==null?void 0:at.call(rt,"width: round(1.5px, 1px)"))}}v.FeatureTest=A;const I=[...Array(256).keys()].map(Tt=>Tt.toString(16).padStart(2,"0"));class nt{static makeHexColor(rt,at,Xt){return`#${I[rt]}${I[at]}${I[Xt]}`}static scaleMinMax(rt,at){let Xt;rt[0]?(rt[0]<0&&(Xt=at[0],at[0]=at[1],at[1]=Xt),at[0]*=rt[0],at[1]*=rt[0],rt[3]<0&&(Xt=at[2],at[2]=at[3],at[3]=Xt),at[2]*=rt[3],at[3]*=rt[3]):(Xt=at[0],at[0]=at[2],at[2]=Xt,Xt=at[1],at[1]=at[3],at[3]=Xt,rt[1]<0&&(Xt=at[2],at[2]=at[3],at[3]=Xt),at[2]*=rt[1],at[3]*=rt[1],rt[2]<0&&(Xt=at[0],at[0]=at[1],at[1]=Xt),at[0]*=rt[2],at[1]*=rt[2]),at[0]+=rt[4],at[1]+=rt[4],at[2]+=rt[5],at[3]+=rt[5]}static transform(rt,at){return[rt[0]*at[0]+rt[2]*at[1],rt[1]*at[0]+rt[3]*at[1],rt[0]*at[2]+rt[2]*at[3],rt[1]*at[2]+rt[3]*at[3],rt[0]*at[4]+rt[2]*at[5]+rt[4],rt[1]*at[4]+rt[3]*at[5]+rt[5]]}static applyTransform(rt,at){const Xt=rt[0]*at[0]+rt[1]*at[2]+at[4],Jt=rt[0]*at[1]+rt[1]*at[3]+at[5];return[Xt,Jt]}static applyInverseTransform(rt,at){const Xt=at[0]*at[3]-at[1]*at[2],Jt=(rt[0]*at[3]-rt[1]*at[2]+at[2]*at[5]-at[4]*at[3])/Xt,oe=(-rt[0]*at[1]+rt[1]*at[0]+at[4]*at[1]-at[5]*at[0])/Xt;return[Jt,oe]}static getAxialAlignedBoundingBox(rt,at){const Xt=this.applyTransform(rt,at),Jt=this.applyTransform(rt.slice(2,4),at),oe=this.applyTransform([rt[0],rt[3]],at),H=this.applyTransform([rt[2],rt[1]],at);return[Math.min(Xt[0],Jt[0],oe[0],H[0]),Math.min(Xt[1],Jt[1],oe[1],H[1]),Math.max(Xt[0],Jt[0],oe[0],H[0]),Math.max(Xt[1],Jt[1],oe[1],H[1])]}static inverseTransform(rt){const at=rt[0]*rt[3]-rt[1]*rt[2];return[rt[3]/at,-rt[1]/at,-rt[2]/at,rt[0]/at,(rt[2]*rt[5]-rt[4]*rt[3])/at,(rt[4]*rt[1]-rt[5]*rt[0])/at]}static singularValueDecompose2dScale(rt){const at=[rt[0],rt[2],rt[1],rt[3]],Xt=rt[0]*at[0]+rt[1]*at[2],Jt=rt[0]*at[1]+rt[1]*at[3],oe=rt[2]*at[0]+rt[3]*at[2],H=rt[2]*at[1]+rt[3]*at[3],Ct=(Xt+H)/2,jt=Math.sqrt((Xt+H)**2-4*(Xt*H-oe*Jt))/2,Zt=Ct+jt||1,ee=Ct-jt||1;return[Math.sqrt(Zt),Math.sqrt(ee)]}static normalizeRect(rt){const at=rt.slice(0);return rt[0]>rt[2]&&(at[0]=rt[2],at[2]=rt[0]),rt[1]>rt[3]&&(at[1]=rt[3],at[3]=rt[1]),at}static intersect(rt,at){const Xt=Math.max(Math.min(rt[0],rt[2]),Math.min(at[0],at[2])),Jt=Math.min(Math.max(rt[0],rt[2]),Math.max(at[0],at[2]));if(Xt>Jt)return null;const oe=Math.max(Math.min(rt[1],rt[3]),Math.min(at[1],at[3])),H=Math.min(Math.max(rt[1],rt[3]),Math.max(at[1],at[3]));return oe>H?null:[Xt,oe,Jt,H]}static bezierBoundingBox(rt,at,Xt,Jt,oe,H,Ct,jt){const Zt=[],ee=[[],[]];let qt,R,C,K,_t,yt,Mt,Nt;for(let be=0;be<2;++be){if(be===0?(R=6*rt-12*Xt+6*oe,qt=-3*rt+9*Xt-9*oe+3*Ct,C=3*Xt-3*rt):(R=6*at-12*Jt+6*H,qt=-3*at+9*Jt-9*H+3*jt,C=3*Jt-3*at),Math.abs(qt)<1e-12){if(Math.abs(R)<1e-12)continue;K=-C/R,0<K&&K<1&&Zt.push(K);continue}Mt=R*R-4*C*qt,Nt=Math.sqrt(Mt),!(Mt<0)&&(_t=(-R+Nt)/(2*qt),0<_t&&_t<1&&Zt.push(_t),yt=(-R-Nt)/(2*qt),0<yt&&yt<1&&Zt.push(yt))}let Qt=Zt.length,Yt;const Vt=Qt;for(;Qt--;)K=Zt[Qt],Yt=1-K,ee[0][Qt]=Yt*Yt*Yt*rt+3*Yt*Yt*K*Xt+3*Yt*K*K*oe+K*K*K*Ct,ee[1][Qt]=Yt*Yt*Yt*at+3*Yt*Yt*K*Jt+3*Yt*K*K*H+K*K*K*jt;return ee[0][Vt]=rt,ee[1][Vt]=at,ee[0][Vt+1]=Ct,ee[1][Vt+1]=jt,ee[0].length=ee[1].length=Vt+2,[Math.min(...ee[0]),Math.min(...ee[1]),Math.max(...ee[0]),Math.max(...ee[1])]}}v.Util=nt;const dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function wt(Tt){if(Tt[0]>="ï"){let at;if(Tt[0]==="þ"&&Tt[1]==="ÿ"?at="utf-16be":Tt[0]==="ÿ"&&Tt[1]==="þ"?at="utf-16le":Tt[0]==="ï"&&Tt[1]==="»"&&Tt[2]==="¿"&&(at="utf-8"),at)try{const Xt=new TextDecoder(at,{fatal:!0}),Jt=Et(Tt);return Xt.decode(Jt)}catch(Xt){q(`stringToPDFString: "${Xt}".`)}}const rt=[];for(let at=0,Xt=Tt.length;at<Xt;at++){const Jt=dt[Tt.charCodeAt(at)];rt.push(Jt?String.fromCharCode(Jt):Tt.charAt(at))}return rt.join("")}function Lt(Tt){return decodeURIComponent(escape(Tt))}function kt(Tt){return unescape(encodeURIComponent(Tt))}function et(Tt){return typeof Tt=="object"&&(Tt==null?void 0:Tt.byteLength)!==void 0}function Wt(Tt,rt){if(Tt.length!==rt.length)return!1;for(let at=0,Xt=Tt.length;at<Xt;at++)if(Tt[at]!==rt[at])return!1;return!0}function Bt(Tt=new Date){return[Tt.getUTCFullYear().toString(),(Tt.getUTCMonth()+1).toString().padStart(2,"0"),Tt.getUTCDate().toString().padStart(2,"0"),Tt.getUTCHours().toString().padStart(2,"0"),Tt.getUTCMinutes().toString().padStart(2,"0"),Tt.getUTCSeconds().toString().padStart(2,"0")].join("")}class ge{constructor(){pt(this,De,!1);this.promise=new Promise((rt,at)=>{this.resolve=Xt=>{gt(this,De,!0),rt(Xt)},this.reject=Xt=>{gt(this,De,!0),at(Xt)}})}get settled(){return t(this,De)}}De=new WeakMap,v.PromiseCapability=ge;let le=null,Pe=null;function $t(Tt){return le||(le=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Pe=new Map([["ﬅ","ſt"]])),Tt.replaceAll(le,(rt,at,Xt)=>at?at.normalize("NFKC"):Pe.get(Xt))}function ie(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Tt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Tt);else for(let rt=0;rt<32;rt++)Tt[rt]=Math.floor(Math.random()*255);return St(Tt)}const ye="pdfjs_internal_id_";v.AnnotationPrefix=ye},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var h,At,d,T,Dn,ii,Rt,G,O,f,W,j,y,b,k,ri,g,S,Mi,w,s;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(a){if(typeof a=="string"||a instanceof URL?a={url:a}:(0,_util.isArrayBuffer)(a)&&(a={data:a}),typeof a!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!a.url&&!a.data&&!a.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const l=new PDFDocumentLoadingTask,{docId:c}=l,N=a.url?getUrlProp(a.url):null,o=a.data?getDataProp(a.data):null,E=a.httpHeaders||null,D=a.withCredentials===!0,vt=a.password??null,Y=a.range instanceof PDFDataRangeTransport?a.range:null,it=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let q=a.worker instanceof PDFWorker?a.worker:null;const bt=a.verbosity,M=typeof a.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(a.docBaseUrl)?a.docBaseUrl:null,X=typeof a.cMapUrl=="string"?a.cMapUrl:null,lt=a.cMapPacked!==!1,P=a.CMapReaderFactory||DefaultCMapReaderFactory,i=typeof a.standardFontDataUrl=="string"?a.standardFontDataUrl:null,r=a.StandardFontDataFactory||DefaultStandardFontDataFactory,m=a.stopAtErrors!==!0,F=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,L=a.isEvalSupported!==!1,x=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!_util.isNodeJS,Z=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,mt=typeof a.disableFontFace=="boolean"?a.disableFontFace:_util.isNodeJS,St=a.fontExtraProperties===!0,Et=a.enableXfa===!0,Pt=a.ownerDocument||globalThis.document,xt=a.disableRange===!0,Ft=a.disableStream===!0,ct=a.disableAutoFetch===!0,ut=a.pdfBug===!0,A=Y?Y.length:a.length??NaN,I=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!_util.isNodeJS&&!mt,nt=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:P===_display_utils.DOMCMapReaderFactory&&r===_display_utils.DOMStandardFontDataFactory&&X&&i&&(0,_display_utils.isValidFetchUrl)(X,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(i,document.baseURI),dt=a.canvasFactory||new DefaultCanvasFactory({ownerDocument:Pt}),wt=a.filterFactory||new DefaultFilterFactory({docId:c,ownerDocument:Pt}),Lt=null;(0,_util.setVerbosityLevel)(bt);const kt={canvasFactory:dt,filterFactory:wt};if(nt||(kt.cMapReaderFactory=new P({baseUrl:X,isCompressed:lt}),kt.standardFontDataFactory=new r({baseUrl:i})),!q){const Bt={verbosity:bt,port:_worker_options.GlobalWorkerOptions.workerPort};q=Bt.port?PDFWorker.fromPort(Bt):new PDFWorker(Bt),l._worker=q}const et={docId:c,apiVersion:"3.11.174",data:o,password:vt,disableAutoFetch:ct,rangeChunkSize:it,length:A,docBaseUrl:M,enableXfa:Et,evaluatorOptions:{maxImageSize:F,disableFontFace:mt,ignoreErrors:m,isEvalSupported:L,isOffscreenCanvasSupported:x,canvasMaxAreaInBytes:Z,fontExtraProperties:St,useSystemFonts:I,cMapUrl:nt?X:null,standardFontDataUrl:nt?i:null}},Wt={ignoreErrors:m,isEvalSupported:L,disableFontFace:mt,fontExtraProperties:St,enableXfa:Et,ownerDocument:Pt,disableAutoFetch:ct,pdfBug:ut,styleElement:Lt};return q.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const Bt=_fetchDocument(q,et),ge=new Promise(function(le){let Pe;Y?Pe=new _transport_stream.PDFDataTransportStream({length:A,initialData:Y.initialData,progressiveDone:Y.progressiveDone,contentDispositionFilename:Y.contentDispositionFilename,disableRange:xt,disableStream:Ft},Y):o||(Pe=(ie=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(ie):(0,_display_utils.isValidFetchUrl)(ie.url)?new _displayFetch_stream.PDFFetchStream(ie):new _displayNetwork.PDFNetworkStream(ie))({url:N,length:A,httpHeaders:E,withCredentials:D,rangeChunkSize:it,disableRange:xt,disableStream:Ft})),le(Pe)});return Promise.all([Bt,ge]).then(function([le,Pe]){if(l.destroyed)throw new Error("Loading aborted");const $t=new _message_handler.MessageHandler(c,le,q.port),ie=new WorkerTransport($t,l,Pe,Wt,kt);l._transport=ie,$t.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(a,l){if(a.destroyed)throw new Error("Worker was destroyed");const c=await a.messageHandler.sendWithPromise("GetDocRequest",l,l.data?[l.data.buffer]:null);if(a.destroyed)throw new Error("Worker was destroyed");return c}function getUrlProp(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch{if(_util.isNodeJS&&typeof a=="string")return a}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(a){if(_util.isNodeJS&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return(0,_util.stringToBytes)(a);if(typeof a=="object"&&!isNaN(a==null?void 0:a.length)||(0,_util.isArrayBuffer)(a))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const v=class v{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${jn(v,h)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var l,c,N;this.destroyed=!0;try{(l=this._worker)!=null&&l.port&&(this._worker._pendingDestroy=!0),await((c=this._transport)==null?void 0:c.destroy())}catch(o){throw(N=this._worker)!=null&&N.port&&delete this._worker._pendingDestroy,o}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};h=new WeakMap,pt(v,h,0);let PDFDocumentLoadingTask=v;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,c,N=!1,o=null){this.length=l,this.initialData=c,this.progressiveDone=N,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,c){for(const N of this._rangeListeners)N(l,c)}onDataProgress(l,c){this._readyCapability.promise.then(()=>{for(const N of this._progressListeners)N(l,c)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const c of this._progressiveReadListeners)c(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,c){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,c){this._pdfInfo=l,this._transport=c,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(N=>{if(!N)return N;const o=[];for(const E in N)o.push(...N[E]);return o}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,c,N,o=!1){pt(this,T);pt(this,At,null);pt(this,d,!1);this._pageIndex=l,this._pageInfo=c,this._transport=N,this._stats=o?new _display_utils.StatTimer:null,this._pdfBug=o,this.commonObjs=N.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:c=this.rotate,offsetX:N=0,offsetY:o=0,dontFlip:E=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:c,offsetX:N,offsetY:o,dontFlip:E})}getAnnotations({intent:l="display"}={}){const c=this._transport.getRenderingIntent(l);return this._transport.getAnnotations(this._pageIndex,c.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:c,intent:N="display",annotationMode:o=_util.AnnotationMode.ENABLE,transform:E=null,background:D=null,optionalContentConfigPromise:vt=null,annotationCanvasMap:Y=null,pageColors:it=null,printAnnotationStorage:q=null}){var r,m;(r=this._stats)==null||r.time("Overall");const bt=this._transport.getRenderingIntent(N,o,q);gt(this,d,!1),Q(this,T,ii).call(this),vt||(vt=this._transport.getOptionalContentConfig());let M=this._intentStates.get(bt.cacheKey);M||(M=Object.create(null),this._intentStates.set(bt.cacheKey,M)),M.streamReaderCancelTimeout&&(clearTimeout(M.streamReaderCancelTimeout),M.streamReaderCancelTimeout=null);const X=!!(bt.renderingIntent&_util.RenderingIntentFlag.PRINT);M.displayReadyCapability||(M.displayReadyCapability=new _util.PromiseCapability,M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(m=this._stats)==null||m.time("Page Request"),this._pumpOperatorList(bt));const lt=F=>{var L,x;M.renderTasks.delete(P),(this._maybeCleanupAfterRender||X)&&gt(this,d,!0),Q(this,T,Dn).call(this,!X),F?(P.capability.reject(F),this._abortOperatorList({intentState:M,reason:F instanceof Error?F:new Error(F)})):P.capability.resolve(),(L=this._stats)==null||L.timeEnd("Rendering"),(x=this._stats)==null||x.timeEnd("Overall")},P=new InternalRenderTask({callback:lt,params:{canvasContext:l,viewport:c,transform:E,background:D},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Y,operatorList:M.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!X,pdfBug:this._pdfBug,pageColors:it});(M.renderTasks||(M.renderTasks=new Set)).add(P);const i=P.task;return Promise.all([M.displayReadyCapability.promise,vt]).then(([F,L])=>{var x;if(this.destroyed){lt();return}(x=this._stats)==null||x.time("Rendering"),P.initializeGraphics({transparency:F,optionalContentConfig:L}),P.operatorListChanged()}).catch(lt),i}getOperatorList({intent:l="display",annotationMode:c=_util.AnnotationMode.ENABLE,printAnnotationStorage:N=null}={}){var Y;function o(){D.operatorList.lastChunk&&(D.opListReadCapability.resolve(D.operatorList),D.renderTasks.delete(vt))}const E=this._transport.getRenderingIntent(l,c,N,!0);let D=this._intentStates.get(E.cacheKey);D||(D=Object.create(null),this._intentStates.set(E.cacheKey,D));let vt;return D.opListReadCapability||(vt=Object.create(null),vt.operatorListChanged=o,D.opListReadCapability=new _util.PromiseCapability,(D.renderTasks||(D.renderTasks=new Set)).add(vt),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Y=this._stats)==null||Y.time("Page Request"),this._pumpOperatorList(E)),D.opListReadCapability.promise}streamTextContent({includeMarkedContent:l=!1,disableNormalization:c=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:l===!0,disableNormalization:c===!0},{highWaterMark:100,size(o){return o.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(N=>_xfa_text.XfaText.textContent(N));const c=this.streamTextContent(l);return new Promise(function(N,o){function E(){D.read().then(function({value:Y,done:it}){if(it){N(vt);return}Object.assign(vt.styles,Y.styles),vt.items.push(...Y.items),E()},o)}const D=c.getReader(),vt={items:[],styles:Object.create(null)};E()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const c of this._intentStates.values())if(this._abortOperatorList({intentState:c,reason:new Error("Page was destroyed."),force:!0}),!c.opListReadCapability)for(const N of c.renderTasks)l.push(N.completed),N.cancel();return this.objs.clear(),gt(this,d,!1),Q(this,T,ii).call(this),Promise.all(l)}cleanup(l=!1){gt(this,d,!0);const c=Q(this,T,Dn).call(this,!1);return l&&c&&this._stats&&(this._stats=new _display_utils.StatTimer),c}_startRenderPage(l,c){var o,E;const N=this._intentStates.get(c);N&&((o=this._stats)==null||o.timeEnd("Page Request"),(E=N.displayReadyCapability)==null||E.resolve(l))}_renderPageChunk(l,c){for(let N=0,o=l.length;N<o;N++)c.operatorList.fnArray.push(l.fnArray[N]),c.operatorList.argsArray.push(l.argsArray[N]);c.operatorList.lastChunk=l.lastChunk,c.operatorList.separateAnnots=l.separateAnnots;for(const N of c.renderTasks)N.operatorListChanged();l.lastChunk&&Q(this,T,Dn).call(this,!0)}_pumpOperatorList({renderingIntent:l,cacheKey:c,annotationStorageSerializable:N}){const{map:o,transfers:E}=N,vt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:c,annotationStorage:o},E).getReader(),Y=this._intentStates.get(c);Y.streamReader=vt;const it=()=>{vt.read().then(({value:q,done:bt})=>{if(bt){Y.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(q,Y),it())},q=>{if(Y.streamReader=null,!this._transport.destroyed){if(Y.operatorList){Y.operatorList.lastChunk=!0;for(const bt of Y.renderTasks)bt.operatorListChanged();Q(this,T,Dn).call(this,!0)}if(Y.displayReadyCapability)Y.displayReadyCapability.reject(q);else if(Y.opListReadCapability)Y.opListReadCapability.reject(q);else throw q}})};it()}_abortOperatorList({intentState:l,reason:c,force:N=!1}){if(l.streamReader){if(l.streamReaderCancelTimeout&&(clearTimeout(l.streamReaderCancelTimeout),l.streamReaderCancelTimeout=null),!N){if(l.renderTasks.size>0)return;if(c instanceof _display_utils.RenderingCancelledException){let o=RENDERING_CANCELLED_TIMEOUT;c.extraDelay>0&&c.extraDelay<1e3&&(o+=c.extraDelay),l.streamReaderCancelTimeout=setTimeout(()=>{l.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:l,reason:c,force:!0})},o);return}}if(l.streamReader.cancel(new _util.AbortException(c.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[o,E]of this._intentStates)if(E===l){this._intentStates.delete(o);break}this.cleanup()}}}get stats(){return this._stats}}At=new WeakMap,d=new WeakMap,T=new WeakSet,Dn=function(l=!1){if(Q(this,T,ii).call(this),!t(this,d)||this.destroyed)return!1;if(l)return gt(this,At,setTimeout(()=>{gt(this,At,null),Q(this,T,Dn).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:c,operatorList:N}of this._intentStates.values())if(c.size>0||!N.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),gt(this,d,!1),!0},ii=function(){t(this,At)&&(clearTimeout(t(this,At)),gt(this,At,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){pt(this,Rt,new Set);pt(this,G,Promise.resolve())}postMessage(l,c){const N={data:structuredClone(l,c?{transfer:c}:null)};t(this,G).then(()=>{for(const o of t(this,Rt))o.call(this,N)})}addEventListener(l,c){t(this,Rt).add(c)}removeEventListener(l,c){t(this,Rt).delete(c)}terminate(){t(this,Rt).clear()}}Rt=new WeakMap,G=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const a=(O=document==null?void 0:document.currentScript)==null?void 0:O.src;a&&(PDFWorkerUtil.fallbackWorkerSrc=a.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(a,l){let c;try{if(c=new URL(a),!c.origin||c.origin==="null")return!1}catch{return!1}const N=new URL(l,c);return c.origin===N.origin},PDFWorkerUtil.createCDNWrapper=function(a){const l=`importScripts("${a}");`;return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class _PDFWorker{constructor({name:a=null,port:l=null,verbosity:c=(0,_util.getVerbosityLevel)()}={}){var N;if(this.name=a,this.destroyed=!1,this.verbosity=c,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,l){if((N=t(_PDFWorker,f))!=null&&N.has(l))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,f)||gt(_PDFWorker,f,new WeakMap)).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(a){this._port=a,this._messageHandler=new _message_handler.MessageHandler("main","worker",a),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:a}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,a)||(a=PDFWorkerUtil.createCDNWrapper(new URL(a,window.location).href));const l=new Worker(a),c=new _message_handler.MessageHandler("main","worker",l),N=()=>{l.removeEventListener("error",o),c.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=>{this._webWorker||N()};l.addEventListener("error",o),c.on("test",D=>{if(l.removeEventListener("error",o),this.destroyed){N();return}D?(this._messageHandler=c,this._port=l,this._webWorker=l,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),c.destroy(),l.terminate())}),c.on("ready",D=>{if(l.removeEventListener("error",o),this.destroyed){N();return}try{E()}catch{this._setupFakeWorker()}});const E=()=>{const D=new Uint8Array;c.send("test",D,[D.buffer])};E();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(a=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const c=`fake${PDFWorkerUtil.fakeWorkerId++}`,N=new _message_handler.MessageHandler(c+"_worker",c,l);a.setup(N,l);const o=new _message_handler.MessageHandler(c,c+"_worker",l);this._messageHandler=o,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})}).catch(a=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${a.message}".`))})}destroy(){var a;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(a=t(_PDFWorker,f))==null||a.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(a){var c;if(!(a!=null&&a.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const l=(c=t(this,f))==null?void 0:c.get(a.port);if(l){if(l._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return l}return new _PDFWorker(a)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var a;try{return((a=globalThis.pdfjsWorker)==null?void 0:a.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};f=new WeakMap,pt(_PDFWorker,f);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(l,c,N,o,E){pt(this,k);pt(this,W,new Map);pt(this,j,new Map);pt(this,y,new Map);pt(this,b,null);this.messageHandler=l,this.loadingTask=c,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this._params=o,this.canvasFactory=E.canvasFactory,this.filterFactory=E.filterFactory,this.cMapReaderFactory=E.cMapReaderFactory,this.standardFontDataFactory=E.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=N,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(l,c=_util.AnnotationMode.ENABLE,N=null,o=!1){let E=_util.RenderingIntentFlag.DISPLAY,D=_annotation_storage.SerializableEmpty;switch(l){case"any":E=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":E=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(c){case _util.AnnotationMode.DISABLE:E+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:E+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:E+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,D=(E&_util.RenderingIntentFlag.PRINT&&N instanceof _annotation_storage.PrintAnnotationStorage?N:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${c}`)}return o&&(E+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:E,cacheKey:`${E}_${D.hash}`,annotationStorageSerializable:D}}destroy(){var N;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(N=t(this,b))==null||N.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const o of t(this,j).values())l.push(o._destroy());t(this,j).clear(),t(this,y).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const c=this.messageHandler.sendWithPromise("Terminate",null);return l.push(c),Promise.all(l).then(()=>{var o;this.commonObjs.clear(),this.fontLoader.clear(),t(this,W).clear(),this.filterFactory.destroy(),(o=this._networkStream)==null||o.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:c}=this;l.on("GetReader",(N,o)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=E=>{this._lastProgress={loaded:E.loaded,total:E.total}},o.onPull=()=>{this._fullReader.read().then(function({value:E,done:D}){if(D){o.close();return}(0,_util.assert)(E instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(E),1,[E])}).catch(E=>{o.error(E)})},o.onCancel=E=>{this._fullReader.cancel(E),o.ready.catch(D=>{if(!this.destroyed)throw D})}}),l.on("ReaderHeadersReady",N=>{const o=new _util.PromiseCapability,E=this._fullReader;return E.headersReady.then(()=>{var D;(!E.isStreamingSupported||!E.isRangeSupported)&&(this._lastProgress&&((D=c.onProgress)==null||D.call(c,this._lastProgress)),E.onProgress=vt=>{var Y;(Y=c.onProgress)==null||Y.call(c,{loaded:vt.loaded,total:vt.total})}),o.resolve({isStreamingSupported:E.isStreamingSupported,isRangeSupported:E.isRangeSupported,contentLength:E.contentLength})},o.reject),o.promise}),l.on("GetRangeReader",(N,o)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const E=this._networkStream.getRangeReader(N.begin,N.end);if(!E){o.close();return}o.onPull=()=>{E.read().then(function({value:D,done:vt}){if(vt){o.close();return}(0,_util.assert)(D instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(D),1,[D])}).catch(D=>{o.error(D)})},o.onCancel=D=>{E.cancel(D),o.ready.catch(vt=>{if(!this.destroyed)throw vt})}}),l.on("GetDoc",({pdfInfo:N})=>{this._numPages=N.numPages,this._htmlForXfa=N.htmlForXfa,delete N.htmlForXfa,c._capability.resolve(new PDFDocumentProxy(N,this))}),l.on("DocException",function(N){let o;switch(N.name){case"PasswordException":o=new _util.PasswordException(N.message,N.code);break;case"InvalidPDFException":o=new _util.InvalidPDFException(N.message);break;case"MissingPDFException":o=new _util.MissingPDFException(N.message);break;case"UnexpectedResponseException":o=new _util.UnexpectedResponseException(N.message,N.status);break;case"UnknownErrorException":o=new _util.UnknownErrorException(N.message,N.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}c._capability.reject(o)}),l.on("PasswordRequest",N=>{if(gt(this,b,new _util.PromiseCapability),c.onPassword){const o=E=>{E instanceof Error?t(this,b).reject(E):t(this,b).resolve({password:E})};try{c.onPassword(o,N.code)}catch(E){t(this,b).reject(E)}}else t(this,b).reject(new _util.PasswordException(N.message,N.code));return t(this,b).promise}),l.on("DataLoaded",N=>{var o;(o=c.onProgress)==null||o.call(c,{loaded:N.length,total:N.length}),this.downloadInfoCapability.resolve(N)}),l.on("StartRenderPage",N=>{if(this.destroyed)return;t(this,j).get(N.pageIndex)._startRenderPage(N.transparency,N.cacheKey)}),l.on("commonobj",([N,o,E])=>{var D;if(!this.destroyed&&!this.commonObjs.has(N))switch(o){case"Font":const vt=this._params;if("error"in E){const q=E.error;(0,_util.warn)(`Error during font loading: ${q}`),this.commonObjs.resolve(N,q);break}const Y=vt.pdfBug&&((D=globalThis.FontInspector)!=null&&D.enabled)?(q,bt)=>globalThis.FontInspector.fontAdded(q,bt):null,it=new _font_loader.FontFaceObject(E,{isEvalSupported:vt.isEvalSupported,disableFontFace:vt.disableFontFace,ignoreErrors:vt.ignoreErrors,inspectFont:Y});this.fontLoader.bind(it).catch(q=>l.sendWithPromise("FontFallback",{id:N})).finally(()=>{!vt.fontExtraProperties&&it.data&&(it.data=null),this.commonObjs.resolve(N,it)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(N,E);break;default:throw new Error(`Got unknown common object type ${o}`)}}),l.on("obj",([N,o,E,D])=>{var Y;if(this.destroyed)return;const vt=t(this,j).get(o);if(!vt.objs.has(N))switch(E){case"Image":if(vt.objs.resolve(N,D),D){let it;if(D.bitmap){const{width:q,height:bt}=D;it=q*bt*4}else it=((Y=D.data)==null?void 0:Y.length)||0;it>_util.MAX_IMAGE_SIZE_TO_CACHE&&(vt._maybeCleanupAfterRender=!0)}break;case"Pattern":vt.objs.resolve(N,D);break;default:throw new Error(`Got unknown object type ${E}`)}}),l.on("DocProgress",N=>{var o;this.destroyed||(o=c.onProgress)==null||o.call(c,{loaded:N.loaded,total:N.total})}),l.on("FetchBuiltInCMap",N=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(N):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",N=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(N):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var N;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:l,transfers:c}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:l,filename:((N=this._fullReader)==null?void 0:N.filename)??null},c).finally(()=>{this.annotationStorage.resetModified()})}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const c=l-1,N=t(this,y).get(c);if(N)return N;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(E=>{if(this.destroyed)throw new Error("Transport destroyed");const D=new PDFPageProxy(c,E,this,this._params.pdfBug);return t(this,j).set(c,D),D});return t(this,y).set(c,o),o}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,c){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:c})}getFieldObjects(){return Q(this,k,ri).call(this,"GetFieldObjects")}hasJSActions(){return Q(this,k,ri).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Q(this,k,ri).call(this,"GetDocJSActions")}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const l="GetMetadata",c=t(this,W).get(l);if(c)return c;const N=this.messageHandler.sendWithPromise(l,null).then(o=>{var E,D;return{info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:((E=this._fullReader)==null?void 0:E.filename)??null,contentLength:((D=this._fullReader)==null?void 0:D.contentLength)??null}});return t(this,W).set(l,N),N}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const c of t(this,j).values())if(!c.cleanup())throw new Error(`startCleanup: Page ${c.pageNumber} is currently rendering.`);this.commonObjs.clear(),l||this.fontLoader.clear(),t(this,W).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:l,enableXfa:c}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l,enableXfa:c})}}W=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,k=new WeakSet,ri=function(l,c=null){const N=t(this,W).get(l);if(N)return N;const o=this.messageHandler.sendWithPromise(l,c);return t(this,W).set(l,o),o};class PDFObjects{constructor(){pt(this,S);pt(this,g,Object.create(null))}get(l,c=null){if(c){const o=Q(this,S,Mi).call(this,l);return o.capability.promise.then(()=>c(o.data)),null}const N=t(this,g)[l];if(!(N!=null&&N.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${l}.`);return N.data}has(l){const c=t(this,g)[l];return(c==null?void 0:c.capability.settled)||!1}resolve(l,c=null){const N=Q(this,S,Mi).call(this,l);N.data=c,N.capability.resolve()}clear(){var l;for(const c in t(this,g)){const{data:N}=t(this,g)[c];(l=N==null?void 0:N.bitmap)==null||l.close()}gt(this,g,Object.create(null))}}g=new WeakMap,S=new WeakSet,Mi=function(l){var c;return(c=t(this,g))[l]||(c[l]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(l){pt(this,w,null);gt(this,w,l),this.onContinue=null}get promise(){return t(this,w).capability.promise}cancel(l=0){t(this,w).cancel(null,l)}get separateAnnots(){const{separateAnnots:l}=t(this,w).operatorList;if(!l)return!1;const{annotationCanvasMap:c}=t(this,w);return l.form||l.canvas&&(c==null?void 0:c.size)>0}}w=new WeakMap,exports.RenderTask=RenderTask;const u=class u{constructor({callback:l,params:c,objs:N,commonObjs:o,annotationCanvasMap:E,operatorList:D,pageIndex:vt,canvasFactory:Y,filterFactory:it,useRequestAnimationFrame:q=!1,pdfBug:bt=!1,pageColors:M=null}){this.callback=l,this.params=c,this.objs=N,this.commonObjs=o,this.annotationCanvasMap=E,this.operatorListIdx=null,this.operatorList=D,this._pageIndex=vt,this.canvasFactory=Y,this.filterFactory=it,this._pdfBug=bt,this.pageColors=M,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=q===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=c.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:c}){var vt,Y;if(this.cancelled)return;if(this._canvas){if(t(u,s).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(u,s).add(this._canvas)}this._pdfBug&&((vt=globalThis.StepperManager)!=null&&vt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:N,viewport:o,transform:E,background:D}=this.params;this.gfx=new _canvas.CanvasGraphics(N,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:c},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:E,viewport:o,transparency:l,background:D}),this.operatorListIdx=0,this.graphicsReady=!0,(Y=this.graphicsReadyCallback)==null||Y.call(this)}cancel(l=null,c=0){var N;this.running=!1,this.cancelled=!0,(N=this.gfx)==null||N.endDrawing(),t(u,s).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,c))}operatorListChanged(){var l;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(l=this.stepper)==null||l.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(u,s).delete(this._canvas),this.callback())))}};s=new WeakMap,pt(u,s,new WeakSet);let InternalRenderTask=u;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(h,v,At)=>{var O,f,W,Rr,y;Object.defineProperty(v,"__esModule",{value:!0}),v.SerializableEmpty=v.PrintAnnotationStorage=v.AnnotationStorage=void 0;var d=At(1),T=At(4),e=At(8);const tt=Object.freeze({map:null,hash:"",transfers:void 0});v.SerializableEmpty=tt;class Rt{constructor(){pt(this,W);pt(this,O,!1);pt(this,f,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(k,_){const g=t(this,f).get(k);return g===void 0?_:Object.assign(_,g)}getRawValue(k){return t(this,f).get(k)}remove(k){if(t(this,f).delete(k),t(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const _ of t(this,f).values())if(_ instanceof T.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(k,_){const g=t(this,f).get(k);let S=!1;if(g!==void 0)for(const[B,w]of Object.entries(_))g[B]!==w&&(S=!0,g[B]=w);else S=!0,t(this,f).set(k,_);S&&Q(this,W,Rr).call(this),_ instanceof T.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(_.constructor._type)}has(k){return t(this,f).has(k)}getAll(){return t(this,f).size>0?(0,d.objectFromMap)(t(this,f)):null}setAll(k){for(const[_,g]of Object.entries(k))this.setValue(_,g)}get size(){return t(this,f).size}resetModified(){t(this,O)&&(gt(this,O,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new G(this)}get serializable(){if(t(this,f).size===0)return tt;const k=new Map,_=new e.MurmurHash3_64,g=[],S=Object.create(null);let B=!1;for(const[w,s]of t(this,f)){const u=s instanceof T.AnnotationEditor?s.serialize(!1,S):s;u&&(k.set(w,u),_.update(`${w}:${JSON.stringify(u)}`),B||(B=!!u.bitmap))}if(B)for(const w of k.values())w.bitmap&&g.push(w.bitmap);return k.size>0?{map:k,hash:_.hexdigest(),transfers:g}:tt}}O=new WeakMap,f=new WeakMap,W=new WeakSet,Rr=function(){t(this,O)||(gt(this,O,!0),typeof this.onSetModified=="function"&&this.onSetModified())},v.AnnotationStorage=Rt;class G extends Rt{constructor(_){super();pt(this,y);const{map:g,hash:S,transfers:B}=_.serializable,w=structuredClone(g,B?{transfer:B}:null);gt(this,y,{map:w,hash:S,transfers:B})}get print(){(0,d.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,y)}}y=new WeakMap,v.PrintAnnotationStorage=G},(h,v,At)=>{var G,O,f,W,j,y,b,k,_,g,S,B,w,s,u,xi,Fi,c,Li,Di,Mr,xr,Fr,Ii,Lr;Object.defineProperty(v,"__esModule",{value:!0}),v.AnnotationEditor=void 0;var d=At(5),T=At(1),e=At(6);const q=class q{constructor(M){pt(this,u);pt(this,G,"");pt(this,O,!1);pt(this,f,null);pt(this,W,null);pt(this,j,null);pt(this,y,!1);pt(this,b,null);pt(this,k,this.focusin.bind(this));pt(this,_,this.focusout.bind(this));pt(this,g,!1);pt(this,S,!1);pt(this,B,!1);qe(this,"_initialOptions",Object.create(null));qe(this,"_uiManager",null);qe(this,"_focusEventsAllowed",!0);qe(this,"_l10nPromise",null);pt(this,w,!1);pt(this,s,q._zIndex++);this.constructor===q&&(0,T.unreachable)("Cannot initialize AnnotationEditor."),this.parent=M.parent,this.id=M.id,this.width=this.height=null,this.pageIndex=M.parent.pageIndex,this.name=M.name,this.div=null,this._uiManager=M.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=M.isCentered,this._structTreeParentId=null;const{rotation:X,rawDims:{pageWidth:lt,pageHeight:P,pageX:i,pageY:r}}=this.parent.viewport;this.rotation=X,this.pageRotation=(360+X-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[lt,P],this.pageTranslation=[i,r];const[m,F]=this.parentDimensions;this.x=M.x/m,this.y=M.y/F,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,T.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(M){const X=new Rt({id:M.parent.getNextId(),parent:M.parent,uiManager:M._uiManager});X.annotationElementId=M.annotationElementId,X.deleted=!0,X._uiManager.addToAnnotationStorage(X)}static initialize(M,X=null){if(q._l10nPromise||(q._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(P=>[P,M.get(P)]))),X!=null&&X.strings)for(const P of X.strings)q._l10nPromise.set(P,M.get(P));if(q._borderLineWidth!==-1)return;const lt=getComputedStyle(document.documentElement);q._borderLineWidth=parseFloat(lt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(M,X){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(M){return!1}static paste(M,X){(0,T.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,w)}set _isDraggable(M){var X;gt(this,w,M),(X=this.div)==null||X.classList.toggle("draggable",M)}center(){const[M,X]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*X/(M*2),this.y+=this.width*M/(X*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*X/(M*2),this.y-=this.width*M/(X*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(M){this._uiManager.addCommands(M)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,s)}setParent(M){M!==null&&(this.pageIndex=M.pageIndex,this.pageDimensions=M.pageDimensions),this.parent=M}focusin(M){this._focusEventsAllowed&&(t(this,g)?gt(this,g,!1):this.parent.setSelected(this))}focusout(M){var lt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const X=M.relatedTarget;X!=null&&X.closest(`#${this.id}`)||(M.preventDefault(),(lt=this.parent)!=null&&lt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(M,X,lt,P){const[i,r]=this.parentDimensions;[lt,P]=this.screenToPageTranslation(lt,P),this.x=(M+lt)/i,this.y=(X+P)/r,this.fixAndSetPosition()}translate(M,X){Q(this,u,xi).call(this,this.parentDimensions,M,X)}translateInPage(M,X){Q(this,u,xi).call(this,this.pageDimensions,M,X),this.div.scrollIntoView({block:"nearest"})}drag(M,X){const[lt,P]=this.parentDimensions;if(this.x+=M/lt,this.y+=X/P,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:L,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,L,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:r}=this;const[m,F]=Q(this,u,Fi).call(this);i+=m,r+=F,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[M,X]=this.pageDimensions;let{x:lt,y:P,width:i,height:r}=this;switch(i*=M,r*=X,lt*=M,P*=X,this.rotation){case 0:lt=Math.max(0,Math.min(M-i,lt)),P=Math.max(0,Math.min(X-r,P));break;case 90:lt=Math.max(0,Math.min(M-r,lt)),P=Math.min(X,Math.max(i,P));break;case 180:lt=Math.min(M,Math.max(i,lt)),P=Math.min(X,Math.max(r,P));break;case 270:lt=Math.min(M,Math.max(r,lt)),P=Math.max(0,Math.min(X-i,P));break}this.x=lt/=M,this.y=P/=X;const[m,F]=Q(this,u,Fi).call(this);lt+=m,P+=F;const{style:L}=this.div;L.left=`${(100*lt).toFixed(2)}%`,L.top=`${(100*P).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(M,X){var lt;return Q(lt=q,c,Li).call(lt,M,X,this.parentRotation)}pageTranslationToScreen(M,X){var lt;return Q(lt=q,c,Li).call(lt,M,X,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:M,pageDimensions:[X,lt]}=this,P=X*M,i=lt*M;return T.FeatureTest.isCSSRoundSupported?[Math.round(P),Math.round(i)]:[P,i]}setDims(M,X){var i;const[lt,P]=this.parentDimensions;this.div.style.width=`${(100*M/lt).toFixed(2)}%`,t(this,y)||(this.div.style.height=`${(100*X/P).toFixed(2)}%`),(i=t(this,f))==null||i.classList.toggle("small",M<q.SMALL_EDITOR_SIZE||X<q.SMALL_EDITOR_SIZE)}fixDims(){const{style:M}=this.div,{height:X,width:lt}=M,P=lt.endsWith("%"),i=!t(this,y)&&X.endsWith("%");if(P&&i)return;const[r,m]=this.parentDimensions;P||(M.width=`${(100*parseFloat(lt)/r).toFixed(2)}%`),!t(this,y)&&!i&&(M.height=`${(100*parseFloat(X)/m).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,f))return;const M=gt(this,f,document.createElement("button"));M.className="altText";const X=await q._l10nPromise.get("editor_alt_text_button_label");M.textContent=X,M.setAttribute("aria-label",X),M.tabIndex="0",M.addEventListener("contextmenu",e.noContextMenu),M.addEventListener("pointerdown",lt=>lt.stopPropagation()),M.addEventListener("click",lt=>{lt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),M.addEventListener("keydown",lt=>{lt.target===M&&lt.key==="Enter"&&(lt.preventDefault(),this._uiManager.editAltText(this))}),Q(this,u,Ii).call(this),this.div.append(M),q.SMALL_EDITOR_SIZE||(q.SMALL_EDITOR_SIZE=Math.min(128,Math.round(M.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,G),decorative:t(this,O)}}set altTextData({altText:M,decorative:X}){t(this,G)===M&&t(this,O)===X||(gt(this,G,M),gt(this,O,X),Q(this,u,Ii).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,k)),this.div.addEventListener("focusout",t(this,_));const[M,X]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*X/M).toFixed(2)}%`,this.div.style.maxHeight=`${(100*M/X).toFixed(2)}%`);const[lt,P]=this.getInitialTranslation();return this.translate(lt,P),(0,d.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(M){const{isMac:X}=T.FeatureTest.platform;if(M.button!==0||M.ctrlKey&&X){M.preventDefault();return}gt(this,g,!0),Q(this,u,Lr).call(this,M)}moveInDOM(){var M;(M=this.parent)==null||M.moveEditorInDOM(this)}_setParentAndPosition(M,X,lt){M.changeParent(this),this.x=X,this.y=lt,this.fixAndSetPosition()}getRect(M,X){const lt=this.parentScale,[P,i]=this.pageDimensions,[r,m]=this.pageTranslation,F=M/lt,L=X/lt,x=this.x*P,Z=this.y*i,mt=this.width*P,St=this.height*i;switch(this.rotation){case 0:return[x+F+r,i-Z-L-St+m,x+F+mt+r,i-Z-L+m];case 90:return[x+L+r,i-Z+F+m,x+L+St+r,i-Z+F+mt+m];case 180:return[x-F-mt+r,i-Z+L+m,x-F+r,i-Z+L+St+m];case 270:return[x-L-St+r,i-Z-F-mt+m,x-L+r,i-Z-F+m];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(M,X){const[lt,P,i,r]=M,m=i-lt,F=r-P;switch(this.rotation){case 0:return[lt,X-r,m,F];case 90:return[lt,X-P,F,m];case 180:return[i,X-P,m,F];case 270:return[i,X-r,F,m];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){gt(this,B,!0)}disableEditMode(){gt(this,B,!1)}isInEditMode(){return t(this,B)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var M,X;(M=this.div)==null||M.addEventListener("focusin",t(this,k)),(X=this.div)==null||X.addEventListener("focusout",t(this,_))}serialize(M=!1,X=null){(0,T.unreachable)("An editor must be serializable")}static deserialize(M,X,lt){const P=new this.prototype.constructor({parent:X,id:X.getNextId(),uiManager:lt});P.rotation=M.rotation;const[i,r]=P.pageDimensions,[m,F,L,x]=P.getRectInCurrentCoords(M.rect,r);return P.x=m/i,P.y=F/r,P.width=L/i,P.height=x/r,P}remove(){var M;this.div.removeEventListener("focusin",t(this,k)),this.div.removeEventListener("focusout",t(this,_)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(M=t(this,f))==null||M.remove(),gt(this,f,null),gt(this,W,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Q(this,u,Mr).call(this),t(this,b).classList.remove("hidden"))}select(){var M;this.makeResizable(),(M=this.div)==null||M.classList.add("selectedEditor")}unselect(){var M,X,lt;(M=t(this,b))==null||M.classList.add("hidden"),(X=this.div)==null||X.classList.remove("selectedEditor"),(lt=this.div)!=null&&lt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(M,X){}disableEditing(){t(this,f)&&(t(this,f).hidden=!0)}enableEditing(){t(this,f)&&(t(this,f).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,S)}set isEditing(M){gt(this,S,M),this.parent&&(M?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(M,X){gt(this,y,!0);const lt=M/X,{style:P}=this.div;P.aspectRatio=lt,P.height="auto"}static get MIN_SIZE(){return 16}};G=new WeakMap,O=new WeakMap,f=new WeakMap,W=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,k=new WeakMap,_=new WeakMap,g=new WeakMap,S=new WeakMap,B=new WeakMap,w=new WeakMap,s=new WeakMap,u=new WeakSet,xi=function([M,X],lt,P){[lt,P]=this.screenToPageTranslation(lt,P),this.x+=lt/M,this.y+=P/X,this.fixAndSetPosition()},Fi=function(){const[M,X]=this.parentDimensions,{_borderLineWidth:lt}=q,P=lt/M,i=lt/X;switch(this.rotation){case 90:return[-P,i];case 180:return[P,i];case 270:return[P,-i];default:return[-P,-i]}},c=new WeakSet,Li=function(M,X,lt){switch(lt){case 90:return[X,-M];case 180:return[-M,-X];case 270:return[-X,M];default:return[M,X]}},Di=function(M){switch(M){case 90:{const[X,lt]=this.pageDimensions;return[0,-X/lt,lt/X,0]}case 180:return[-1,0,0,-1];case 270:{const[X,lt]=this.pageDimensions;return[0,X/lt,-lt/X,0]}default:return[1,0,0,1]}},Mr=function(){if(t(this,b))return;gt(this,b,document.createElement("div")),t(this,b).classList.add("resizers");const M=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||M.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const X of M){const lt=document.createElement("div");t(this,b).append(lt),lt.classList.add("resizer",X),lt.addEventListener("pointerdown",Q(this,u,xr).bind(this,X)),lt.addEventListener("contextmenu",e.noContextMenu)}this.div.prepend(t(this,b))},xr=function(M,X){X.preventDefault();const{isMac:lt}=T.FeatureTest.platform;if(X.button!==0||X.ctrlKey&&lt)return;const P=Q(this,u,Fr).bind(this,M),i=this._isDraggable;this._isDraggable=!1;const r={passive:!0,capture:!0};window.addEventListener("pointermove",P,r);const m=this.x,F=this.y,L=this.width,x=this.height,Z=this.parent.div.style.cursor,mt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(X.target).cursor;const St=()=>{this._isDraggable=i,window.removeEventListener("pointerup",St),window.removeEventListener("blur",St),window.removeEventListener("pointermove",P,r),this.parent.div.style.cursor=Z,this.div.style.cursor=mt;const Et=this.x,Pt=this.y,xt=this.width,Ft=this.height;Et===m&&Pt===F&&xt===L&&Ft===x||this.addCommands({cmd:()=>{this.width=xt,this.height=Ft,this.x=Et,this.y=Pt;const[ct,ut]=this.parentDimensions;this.setDims(ct*xt,ut*Ft),this.fixAndSetPosition()},undo:()=>{this.width=L,this.height=x,this.x=m,this.y=F;const[ct,ut]=this.parentDimensions;this.setDims(ct*L,ut*x),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",St),window.addEventListener("blur",St)},Fr=function(M,X){const[lt,P]=this.parentDimensions,i=this.x,r=this.y,m=this.width,F=this.height,L=q.MIN_SIZE/lt,x=q.MIN_SIZE/P,Z=$t=>Math.round($t*1e4)/1e4,mt=Q(this,u,Di).call(this,this.rotation),St=($t,ie)=>[mt[0]*$t+mt[2]*ie,mt[1]*$t+mt[3]*ie],Et=Q(this,u,Di).call(this,360-this.rotation),Pt=($t,ie)=>[Et[0]*$t+Et[2]*ie,Et[1]*$t+Et[3]*ie];let xt,Ft,ct=!1,ut=!1;switch(M){case"topLeft":ct=!0,xt=($t,ie)=>[0,0],Ft=($t,ie)=>[$t,ie];break;case"topMiddle":xt=($t,ie)=>[$t/2,0],Ft=($t,ie)=>[$t/2,ie];break;case"topRight":ct=!0,xt=($t,ie)=>[$t,0],Ft=($t,ie)=>[0,ie];break;case"middleRight":ut=!0,xt=($t,ie)=>[$t,ie/2],Ft=($t,ie)=>[0,ie/2];break;case"bottomRight":ct=!0,xt=($t,ie)=>[$t,ie],Ft=($t,ie)=>[0,0];break;case"bottomMiddle":xt=($t,ie)=>[$t/2,ie],Ft=($t,ie)=>[$t/2,0];break;case"bottomLeft":ct=!0,xt=($t,ie)=>[0,ie],Ft=($t,ie)=>[$t,0];break;case"middleLeft":ut=!0,xt=($t,ie)=>[0,ie/2],Ft=($t,ie)=>[$t,ie/2];break}const A=xt(m,F),I=Ft(m,F);let nt=St(...I);const dt=Z(i+nt[0]),wt=Z(r+nt[1]);let Lt=1,kt=1,[et,Wt]=this.screenToPageTranslation(X.movementX,X.movementY);if([et,Wt]=Pt(et/lt,Wt/P),ct){const $t=Math.hypot(m,F);Lt=kt=Math.max(Math.min(Math.hypot(I[0]-A[0]-et,I[1]-A[1]-Wt)/$t,1/m,1/F),L/m,x/F)}else ut?Lt=Math.max(L,Math.min(1,Math.abs(I[0]-A[0]-et)))/m:kt=Math.max(x,Math.min(1,Math.abs(I[1]-A[1]-Wt)))/F;const Bt=Z(m*Lt),ge=Z(F*kt);nt=St(...Ft(Bt,ge));const le=dt-nt[0],Pe=wt-nt[1];this.width=Bt,this.height=ge,this.x=le,this.y=Pe,this.setDims(lt*Bt,P*ge),this.fixAndSetPosition()},Ii=async function(){var lt;const M=t(this,f);if(!M)return;if(!t(this,G)&&!t(this,O)){M.classList.remove("done"),(lt=t(this,W))==null||lt.remove();return}q._l10nPromise.get("editor_alt_text_edit_button_label").then(P=>{M.setAttribute("aria-label",P)});let X=t(this,W);if(!X){gt(this,W,X=document.createElement("span")),X.className="tooltip",X.setAttribute("role","tooltip");const P=X.id=`alt-text-tooltip-${this.id}`;M.setAttribute("aria-describedby",P);const i=100;M.addEventListener("mouseenter",()=>{gt(this,j,setTimeout(()=>{gt(this,j,null),t(this,W).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},i))}),M.addEventListener("mouseleave",()=>{var r;clearTimeout(t(this,j)),gt(this,j,null),(r=t(this,W))==null||r.classList.remove("show")})}M.classList.add("done"),X.innerText=t(this,O)?await q._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,G),X.parentNode||M.append(X)},Lr=function(M){if(!this._isDraggable)return;const X=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let lt,P;X&&(lt={passive:!0,capture:!0},P=r=>{const[m,F]=this.screenToPageTranslation(r.movementX,r.movementY);this._uiManager.dragSelectedEditors(m,F)},window.addEventListener("pointermove",P,lt));const i=()=>{if(window.removeEventListener("pointerup",i),window.removeEventListener("blur",i),X&&window.removeEventListener("pointermove",P,lt),gt(this,g,!1),!this._uiManager.endDragSession()){const{isMac:r}=T.FeatureTest.platform;M.ctrlKey&&!r||M.shiftKey||M.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",i),window.addEventListener("blur",i)},pt(q,c),qe(q,"_borderLineWidth",-1),qe(q,"_colorManager",new d.ColorManager),qe(q,"_zIndex",1),qe(q,"SMALL_EDITOR_SIZE",0);let tt=q;v.AnnotationEditor=tt;class Rt extends tt{constructor(M){super(M),this.annotationElementId=M.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(h,v,At)=>{var y,b,k,_,g,Oi,w,s,u,a,l,Dr,o,E,D,vt,Y,it,q,bt,M,X,lt,P,i,r,m,F,L,x,Z,mt,St,Et,Pt,xt,Ft,ct,ut,A,I,nt,dt,wt,Lt,kt,et,Ir,Ni,Bi,si,Hi,Ui,gn,Wn,Or,Nr,ji,zn,Wi;Object.defineProperty(v,"__esModule",{value:!0}),v.KeyboardManager=v.CommandManager=v.ColorManager=v.AnnotationEditorUIManager=void 0,v.bindEvents=e,v.opacityToHex=tt;var d=At(1),T=At(6);function e(oe,H,Ct){for(const jt of Ct)H.addEventListener(jt,oe[jt].bind(oe))}function tt(oe){return Math.round(Math.min(255,Math.max(1,255*oe))).toString(16).padStart(2,"0")}class Rt{constructor(){pt(this,y,0)}getId(){return`${d.AnnotationEditorPrefix}${jn(this,y)._++}`}}y=new WeakMap;const B=class B{constructor(){pt(this,g);pt(this,b,(0,d.getUuid)());pt(this,k,0);pt(this,_,null)}static get _isSVGFittingCanvas(){const H='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',jt=new OffscreenCanvas(1,3).getContext("2d"),Zt=new Image;Zt.src=H;const ee=Zt.decode().then(()=>(jt.drawImage(Zt,0,0,1,1,0,0,1,3),new Uint32Array(jt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,d.shadow)(this,"_isSVGFittingCanvas",ee)}async getFromFile(H){const{lastModified:Ct,name:jt,size:Zt,type:ee}=H;return Q(this,g,Oi).call(this,`${Ct}_${jt}_${Zt}_${ee}`,H)}async getFromUrl(H){return Q(this,g,Oi).call(this,H,H)}async getFromId(H){t(this,_)||gt(this,_,new Map);const Ct=t(this,_).get(H);return Ct?Ct.bitmap?(Ct.refCounter+=1,Ct):Ct.file?this.getFromFile(Ct.file):this.getFromUrl(Ct.url):null}getSvgUrl(H){const Ct=t(this,_).get(H);return Ct!=null&&Ct.isSvg?Ct.svgUrl:null}deleteId(H){t(this,_)||gt(this,_,new Map);const Ct=t(this,_).get(H);Ct&&(Ct.refCounter-=1,Ct.refCounter===0&&(Ct.bitmap=null))}isValidId(H){return H.startsWith(`image_${t(this,b)}_`)}};b=new WeakMap,k=new WeakMap,_=new WeakMap,g=new WeakSet,Oi=async function(H,Ct){t(this,_)||gt(this,_,new Map);let jt=t(this,_).get(H);if(jt===null)return null;if(jt!=null&&jt.bitmap)return jt.refCounter+=1,jt;try{jt||(jt={bitmap:null,id:`image_${t(this,b)}_${jn(this,k)._++}`,refCounter:0,isSvg:!1});let Zt;if(typeof Ct=="string"){jt.url=Ct;const ee=await fetch(Ct);if(!ee.ok)throw new Error(ee.statusText);Zt=await ee.blob()}else Zt=jt.file=Ct;if(Zt.type==="image/svg+xml"){const ee=B._isSVGFittingCanvas,qt=new FileReader,R=new Image,C=new Promise((K,_t)=>{R.onload=()=>{jt.bitmap=R,jt.isSvg=!0,K()},qt.onload=async()=>{const yt=jt.svgUrl=qt.result;R.src=await ee?`${yt}#svgView(preserveAspectRatio(none))`:yt},R.onerror=qt.onerror=_t});qt.readAsDataURL(Zt),await C}else jt.bitmap=await createImageBitmap(Zt);jt.refCounter=1}catch(Zt){console.error(Zt),jt=null}return t(this,_).set(H,jt),jt&&t(this,_).set(jt.id,jt),jt};let G=B;class O{constructor(H=128){pt(this,w,[]);pt(this,s,!1);pt(this,u);pt(this,a,-1);gt(this,u,H)}add({cmd:H,undo:Ct,mustExec:jt,type:Zt=NaN,overwriteIfSameType:ee=!1,keepUndo:qt=!1}){if(jt&&H(),t(this,s))return;const R={cmd:H,undo:Ct,type:Zt};if(t(this,a)===-1){t(this,w).length>0&&(t(this,w).length=0),gt(this,a,0),t(this,w).push(R);return}if(ee&&t(this,w)[t(this,a)].type===Zt){qt&&(R.undo=t(this,w)[t(this,a)].undo),t(this,w)[t(this,a)]=R;return}const C=t(this,a)+1;C===t(this,u)?t(this,w).splice(0,1):(gt(this,a,C),C<t(this,w).length&&t(this,w).splice(C)),t(this,w).push(R)}undo(){t(this,a)!==-1&&(gt(this,s,!0),t(this,w)[t(this,a)].undo(),gt(this,s,!1),gt(this,a,t(this,a)-1))}redo(){t(this,a)<t(this,w).length-1&&(gt(this,a,t(this,a)+1),gt(this,s,!0),t(this,w)[t(this,a)].cmd(),gt(this,s,!1))}hasSomethingToUndo(){return t(this,a)!==-1}hasSomethingToRedo(){return t(this,a)<t(this,w).length-1}destroy(){gt(this,w,null)}}w=new WeakMap,s=new WeakMap,u=new WeakMap,a=new WeakMap,v.CommandManager=O;class f{constructor(H){pt(this,l);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Ct}=d.FeatureTest.platform;for(const[jt,Zt,ee={}]of H)for(const qt of jt){const R=qt.startsWith("mac+");Ct&&R?(this.callbacks.set(qt.slice(4),{callback:Zt,options:ee}),this.allKeys.add(qt.split("+").at(-1))):!Ct&&!R&&(this.callbacks.set(qt,{callback:Zt,options:ee}),this.allKeys.add(qt.split("+").at(-1)))}}exec(H,Ct){if(!this.allKeys.has(Ct.key))return;const jt=this.callbacks.get(Q(this,l,Dr).call(this,Ct));if(!jt)return;const{callback:Zt,options:{bubbles:ee=!1,args:qt=[],checker:R=null}}=jt;R&&!R(H,Ct)||(Zt.bind(H,...qt)(),ee||(Ct.stopPropagation(),Ct.preventDefault()))}}l=new WeakSet,Dr=function(H){H.altKey&&this.buffer.push("alt"),H.ctrlKey&&this.buffer.push("ctrl"),H.metaKey&&this.buffer.push("meta"),H.shiftKey&&this.buffer.push("shift"),this.buffer.push(H.key);const Ct=this.buffer.join("+");return this.buffer.length=0,Ct},v.KeyboardManager=f;const N=class N{get _colors(){const H=new Map([["CanvasText",null],["Canvas",null]]);return(0,T.getColorValues)(H),(0,d.shadow)(this,"_colors",H)}convert(H){const Ct=(0,T.getRGB)(H);if(!window.matchMedia("(forced-colors: active)").matches)return Ct;for(const[jt,Zt]of this._colors)if(Zt.every((ee,qt)=>ee===Ct[qt]))return N._colorsMapping.get(jt);return Ct}getHexCode(H){const Ct=this._colors.get(H);return Ct?d.Util.makeHexColor(...Ct):H}};qe(N,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let W=N;v.ColorManager=W;const Jt=class Jt{constructor(H,Ct,jt,Zt,ee,qt){pt(this,et);pt(this,o,null);pt(this,E,new Map);pt(this,D,new Map);pt(this,vt,null);pt(this,Y,null);pt(this,it,new O);pt(this,q,0);pt(this,bt,new Set);pt(this,M,null);pt(this,X,null);pt(this,lt,new Set);pt(this,P,null);pt(this,i,new Rt);pt(this,r,!1);pt(this,m,!1);pt(this,F,null);pt(this,L,d.AnnotationEditorType.NONE);pt(this,x,new Set);pt(this,Z,null);pt(this,mt,this.blur.bind(this));pt(this,St,this.focus.bind(this));pt(this,Et,this.copy.bind(this));pt(this,Pt,this.cut.bind(this));pt(this,xt,this.paste.bind(this));pt(this,Ft,this.keydown.bind(this));pt(this,ct,this.onEditingAction.bind(this));pt(this,ut,this.onPageChanging.bind(this));pt(this,A,this.onScaleChanging.bind(this));pt(this,I,this.onRotationChanging.bind(this));pt(this,nt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});pt(this,dt,[0,0]);pt(this,wt,null);pt(this,Lt,null);pt(this,kt,null);gt(this,Lt,H),gt(this,kt,Ct),gt(this,vt,jt),this._eventBus=Zt,this._eventBus._on("editingaction",t(this,ct)),this._eventBus._on("pagechanging",t(this,ut)),this._eventBus._on("scalechanging",t(this,A)),this._eventBus._on("rotationchanging",t(this,I)),gt(this,Y,ee.annotationStorage),gt(this,P,ee.filterFactory),gt(this,Z,qt),this.viewParameters={realScale:T.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const H=Jt.prototype,Ct=ee=>{const{activeElement:qt}=document;return qt&&t(ee,Lt).contains(qt)&&ee.hasSomethingToControl()},jt=this.TRANSLATE_SMALL,Zt=this.TRANSLATE_BIG;return(0,d.shadow)(this,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],H.selectAll],[["ctrl+z","mac+meta+z"],H.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],H.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],H.delete],[["Escape","mac+Escape"],H.unselectAll],[["ArrowLeft","mac+ArrowLeft"],H.translateSelectedEditors,{args:[-jt,0],checker:Ct}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],H.translateSelectedEditors,{args:[-Zt,0],checker:Ct}],[["ArrowRight","mac+ArrowRight"],H.translateSelectedEditors,{args:[jt,0],checker:Ct}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],H.translateSelectedEditors,{args:[Zt,0],checker:Ct}],[["ArrowUp","mac+ArrowUp"],H.translateSelectedEditors,{args:[0,-jt],checker:Ct}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],H.translateSelectedEditors,{args:[0,-Zt],checker:Ct}],[["ArrowDown","mac+ArrowDown"],H.translateSelectedEditors,{args:[0,jt],checker:Ct}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],H.translateSelectedEditors,{args:[0,Zt],checker:Ct}]]))}destroy(){Q(this,et,si).call(this),Q(this,et,Ni).call(this),this._eventBus._off("editingaction",t(this,ct)),this._eventBus._off("pagechanging",t(this,ut)),this._eventBus._off("scalechanging",t(this,A)),this._eventBus._off("rotationchanging",t(this,I));for(const H of t(this,D).values())H.destroy();t(this,D).clear(),t(this,E).clear(),t(this,lt).clear(),gt(this,o,null),t(this,x).clear(),t(this,it).destroy(),t(this,vt).destroy()}get hcmFilter(){return(0,d.shadow)(this,"hcmFilter",t(this,Z)?t(this,P).addHCMFilter(t(this,Z).foreground,t(this,Z).background):"none")}get direction(){return(0,d.shadow)(this,"direction",getComputedStyle(t(this,Lt)).direction)}editAltText(H){var Ct;(Ct=t(this,vt))==null||Ct.editAltText(this,H)}onPageChanging({pageNumber:H}){gt(this,q,H-1)}focusMainContainer(){t(this,Lt).focus()}findParent(H,Ct){for(const jt of t(this,D).values()){const{x:Zt,y:ee,width:qt,height:R}=jt.div.getBoundingClientRect();if(H>=Zt&&H<=Zt+qt&&Ct>=ee&&Ct<=ee+R)return jt}return null}disableUserSelect(H=!1){t(this,kt).classList.toggle("noUserSelect",H)}addShouldRescale(H){t(this,lt).add(H)}removeShouldRescale(H){t(this,lt).delete(H)}onScaleChanging({scale:H}){this.commitOrRemove(),this.viewParameters.realScale=H*T.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Ct of t(this,lt))Ct.onScaleChanging()}onRotationChanging({pagesRotation:H}){this.commitOrRemove(),this.viewParameters.rotation=H}addToAnnotationStorage(H){!H.isEmpty()&&t(this,Y)&&!t(this,Y).has(H.id)&&t(this,Y).setValue(H.id,H)}blur(){if(!this.hasSelection)return;const{activeElement:H}=document;for(const Ct of t(this,x))if(Ct.div.contains(H)){gt(this,F,[Ct,H]),Ct._focusEventsAllowed=!1;break}}focus(){if(!t(this,F))return;const[H,Ct]=t(this,F);gt(this,F,null),Ct.addEventListener("focusin",()=>{H._focusEventsAllowed=!0},{once:!0}),Ct.focus()}addEditListeners(){Q(this,et,Bi).call(this),Q(this,et,Hi).call(this)}removeEditListeners(){Q(this,et,si).call(this),Q(this,et,Ui).call(this)}copy(H){var jt;if(H.preventDefault(),(jt=t(this,o))==null||jt.commitOrRemove(),!this.hasSelection)return;const Ct=[];for(const Zt of t(this,x)){const ee=Zt.serialize(!0);ee&&Ct.push(ee)}Ct.length!==0&&H.clipboardData.setData("application/pdfjs",JSON.stringify(Ct))}cut(H){this.copy(H),this.delete()}paste(H){H.preventDefault();const{clipboardData:Ct}=H;for(const ee of Ct.items)for(const qt of t(this,X))if(qt.isHandlingMimeForPasting(ee.type)){qt.paste(ee,this.currentLayer);return}let jt=Ct.getData("application/pdfjs");if(!jt)return;try{jt=JSON.parse(jt)}catch(ee){(0,d.warn)(`paste: "${ee.message}".`);return}if(!Array.isArray(jt))return;this.unselectAll();const Zt=this.currentLayer;try{const ee=[];for(const C of jt){const K=Zt.deserialize(C);if(!K)return;ee.push(K)}const qt=()=>{for(const C of ee)Q(this,et,ji).call(this,C);Q(this,et,Wi).call(this,ee)},R=()=>{for(const C of ee)C.remove()};this.addCommands({cmd:qt,undo:R,mustExec:!0})}catch(ee){(0,d.warn)(`paste: "${ee.message}".`)}}keydown(H){var Ct;(Ct=this.getActive())!=null&&Ct.shouldGetKeyboardEvents()||Jt._keyboardManager.exec(this,H)}onEditingAction(H){["undo","redo","delete","selectAll"].includes(H.name)&&this[H.name]()}setEditingState(H){H?(Q(this,et,Ir).call(this),Q(this,et,Bi).call(this),Q(this,et,Hi).call(this),Q(this,et,gn).call(this,{isEditing:t(this,L)!==d.AnnotationEditorType.NONE,isEmpty:Q(this,et,zn).call(this),hasSomethingToUndo:t(this,it).hasSomethingToUndo(),hasSomethingToRedo:t(this,it).hasSomethingToRedo(),hasSelectedEditor:!1})):(Q(this,et,Ni).call(this),Q(this,et,si).call(this),Q(this,et,Ui).call(this),Q(this,et,gn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(H){if(!t(this,X)){gt(this,X,H);for(const Ct of t(this,X))Q(this,et,Wn).call(this,Ct.defaultPropertiesToUpdate)}}getId(){return t(this,i).getId()}get currentLayer(){return t(this,D).get(t(this,q))}getLayer(H){return t(this,D).get(H)}get currentPageIndex(){return t(this,q)}addLayer(H){t(this,D).set(H.pageIndex,H),t(this,r)?H.enable():H.disable()}removeLayer(H){t(this,D).delete(H.pageIndex)}updateMode(H,Ct=null){if(t(this,L)!==H){if(gt(this,L,H),H===d.AnnotationEditorType.NONE){this.setEditingState(!1),Q(this,et,Nr).call(this);return}this.setEditingState(!0),Q(this,et,Or).call(this),this.unselectAll();for(const jt of t(this,D).values())jt.updateMode(H);if(Ct){for(const jt of t(this,E).values())if(jt.annotationElementId===Ct){this.setSelected(jt),jt.enterInEditMode();break}}}}updateToolbar(H){H!==t(this,L)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:H})}updateParams(H,Ct){if(t(this,X)){if(H===d.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(H);return}for(const jt of t(this,x))jt.updateParams(H,Ct);for(const jt of t(this,X))jt.updateDefaultParams(H,Ct)}}enableWaiting(H=!1){if(t(this,m)!==H){gt(this,m,H);for(const Ct of t(this,D).values())H?Ct.disableClick():Ct.enableClick(),Ct.div.classList.toggle("waiting",H)}}getEditors(H){const Ct=[];for(const jt of t(this,E).values())jt.pageIndex===H&&Ct.push(jt);return Ct}getEditor(H){return t(this,E).get(H)}addEditor(H){t(this,E).set(H.id,H)}removeEditor(H){var Ct;t(this,E).delete(H.id),this.unselect(H),(!H.annotationElementId||!t(this,bt).has(H.annotationElementId))&&((Ct=t(this,Y))==null||Ct.remove(H.id))}addDeletedAnnotationElement(H){t(this,bt).add(H.annotationElementId),H.deleted=!0}isDeletedAnnotationElement(H){return t(this,bt).has(H)}removeDeletedAnnotationElement(H){t(this,bt).delete(H.annotationElementId),H.deleted=!1}setActiveEditor(H){t(this,o)!==H&&(gt(this,o,H),H&&Q(this,et,Wn).call(this,H.propertiesToUpdate))}toggleSelected(H){if(t(this,x).has(H)){t(this,x).delete(H),H.unselect(),Q(this,et,gn).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,x).add(H),H.select(),Q(this,et,Wn).call(this,H.propertiesToUpdate),Q(this,et,gn).call(this,{hasSelectedEditor:!0})}setSelected(H){for(const Ct of t(this,x))Ct!==H&&Ct.unselect();t(this,x).clear(),t(this,x).add(H),H.select(),Q(this,et,Wn).call(this,H.propertiesToUpdate),Q(this,et,gn).call(this,{hasSelectedEditor:!0})}isSelected(H){return t(this,x).has(H)}unselect(H){H.unselect(),t(this,x).delete(H),Q(this,et,gn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,x).size!==0}undo(){t(this,it).undo(),Q(this,et,gn).call(this,{hasSomethingToUndo:t(this,it).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Q(this,et,zn).call(this)})}redo(){t(this,it).redo(),Q(this,et,gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,it).hasSomethingToRedo(),isEmpty:Q(this,et,zn).call(this)})}addCommands(H){t(this,it).add(H),Q(this,et,gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Q(this,et,zn).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const H=[...t(this,x)],Ct=()=>{for(const Zt of H)Zt.remove()},jt=()=>{for(const Zt of H)Q(this,et,ji).call(this,Zt)};this.addCommands({cmd:Ct,undo:jt,mustExec:!0})}commitOrRemove(){var H;(H=t(this,o))==null||H.commitOrRemove()}hasSomethingToControl(){return t(this,o)||this.hasSelection}selectAll(){for(const H of t(this,x))H.commit();Q(this,et,Wi).call(this,t(this,E).values())}unselectAll(){if(t(this,o)){t(this,o).commitOrRemove();return}if(this.hasSelection){for(const H of t(this,x))H.unselect();t(this,x).clear(),Q(this,et,gn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(H,Ct,jt=!1){if(jt||this.commitOrRemove(),!this.hasSelection)return;t(this,dt)[0]+=H,t(this,dt)[1]+=Ct;const[Zt,ee]=t(this,dt),qt=[...t(this,x)],R=1e3;t(this,wt)&&clearTimeout(t(this,wt)),gt(this,wt,setTimeout(()=>{gt(this,wt,null),t(this,dt)[0]=t(this,dt)[1]=0,this.addCommands({cmd:()=>{for(const C of qt)t(this,E).has(C.id)&&C.translateInPage(Zt,ee)},undo:()=>{for(const C of qt)t(this,E).has(C.id)&&C.translateInPage(-Zt,-ee)},mustExec:!1})},R));for(const C of qt)C.translateInPage(H,Ct)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),gt(this,M,new Map);for(const H of t(this,x))t(this,M).set(H,{savedX:H.x,savedY:H.y,savedPageIndex:H.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,M))return!1;this.disableUserSelect(!1);const H=t(this,M);gt(this,M,null);let Ct=!1;for(const[{x:Zt,y:ee,pageIndex:qt},R]of H)R.newX=Zt,R.newY=ee,R.newPageIndex=qt,Ct||(Ct=Zt!==R.savedX||ee!==R.savedY||qt!==R.savedPageIndex);if(!Ct)return!1;const jt=(Zt,ee,qt,R)=>{if(t(this,E).has(Zt.id)){const C=t(this,D).get(R);C?Zt._setParentAndPosition(C,ee,qt):(Zt.pageIndex=R,Zt.x=ee,Zt.y=qt)}};return this.addCommands({cmd:()=>{for(const[Zt,{newX:ee,newY:qt,newPageIndex:R}]of H)jt(Zt,ee,qt,R)},undo:()=>{for(const[Zt,{savedX:ee,savedY:qt,savedPageIndex:R}]of H)jt(Zt,ee,qt,R)},mustExec:!0}),!0}dragSelectedEditors(H,Ct){if(t(this,M))for(const jt of t(this,M).keys())jt.drag(H,Ct)}rebuild(H){if(H.parent===null){const Ct=this.getLayer(H.pageIndex);Ct?(Ct.changeParent(H),Ct.addOrRebuild(H)):(this.addEditor(H),this.addToAnnotationStorage(H),H.rebuild())}else H.parent.addOrRebuild(H)}isActive(H){return t(this,o)===H}getActive(){return t(this,o)}getMode(){return t(this,L)}get imageManager(){return(0,d.shadow)(this,"imageManager",new G)}};o=new WeakMap,E=new WeakMap,D=new WeakMap,vt=new WeakMap,Y=new WeakMap,it=new WeakMap,q=new WeakMap,bt=new WeakMap,M=new WeakMap,X=new WeakMap,lt=new WeakMap,P=new WeakMap,i=new WeakMap,r=new WeakMap,m=new WeakMap,F=new WeakMap,L=new WeakMap,x=new WeakMap,Z=new WeakMap,mt=new WeakMap,St=new WeakMap,Et=new WeakMap,Pt=new WeakMap,xt=new WeakMap,Ft=new WeakMap,ct=new WeakMap,ut=new WeakMap,A=new WeakMap,I=new WeakMap,nt=new WeakMap,dt=new WeakMap,wt=new WeakMap,Lt=new WeakMap,kt=new WeakMap,et=new WeakSet,Ir=function(){window.addEventListener("focus",t(this,St)),window.addEventListener("blur",t(this,mt))},Ni=function(){window.removeEventListener("focus",t(this,St)),window.removeEventListener("blur",t(this,mt))},Bi=function(){window.addEventListener("keydown",t(this,Ft),{capture:!0})},si=function(){window.removeEventListener("keydown",t(this,Ft),{capture:!0})},Hi=function(){document.addEventListener("copy",t(this,Et)),document.addEventListener("cut",t(this,Pt)),document.addEventListener("paste",t(this,xt))},Ui=function(){document.removeEventListener("copy",t(this,Et)),document.removeEventListener("cut",t(this,Pt)),document.removeEventListener("paste",t(this,xt))},gn=function(H){Object.entries(H).some(([jt,Zt])=>t(this,nt)[jt]!==Zt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,nt),H)})},Wn=function(H){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:H})},Or=function(){if(!t(this,r)){gt(this,r,!0);for(const H of t(this,D).values())H.enable()}},Nr=function(){if(this.unselectAll(),t(this,r)){gt(this,r,!1);for(const H of t(this,D).values())H.disable()}},ji=function(H){const Ct=t(this,D).get(H.pageIndex);Ct?Ct.addOrRebuild(H):this.addEditor(H)},zn=function(){if(t(this,E).size===0)return!0;if(t(this,E).size===1)for(const H of t(this,E).values())return H.isEmpty();return!1},Wi=function(H){t(this,x).clear();for(const Ct of H)Ct.isEmpty()||(t(this,x).add(Ct),Ct.select());Q(this,et,gn).call(this,{hasSelectedEditor:!0})},qe(Jt,"TRANSLATE_SMALL",1),qe(Jt,"TRANSLATE_BIG",10);let j=Jt;v.AnnotationEditorUIManager=j},(h,v,At)=>{var q,bt,M,X,lt,P,i,r,m,F,L,x,In,On,zi,ai,oi,Vn,Gn;Object.defineProperty(v,"__esModule",{value:!0}),v.StatTimer=v.RenderingCancelledException=v.PixelsPerInch=v.PageViewport=v.PDFDateString=v.DOMStandardFontDataFactory=v.DOMSVGFactory=v.DOMFilterFactory=v.DOMCanvasFactory=v.DOMCMapReaderFactory=void 0,v.deprecated=a,v.getColorValues=E,v.getCurrentTransform=D,v.getCurrentTransformInverse=vt,v.getFilenameFromUrl=g,v.getPdfFilenameFromUrl=S,v.getRGB=o,v.getXfaPageViewport=N,v.isDataScheme=k,v.isPdfFile=_,v.isValidFetchUrl=w,v.loadScript=u,v.noContextMenu=s,v.setLayerDimensions=Y;var d=At(7),T=At(1);const e="http://www.w3.org/2000/svg",it=class it{};qe(it,"CSS",96),qe(it,"PDF",72),qe(it,"PDF_TO_CSS_UNITS",it.CSS/it.PDF);let tt=it;v.PixelsPerInch=tt;class Rt extends d.BaseFilterFactory{constructor({docId:A,ownerDocument:I=globalThis.document}={}){super();pt(this,x);pt(this,q);pt(this,bt);pt(this,M);pt(this,X);pt(this,lt);pt(this,P);pt(this,i);pt(this,r);pt(this,m);pt(this,F);pt(this,L,0);gt(this,M,A),gt(this,X,I)}addFilter(A){if(!A)return"none";let I=t(this,x,In).get(A);if(I)return I;let nt,dt,wt,Lt;if(A.length===1){const Bt=A[0],ge=new Array(256);for(let le=0;le<256;le++)ge[le]=Bt[le]/255;Lt=nt=dt=wt=ge.join(",")}else{const[Bt,ge,le]=A,Pe=new Array(256),$t=new Array(256),ie=new Array(256);for(let ye=0;ye<256;ye++)Pe[ye]=Bt[ye]/255,$t[ye]=ge[ye]/255,ie[ye]=le[ye]/255;nt=Pe.join(","),dt=$t.join(","),wt=ie.join(","),Lt=`${nt}${dt}${wt}`}if(I=t(this,x,In).get(Lt),I)return t(this,x,In).set(A,I),I;const kt=`g_${t(this,M)}_transfer_map_${jn(this,L)._++}`,et=`url(#${kt})`;t(this,x,In).set(A,et),t(this,x,In).set(Lt,et);const Wt=Q(this,x,ai).call(this,kt);return Q(this,x,Vn).call(this,nt,dt,wt,Wt),et}addHCMFilter(A,I){var ge;const nt=`${A}-${I}`;if(t(this,P)===nt)return t(this,i);if(gt(this,P,nt),gt(this,i,"none"),(ge=t(this,lt))==null||ge.remove(),!A||!I)return t(this,i);const dt=Q(this,x,Gn).call(this,A);A=T.Util.makeHexColor(...dt);const wt=Q(this,x,Gn).call(this,I);if(I=T.Util.makeHexColor(...wt),t(this,x,On).style.color="",A==="#000000"&&I==="#ffffff"||A===I)return t(this,i);const Lt=new Array(256);for(let le=0;le<=255;le++){const Pe=le/255;Lt[le]=Pe<=.03928?Pe/12.92:((Pe+.055)/1.055)**2.4}const kt=Lt.join(","),et=`g_${t(this,M)}_hcm_filter`,Wt=gt(this,r,Q(this,x,ai).call(this,et));Q(this,x,Vn).call(this,kt,kt,kt,Wt),Q(this,x,zi).call(this,Wt);const Bt=(le,Pe)=>{const $t=dt[le]/255,ie=wt[le]/255,ye=new Array(Pe+1);for(let De=0;De<=Pe;De++)ye[De]=$t+De/Pe*(ie-$t);return ye.join(",")};return Q(this,x,Vn).call(this,Bt(0,5),Bt(1,5),Bt(2,5),Wt),gt(this,i,`url(#${et})`),t(this,i)}addHighlightHCMFilter(A,I,nt,dt){var ie;const wt=`${A}-${I}-${nt}-${dt}`;if(t(this,m)===wt)return t(this,F);if(gt(this,m,wt),gt(this,F,"none"),(ie=t(this,r))==null||ie.remove(),!A||!I)return t(this,F);const[Lt,kt]=[A,I].map(Q(this,x,Gn).bind(this));let et=Math.round(.2126*Lt[0]+.7152*Lt[1]+.0722*Lt[2]),Wt=Math.round(.2126*kt[0]+.7152*kt[1]+.0722*kt[2]),[Bt,ge]=[nt,dt].map(Q(this,x,Gn).bind(this));Wt<et&&([et,Wt,Bt,ge]=[Wt,et,ge,Bt]),t(this,x,On).style.color="";const le=(ye,De,Tt)=>{const rt=new Array(256),at=(Wt-et)/Tt,Xt=ye/255,Jt=(De-ye)/(255*Tt);let oe=0;for(let H=0;H<=Tt;H++){const Ct=Math.round(et+H*at),jt=Xt+H*Jt;for(let Zt=oe;Zt<=Ct;Zt++)rt[Zt]=jt;oe=Ct+1}for(let H=oe;H<256;H++)rt[H]=rt[oe-1];return rt.join(",")},Pe=`g_${t(this,M)}_hcm_highlight_filter`,$t=gt(this,r,Q(this,x,ai).call(this,Pe));return Q(this,x,zi).call(this,$t),Q(this,x,Vn).call(this,le(Bt[0],ge[0],5),le(Bt[1],ge[1],5),le(Bt[2],ge[2],5),$t),gt(this,F,`url(#${Pe})`),t(this,F)}destroy(A=!1){A&&(t(this,i)||t(this,F))||(t(this,bt)&&(t(this,bt).parentNode.parentNode.remove(),gt(this,bt,null)),t(this,q)&&(t(this,q).clear(),gt(this,q,null)),gt(this,L,0))}}q=new WeakMap,bt=new WeakMap,M=new WeakMap,X=new WeakMap,lt=new WeakMap,P=new WeakMap,i=new WeakMap,r=new WeakMap,m=new WeakMap,F=new WeakMap,L=new WeakMap,x=new WeakSet,In=function(){return t(this,q)||gt(this,q,new Map)},On=function(){if(!t(this,bt)){const A=t(this,X).createElement("div"),{style:I}=A;I.visibility="hidden",I.contain="strict",I.width=I.height=0,I.position="absolute",I.top=I.left=0,I.zIndex=-1;const nt=t(this,X).createElementNS(e,"svg");nt.setAttribute("width",0),nt.setAttribute("height",0),gt(this,bt,t(this,X).createElementNS(e,"defs")),A.append(nt),nt.append(t(this,bt)),t(this,X).body.append(A)}return t(this,bt)},zi=function(A){const I=t(this,X).createElementNS(e,"feColorMatrix");I.setAttribute("type","matrix"),I.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),A.append(I)},ai=function(A){const I=t(this,X).createElementNS(e,"filter");return I.setAttribute("color-interpolation-filters","sRGB"),I.setAttribute("id",A),t(this,x,On).append(I),I},oi=function(A,I,nt){const dt=t(this,X).createElementNS(e,I);dt.setAttribute("type","discrete"),dt.setAttribute("tableValues",nt),A.append(dt)},Vn=function(A,I,nt,dt){const wt=t(this,X).createElementNS(e,"feComponentTransfer");dt.append(wt),Q(this,x,oi).call(this,wt,"feFuncR",A),Q(this,x,oi).call(this,wt,"feFuncG",I),Q(this,x,oi).call(this,wt,"feFuncB",nt)},Gn=function(A){return t(this,x,On).style.color=A,o(getComputedStyle(t(this,x,On)).getPropertyValue("color"))},v.DOMFilterFactory=Rt;class G extends d.BaseCanvasFactory{constructor({ownerDocument:ut=globalThis.document}={}){super(),this._document=ut}_createCanvas(ut,A){const I=this._document.createElement("canvas");return I.width=ut,I.height=A,I}}v.DOMCanvasFactory=G;async function O(ct,ut=!1){if(w(ct,document.baseURI)){const A=await fetch(ct);if(!A.ok)throw new Error(A.statusText);return ut?new Uint8Array(await A.arrayBuffer()):(0,T.stringToBytes)(await A.text())}return new Promise((A,I)=>{const nt=new XMLHttpRequest;nt.open("GET",ct,!0),ut&&(nt.responseType="arraybuffer"),nt.onreadystatechange=()=>{if(nt.readyState===XMLHttpRequest.DONE){if(nt.status===200||nt.status===0){let dt;if(ut&&nt.response?dt=new Uint8Array(nt.response):!ut&&nt.responseText&&(dt=(0,T.stringToBytes)(nt.responseText)),dt){A(dt);return}}I(new Error(nt.statusText))}},nt.send(null)})}class f extends d.BaseCMapReaderFactory{_fetchData(ut,A){return O(ut,this.isCompressed).then(I=>({cMapData:I,compressionType:A}))}}v.DOMCMapReaderFactory=f;class W extends d.BaseStandardFontDataFactory{_fetchData(ut){return O(ut,!0)}}v.DOMStandardFontDataFactory=W;class j extends d.BaseSVGFactory{_createSVG(ut){return document.createElementNS(e,ut)}}v.DOMSVGFactory=j;class y{constructor({viewBox:ut,scale:A,rotation:I,offsetX:nt=0,offsetY:dt=0,dontFlip:wt=!1}){this.viewBox=ut,this.scale=A,this.rotation=I,this.offsetX=nt,this.offsetY=dt;const Lt=(ut[2]+ut[0])/2,kt=(ut[3]+ut[1])/2;let et,Wt,Bt,ge;switch(I%=360,I<0&&(I+=360),I){case 180:et=-1,Wt=0,Bt=0,ge=1;break;case 90:et=0,Wt=1,Bt=1,ge=0;break;case 270:et=0,Wt=-1,Bt=-1,ge=0;break;case 0:et=1,Wt=0,Bt=0,ge=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}wt&&(Bt=-Bt,ge=-ge);let le,Pe,$t,ie;et===0?(le=Math.abs(kt-ut[1])*A+nt,Pe=Math.abs(Lt-ut[0])*A+dt,$t=(ut[3]-ut[1])*A,ie=(ut[2]-ut[0])*A):(le=Math.abs(Lt-ut[0])*A+nt,Pe=Math.abs(kt-ut[1])*A+dt,$t=(ut[2]-ut[0])*A,ie=(ut[3]-ut[1])*A),this.transform=[et*A,Wt*A,Bt*A,ge*A,le-et*A*Lt-Bt*A*kt,Pe-Wt*A*Lt-ge*A*kt],this.width=$t,this.height=ie}get rawDims(){const{viewBox:ut}=this;return(0,T.shadow)(this,"rawDims",{pageWidth:ut[2]-ut[0],pageHeight:ut[3]-ut[1],pageX:ut[0],pageY:ut[1]})}clone({scale:ut=this.scale,rotation:A=this.rotation,offsetX:I=this.offsetX,offsetY:nt=this.offsetY,dontFlip:dt=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:ut,rotation:A,offsetX:I,offsetY:nt,dontFlip:dt})}convertToViewportPoint(ut,A){return T.Util.applyTransform([ut,A],this.transform)}convertToViewportRectangle(ut){const A=T.Util.applyTransform([ut[0],ut[1]],this.transform),I=T.Util.applyTransform([ut[2],ut[3]],this.transform);return[A[0],A[1],I[0],I[1]]}convertToPdfPoint(ut,A){return T.Util.applyInverseTransform([ut,A],this.transform)}}v.PageViewport=y;class b extends T.BaseException{constructor(ut,A=0){super(ut,"RenderingCancelledException"),this.extraDelay=A}}v.RenderingCancelledException=b;function k(ct){const ut=ct.length;let A=0;for(;A<ut&&ct[A].trim()==="";)A++;return ct.substring(A,A+5).toLowerCase()==="data:"}function _(ct){return typeof ct=="string"&&/\.pdf$/i.test(ct)}function g(ct,ut=!1){return ut||([ct]=ct.split(/[#?]/,1)),ct.substring(ct.lastIndexOf("/")+1)}function S(ct,ut="document.pdf"){if(typeof ct!="string")return ut;if(k(ct))return(0,T.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ut;const A=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,I=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,nt=A.exec(ct);let dt=I.exec(nt[1])||I.exec(nt[2])||I.exec(nt[3]);if(dt&&(dt=dt[0],dt.includes("%")))try{dt=I.exec(decodeURIComponent(dt))[0]}catch{}return dt||ut}class B{constructor(){qe(this,"started",Object.create(null));qe(this,"times",[])}time(ut){ut in this.started&&(0,T.warn)(`Timer is already running for ${ut}`),this.started[ut]=Date.now()}timeEnd(ut){ut in this.started||(0,T.warn)(`Timer has not been started for ${ut}`),this.times.push({name:ut,start:this.started[ut],end:Date.now()}),delete this.started[ut]}toString(){const ut=[];let A=0;for(const{name:I}of this.times)A=Math.max(I.length,A);for(const{name:I,start:nt,end:dt}of this.times)ut.push(`${I.padEnd(A)} ${dt-nt}ms
`);return ut.join("")}}v.StatTimer=B;function w(ct,ut){try{const{protocol:A}=ut?new URL(ct,ut):new URL(ct);return A==="http:"||A==="https:"}catch{return!1}}function s(ct){ct.preventDefault()}function u(ct,ut=!1){return new Promise((A,I)=>{const nt=document.createElement("script");nt.src=ct,nt.onload=function(dt){ut&&nt.remove(),A(dt)},nt.onerror=function(){I(new Error(`Cannot load script at: ${nt.src}`))},(document.head||document.documentElement).append(nt)})}function a(ct){console.log("Deprecated API usage: "+ct)}let l;class c{static toDateObject(ut){if(!ut||typeof ut!="string")return null;l||(l=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const A=l.exec(ut);if(!A)return null;const I=parseInt(A[1],10);let nt=parseInt(A[2],10);nt=nt>=1&&nt<=12?nt-1:0;let dt=parseInt(A[3],10);dt=dt>=1&&dt<=31?dt:1;let wt=parseInt(A[4],10);wt=wt>=0&&wt<=23?wt:0;let Lt=parseInt(A[5],10);Lt=Lt>=0&&Lt<=59?Lt:0;let kt=parseInt(A[6],10);kt=kt>=0&&kt<=59?kt:0;const et=A[7]||"Z";let Wt=parseInt(A[8],10);Wt=Wt>=0&&Wt<=23?Wt:0;let Bt=parseInt(A[9],10)||0;return Bt=Bt>=0&&Bt<=59?Bt:0,et==="-"?(wt+=Wt,Lt+=Bt):et==="+"&&(wt-=Wt,Lt-=Bt),new Date(Date.UTC(I,nt,dt,wt,Lt,kt))}}v.PDFDateString=c;function N(ct,{scale:ut=1,rotation:A=0}){const{width:I,height:nt}=ct.attributes.style,dt=[0,0,parseInt(I),parseInt(nt)];return new y({viewBox:dt,scale:ut,rotation:A})}function o(ct){if(ct.startsWith("#")){const ut=parseInt(ct.slice(1),16);return[(ut&16711680)>>16,(ut&65280)>>8,ut&255]}return ct.startsWith("rgb(")?ct.slice(4,-1).split(",").map(ut=>parseInt(ut)):ct.startsWith("rgba(")?ct.slice(5,-1).split(",").map(ut=>parseInt(ut)).slice(0,3):((0,T.warn)(`Not a valid color format: "${ct}"`),[0,0,0])}function E(ct){const ut=document.createElement("span");ut.style.visibility="hidden",document.body.append(ut);for(const A of ct.keys()){ut.style.color=A;const I=window.getComputedStyle(ut).color;ct.set(A,o(I))}ut.remove()}function D(ct){const{a:ut,b:A,c:I,d:nt,e:dt,f:wt}=ct.getTransform();return[ut,A,I,nt,dt,wt]}function vt(ct){const{a:ut,b:A,c:I,d:nt,e:dt,f:wt}=ct.getTransform().invertSelf();return[ut,A,I,nt,dt,wt]}function Y(ct,ut,A=!1,I=!0){if(ut instanceof y){const{pageWidth:nt,pageHeight:dt}=ut.rawDims,{style:wt}=ct,Lt=T.FeatureTest.isCSSRoundSupported,kt=`var(--scale-factor) * ${nt}px`,et=`var(--scale-factor) * ${dt}px`,Wt=Lt?`round(${kt}, 1px)`:`calc(${kt})`,Bt=Lt?`round(${et}, 1px)`:`calc(${et})`;!A||ut.rotation%180===0?(wt.width=Wt,wt.height=Bt):(wt.width=Bt,wt.height=Wt)}I&&ct.setAttribute("data-main-rotation",ut.rotation)}},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.BaseStandardFontDataFactory=v.BaseSVGFactory=v.BaseFilterFactory=v.BaseCanvasFactory=v.BaseCMapReaderFactory=void 0;var d=At(1);class T{constructor(){this.constructor===T&&(0,d.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(f){return"none"}addHCMFilter(f,W){return"none"}addHighlightHCMFilter(f,W,j,y){return"none"}destroy(f=!1){}}v.BaseFilterFactory=T;class e{constructor(){this.constructor===e&&(0,d.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,W){if(f<=0||W<=0)throw new Error("Invalid canvas size");const j=this._createCanvas(f,W);return{canvas:j,context:j.getContext("2d")}}reset(f,W,j){if(!f.canvas)throw new Error("Canvas is not specified");if(W<=0||j<=0)throw new Error("Invalid canvas size");f.canvas.width=W,f.canvas.height=j}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,W){(0,d.unreachable)("Abstract method `_createCanvas` called.")}}v.BaseCanvasFactory=e;class tt{constructor({baseUrl:f=null,isCompressed:W=!0}){this.constructor===tt&&(0,d.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=W}async fetch({name:f}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const W=this.baseUrl+f+(this.isCompressed?".bcmap":""),j=this.isCompressed?d.CMapCompressionType.BINARY:d.CMapCompressionType.NONE;return this._fetchData(W,j).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${W}`)})}_fetchData(f,W){(0,d.unreachable)("Abstract method `_fetchData` called.")}}v.BaseCMapReaderFactory=tt;class Rt{constructor({baseUrl:f=null}){this.constructor===Rt&&(0,d.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch({filename:f}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const W=`${this.baseUrl}${f}`;return this._fetchData(W).catch(j=>{throw new Error(`Unable to load font data at: ${W}`)})}_fetchData(f){(0,d.unreachable)("Abstract method `_fetchData` called.")}}v.BaseStandardFontDataFactory=Rt;class G{constructor(){this.constructor===G&&(0,d.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,W,j=!1){if(f<=0||W<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),j||(y.setAttribute("width",`${f}px`),y.setAttribute("height",`${W}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${f} ${W}`),y}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,d.unreachable)("Abstract method `_createSVG` called.")}}v.BaseSVGFactory=G},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.MurmurHash3_64=void 0;var d=At(1);const T=3285377520,e=4294901760,tt=65535;class Rt{constructor(O){this.h1=O?O&4294967295:T,this.h2=O?O&4294967295:T}update(O){let f,W;if(typeof O=="string"){f=new Uint8Array(O.length*2),W=0;for(let a=0,l=O.length;a<l;a++){const c=O.charCodeAt(a);c<=255?f[W++]=c:(f[W++]=c>>>8,f[W++]=c&255)}}else if((0,d.isArrayBuffer)(O))f=O.slice(),W=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const j=W>>2,y=W-j*4,b=new Uint32Array(f.buffer,0,j);let k=0,_=0,g=this.h1,S=this.h2;const B=3432918353,w=461845907,s=B&tt,u=w&tt;for(let a=0;a<j;a++)a&1?(k=b[a],k=k*B&e|k*s&tt,k=k<<15|k>>>17,k=k*w&e|k*u&tt,g^=k,g=g<<13|g>>>19,g=g*5+3864292196):(_=b[a],_=_*B&e|_*s&tt,_=_<<15|_>>>17,_=_*w&e|_*u&tt,S^=_,S=S<<13|S>>>19,S=S*5+3864292196);switch(k=0,y){case 3:k^=f[j*4+2]<<16;case 2:k^=f[j*4+1]<<8;case 1:k^=f[j*4],k=k*B&e|k*s&tt,k=k<<15|k>>>17,k=k*w&e|k*u&tt,j&1?g^=k:S^=k}this.h1=g,this.h2=S}hexdigest(){let O=this.h1,f=this.h2;return O^=f>>>1,O=O*3981806797&e|O*36045&tt,f=f*4283543511&e|((f<<16|O>>>16)*2950163797&e)>>>16,O^=f>>>1,O=O*444984403&e|O*60499&tt,f=f*3301882366&e|((f<<16|O>>>16)*3120437893&e)>>>16,O^=f>>>1,(O>>>0).toString(16).padStart(8,"0")+(f>>>0).toString(16).padStart(8,"0")}}v.MurmurHash3_64=Rt},(h,v,At)=>{var tt;Object.defineProperty(v,"__esModule",{value:!0}),v.FontLoader=v.FontFaceObject=void 0;var d=At(1);class T{constructor({ownerDocument:G=globalThis.document,styleElement:O=null}){pt(this,tt,new Set);this._document=G,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(G){this.nativeFontFaces.add(G),this._document.fonts.add(G)}removeNativeFontFace(G){this.nativeFontFaces.delete(G),this._document.fonts.delete(G)}insertRule(G){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const O=this.styleElement.sheet;O.insertRule(G,O.cssRules.length)}clear(){for(const G of this.nativeFontFaces)this._document.fonts.delete(G);this.nativeFontFaces.clear(),t(this,tt).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(G){if(!(!G||t(this,tt).has(G.loadedName))){if((0,d.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:O,src:f,style:W}=G,j=new FontFace(O,f,W);this.addNativeFontFace(j);try{await j.load(),t(this,tt).add(O)}catch{(0,d.warn)(`Cannot load system font: ${G.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(j)}return}(0,d.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(G){if(G.attached||G.missingFile&&!G.systemFontInfo)return;if(G.attached=!0,G.systemFontInfo){await this.loadSystemFont(G.systemFontInfo);return}if(this.isFontLoadingAPISupported){const f=G.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(W){throw(0,d.warn)(`Failed to load font '${f.family}': '${W}'.`),G.disableFontFace=!0,W}}return}const O=G.createFontFaceRule();if(O){if(this.insertRule(O),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const W=this._queueLoadingCallback(f);this._prepareFontLoadEvent(G,W)})}}get isFontLoadingAPISupported(){var O;const G=!!((O=this._document)!=null&&O.fonts);return(0,d.shadow)(this,"isFontLoadingAPISupported",G)}get isSyncFontLoadingSupported(){let G=!1;return(d.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(G=!0),(0,d.shadow)(this,"isSyncFontLoadingSupported",G)}_queueLoadingCallback(G){function O(){for((0,d.assert)(!W.done,"completeRequest() cannot be called twice."),W.done=!0;f.length>0&&f[0].done;){const j=f.shift();setTimeout(j.callback,0)}}const{loadingRequests:f}=this,W={done:!1,complete:O,callback:G};return f.push(W),W}get _loadTestFont(){const G=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,d.shadow)(this,"_loadTestFont",G)}_prepareFontLoadEvent(G,O){function f(o,E){return o.charCodeAt(E)<<24|o.charCodeAt(E+1)<<16|o.charCodeAt(E+2)<<8|o.charCodeAt(E+3)&255}function W(o,E,D,vt){const Y=o.substring(0,E),it=o.substring(E+D);return Y+vt+it}let j,y;const b=this._document.createElement("canvas");b.width=1,b.height=1;const k=b.getContext("2d");let _=0;function g(o,E){if(++_>30){(0,d.warn)("Load test font never loaded."),E();return}if(k.font="30px "+o,k.fillText(".",0,20),k.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(g.bind(null,o,E))}const S=`lt${Date.now()}${this.loadTestFontId++}`;let B=this._loadTestFont;B=W(B,976,S.length,S);const s=16,u=1482184792;let a=f(B,s);for(j=0,y=S.length-3;j<y;j+=4)a=a-u+f(S,j)|0;j<S.length&&(a=a-u+f(S+"XXX",j)|0),B=W(B,s,4,(0,d.string32)(a));const l=`url(data:font/opentype;base64,${btoa(B)});`,c=`@font-face {font-family:"${S}";src:${l}}`;this.insertRule(c);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const o of[G.loadedName,S]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=o,N.append(E)}this._document.body.append(N),g(S,()=>{N.remove(),O.complete()})}}tt=new WeakMap,v.FontLoader=T;class e{constructor(G,{isEvalSupported:O=!0,disableFontFace:f=!1,ignoreErrors:W=!1,inspectFont:j=null}){this.compiledGlyphs=Object.create(null);for(const y in G)this[y]=G[y];this.isEvalSupported=O!==!1,this.disableFontFace=f===!0,this.ignoreErrors=W===!0,this._inspectFont=j}createNativeFontFace(){var O;if(!this.data||this.disableFontFace)return null;let G;if(!this.cssFontInfo)G=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style=`oblique ${this.cssFontInfo.italicAngle}deg`),G=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return(O=this._inspectFont)==null||O.call(this,this),G}createFontFaceRule(){var W;if(!this.data||this.disableFontFace)return null;const G=(0,d.bytesToString)(this.data),O=`url(data:${this.mimetype};base64,${btoa(G)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${O}}`;else{let j=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(j+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${j}src:${O}}`}return(W=this._inspectFont)==null||W.call(this,this,O),f}getPathGenerator(G,O){if(this.compiledGlyphs[O]!==void 0)return this.compiledGlyphs[O];let f;try{f=G.get(this.loadedName+"_path_"+O)}catch(W){if(!this.ignoreErrors)throw W;return(0,d.warn)(`getPathGenerator - ignoring character: "${W}".`),this.compiledGlyphs[O]=function(j,y){}}if(this.isEvalSupported&&d.FeatureTest.isEvalSupported){const W=[];for(const j of f){const y=j.args!==void 0?j.args.join(","):"";W.push("c.",j.cmd,"(",y,`);
`)}return this.compiledGlyphs[O]=new Function("c","size",W.join(""))}return this.compiledGlyphs[O]=function(W,j){for(const y of f)y.cmd==="scale"&&(y.args=[j,-j]),W[y.cmd].apply(W,y.args)}}}v.FontFaceObject=e},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.NodeStandardFontDataFactory=v.NodeFilterFactory=v.NodeCanvasFactory=v.NodeCMapReaderFactory=void 0;var d=At(7);At(1);const T=function(O){return new Promise((f,W)=>{require$$5.readFile(O,(y,b)=>{if(y||!b){W(new Error(y));return}f(new Uint8Array(b))})})};class e extends d.BaseFilterFactory{}v.NodeFilterFactory=e;class tt extends d.BaseCanvasFactory{_createCanvas(f,W){return require$$5.createCanvas(f,W)}}v.NodeCanvasFactory=tt;class Rt extends d.BaseCMapReaderFactory{_fetchData(f,W){return T(f).then(j=>({cMapData:j,compressionType:W}))}}v.NodeCMapReaderFactory=Rt;class G extends d.BaseStandardFontDataFactory{_fetchData(f){return T(f)}}v.NodeStandardFontDataFactory=G},(h,v,At)=>{var bt,Vi,Gi;Object.defineProperty(v,"__esModule",{value:!0}),v.CanvasGraphics=void 0;var d=At(1),T=At(6),e=At(12),tt=At(13);const Rt=16,G=100,O=4096,f=15,W=10,j=1e3,y=16;function b(P,i){if(P._removeMirroring)throw new Error("Context is already forwarding operations.");P.__originalSave=P.save,P.__originalRestore=P.restore,P.__originalRotate=P.rotate,P.__originalScale=P.scale,P.__originalTranslate=P.translate,P.__originalTransform=P.transform,P.__originalSetTransform=P.setTransform,P.__originalResetTransform=P.resetTransform,P.__originalClip=P.clip,P.__originalMoveTo=P.moveTo,P.__originalLineTo=P.lineTo,P.__originalBezierCurveTo=P.bezierCurveTo,P.__originalRect=P.rect,P.__originalClosePath=P.closePath,P.__originalBeginPath=P.beginPath,P._removeMirroring=()=>{P.save=P.__originalSave,P.restore=P.__originalRestore,P.rotate=P.__originalRotate,P.scale=P.__originalScale,P.translate=P.__originalTranslate,P.transform=P.__originalTransform,P.setTransform=P.__originalSetTransform,P.resetTransform=P.__originalResetTransform,P.clip=P.__originalClip,P.moveTo=P.__originalMoveTo,P.lineTo=P.__originalLineTo,P.bezierCurveTo=P.__originalBezierCurveTo,P.rect=P.__originalRect,P.closePath=P.__originalClosePath,P.beginPath=P.__originalBeginPath,delete P._removeMirroring},P.save=function(){i.save(),this.__originalSave()},P.restore=function(){i.restore(),this.__originalRestore()},P.translate=function(m,F){i.translate(m,F),this.__originalTranslate(m,F)},P.scale=function(m,F){i.scale(m,F),this.__originalScale(m,F)},P.transform=function(m,F,L,x,Z,mt){i.transform(m,F,L,x,Z,mt),this.__originalTransform(m,F,L,x,Z,mt)},P.setTransform=function(m,F,L,x,Z,mt){i.setTransform(m,F,L,x,Z,mt),this.__originalSetTransform(m,F,L,x,Z,mt)},P.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},P.rotate=function(m){i.rotate(m),this.__originalRotate(m)},P.clip=function(m){i.clip(m),this.__originalClip(m)},P.moveTo=function(r,m){i.moveTo(r,m),this.__originalMoveTo(r,m)},P.lineTo=function(r,m){i.lineTo(r,m),this.__originalLineTo(r,m)},P.bezierCurveTo=function(r,m,F,L,x,Z){i.bezierCurveTo(r,m,F,L,x,Z),this.__originalBezierCurveTo(r,m,F,L,x,Z)},P.rect=function(r,m,F,L){i.rect(r,m,F,L),this.__originalRect(r,m,F,L)},P.closePath=function(){i.closePath(),this.__originalClosePath()},P.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}class k{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,r,m){let F;return this.cache[i]!==void 0?(F=this.cache[i],this.canvasFactory.reset(F,r,m)):(F=this.canvasFactory.create(r,m),this.cache[i]=F),F}delete(i){delete this.cache[i]}clear(){for(const i in this.cache){const r=this.cache[i];this.canvasFactory.destroy(r),delete this.cache[i]}}}function _(P,i,r,m,F,L,x,Z,mt,St){const[Et,Pt,xt,Ft,ct,ut]=(0,T.getCurrentTransform)(P);if(Pt===0&&xt===0){const nt=x*Et+ct,dt=Math.round(nt),wt=Z*Ft+ut,Lt=Math.round(wt),kt=(x+mt)*Et+ct,et=Math.abs(Math.round(kt)-dt)||1,Wt=(Z+St)*Ft+ut,Bt=Math.abs(Math.round(Wt)-Lt)||1;return P.setTransform(Math.sign(Et),0,0,Math.sign(Ft),dt,Lt),P.drawImage(i,r,m,F,L,0,0,et,Bt),P.setTransform(Et,Pt,xt,Ft,ct,ut),[et,Bt]}if(Et===0&&Ft===0){const nt=Z*xt+ct,dt=Math.round(nt),wt=x*Pt+ut,Lt=Math.round(wt),kt=(Z+St)*xt+ct,et=Math.abs(Math.round(kt)-dt)||1,Wt=(x+mt)*Pt+ut,Bt=Math.abs(Math.round(Wt)-Lt)||1;return P.setTransform(0,Math.sign(Pt),Math.sign(xt),0,dt,Lt),P.drawImage(i,r,m,F,L,0,0,Bt,et),P.setTransform(Et,Pt,xt,Ft,ct,ut),[Bt,et]}P.drawImage(i,r,m,F,L,x,Z,mt,St);const A=Math.hypot(Et,Pt),I=Math.hypot(xt,Ft);return[A*mt,I*St]}function g(P){const{width:i,height:r}=P;if(i>j||r>j)return null;const m=1e3,F=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),L=i+1;let x=new Uint8Array(L*(r+1)),Z,mt,St;const Et=i+7&-8;let Pt=new Uint8Array(Et*r),xt=0;for(const I of P.data){let nt=128;for(;nt>0;)Pt[xt++]=I&nt?0:255,nt>>=1}let Ft=0;for(xt=0,Pt[xt]!==0&&(x[0]=1,++Ft),mt=1;mt<i;mt++)Pt[xt]!==Pt[xt+1]&&(x[mt]=Pt[xt]?2:1,++Ft),xt++;for(Pt[xt]!==0&&(x[mt]=2,++Ft),Z=1;Z<r;Z++){xt=Z*Et,St=Z*L,Pt[xt-Et]!==Pt[xt]&&(x[St]=Pt[xt]?1:8,++Ft);let I=(Pt[xt]?4:0)+(Pt[xt-Et]?8:0);for(mt=1;mt<i;mt++)I=(I>>2)+(Pt[xt+1]?4:0)+(Pt[xt-Et+1]?8:0),F[I]&&(x[St+mt]=F[I],++Ft),xt++;if(Pt[xt-Et]!==Pt[xt]&&(x[St+mt]=Pt[xt]?2:4,++Ft),Ft>m)return null}for(xt=Et*(r-1),St=Z*L,Pt[xt]!==0&&(x[St]=8,++Ft),mt=1;mt<i;mt++)Pt[xt]!==Pt[xt+1]&&(x[St+mt]=Pt[xt]?4:8,++Ft),xt++;if(Pt[xt]!==0&&(x[St+mt]=4,++Ft),Ft>m)return null;const ct=new Int32Array([0,L,-1,0,-L,0,0,0,1]),ut=new Path2D;for(Z=0;Ft&&Z<=r;Z++){let I=Z*L;const nt=I+i;for(;I<nt&&!x[I];)I++;if(I===nt)continue;ut.moveTo(I%L,Z);const dt=I;let wt=x[I];do{const Lt=ct[wt];do I+=Lt;while(!x[I]);const kt=x[I];kt!==5&&kt!==10?(wt=kt,x[I]=0):(wt=kt&51*wt>>4,x[I]&=wt>>2|wt<<2),ut.lineTo(I%L,I/L|0),x[I]||--Ft}while(dt!==I);--Z}return Pt=null,x=null,function(I){I.save(),I.scale(1/i,-1/r),I.translate(0,-r),I.fill(ut),I.beginPath(),I.restore()}}class S{constructor(i,r){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=d.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=d.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=d.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,i,r])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,r){this.x=i,this.y=r}updatePathMinMax(i,r,m){[r,m]=d.Util.applyTransform([r,m],i),this.minX=Math.min(this.minX,r),this.minY=Math.min(this.minY,m),this.maxX=Math.max(this.maxX,r),this.maxY=Math.max(this.maxY,m)}updateRectMinMax(i,r){const m=d.Util.applyTransform(r,i),F=d.Util.applyTransform(r.slice(2),i);this.minX=Math.min(this.minX,m[0],F[0]),this.minY=Math.min(this.minY,m[1],F[1]),this.maxX=Math.max(this.maxX,m[0],F[0]),this.maxY=Math.max(this.maxY,m[1],F[1])}updateScalingPathMinMax(i,r){d.Util.scaleMinMax(i,r),this.minX=Math.min(this.minX,r[0]),this.maxX=Math.max(this.maxX,r[1]),this.minY=Math.min(this.minY,r[2]),this.maxY=Math.max(this.maxY,r[3])}updateCurvePathMinMax(i,r,m,F,L,x,Z,mt,St,Et){const Pt=d.Util.bezierBoundingBox(r,m,F,L,x,Z,mt,St);if(Et){Et[0]=Math.min(Et[0],Pt[0],Pt[2]),Et[1]=Math.max(Et[1],Pt[0],Pt[2]),Et[2]=Math.min(Et[2],Pt[1],Pt[3]),Et[3]=Math.max(Et[3],Pt[1],Pt[3]);return}this.updateRectMinMax(i,Pt)}getPathBoundingBox(i=e.PathType.FILL,r=null){const m=[this.minX,this.minY,this.maxX,this.maxY];if(i===e.PathType.STROKE){r||(0,d.unreachable)("Stroke bounding box must include transform.");const F=d.Util.singularValueDecompose2dScale(r),L=F[0]*this.lineWidth/2,x=F[1]*this.lineWidth/2;m[0]-=L,m[1]-=x,m[2]+=L,m[3]+=x}return m}updateClipFromPath(){const i=d.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=e.PathType.FILL,r=null){return d.Util.intersect(this.clipBox,this.getPathBoundingBox(i,r))}}function B(P,i){if(typeof ImageData<"u"&&i instanceof ImageData){P.putImageData(i,0,0);return}const r=i.height,m=i.width,F=r%y,L=(r-F)/y,x=F===0?L:L+1,Z=P.createImageData(m,y);let mt=0,St;const Et=i.data,Pt=Z.data;let xt,Ft,ct,ut;if(i.kind===d.ImageKind.GRAYSCALE_1BPP){const A=Et.byteLength,I=new Uint32Array(Pt.buffer,0,Pt.byteLength>>2),nt=I.length,dt=m+7>>3,wt=4294967295,Lt=d.FeatureTest.isLittleEndian?4278190080:255;for(xt=0;xt<x;xt++){for(ct=xt<L?y:F,St=0,Ft=0;Ft<ct;Ft++){const kt=A-mt;let et=0;const Wt=kt>dt?m:kt*8-7,Bt=Wt&-8;let ge=0,le=0;for(;et<Bt;et+=8)le=Et[mt++],I[St++]=le&128?wt:Lt,I[St++]=le&64?wt:Lt,I[St++]=le&32?wt:Lt,I[St++]=le&16?wt:Lt,I[St++]=le&8?wt:Lt,I[St++]=le&4?wt:Lt,I[St++]=le&2?wt:Lt,I[St++]=le&1?wt:Lt;for(;et<Wt;et++)ge===0&&(le=Et[mt++],ge=128),I[St++]=le&ge?wt:Lt,ge>>=1}for(;St<nt;)I[St++]=0;P.putImageData(Z,0,xt*y)}}else if(i.kind===d.ImageKind.RGBA_32BPP){for(Ft=0,ut=m*y*4,xt=0;xt<L;xt++)Pt.set(Et.subarray(mt,mt+ut)),mt+=ut,P.putImageData(Z,0,Ft),Ft+=y;xt<x&&(ut=m*F*4,Pt.set(Et.subarray(mt,mt+ut)),P.putImageData(Z,0,Ft))}else if(i.kind===d.ImageKind.RGB_24BPP)for(ct=y,ut=m*ct,xt=0;xt<x;xt++){for(xt>=L&&(ct=F,ut=m*ct),St=0,Ft=ut;Ft--;)Pt[St++]=Et[mt++],Pt[St++]=Et[mt++],Pt[St++]=Et[mt++],Pt[St++]=255;P.putImageData(Z,0,xt*y)}else throw new Error(`bad image kind: ${i.kind}`)}function w(P,i){if(i.bitmap){P.drawImage(i.bitmap,0,0);return}const r=i.height,m=i.width,F=r%y,L=(r-F)/y,x=F===0?L:L+1,Z=P.createImageData(m,y);let mt=0;const St=i.data,Et=Z.data;for(let Pt=0;Pt<x;Pt++){const xt=Pt<L?y:F;({srcPos:mt}=(0,tt.convertBlackAndWhiteToRGBA)({src:St,srcPos:mt,dest:Et,width:m,height:xt,nonBlackColor:0})),P.putImageData(Z,0,Pt*y)}}function s(P,i){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const m of r)P[m]!==void 0&&(i[m]=P[m]);P.setLineDash!==void 0&&(i.setLineDash(P.getLineDash()),i.lineDashOffset=P.lineDashOffset)}function u(P){if(P.strokeStyle=P.fillStyle="#000000",P.fillRule="nonzero",P.globalAlpha=1,P.lineWidth=1,P.lineCap="butt",P.lineJoin="miter",P.miterLimit=10,P.globalCompositeOperation="source-over",P.font="10px sans-serif",P.setLineDash!==void 0&&(P.setLineDash([]),P.lineDashOffset=0),!d.isNodeJS){const{filter:i}=P;i!=="none"&&i!==""&&(P.filter="none")}}function a(P,i,r,m){const F=P.length;for(let L=3;L<F;L+=4){const x=P[L];if(x===0)P[L-3]=i,P[L-2]=r,P[L-1]=m;else if(x<255){const Z=255-x;P[L-3]=P[L-3]*x+i*Z>>8,P[L-2]=P[L-2]*x+r*Z>>8,P[L-1]=P[L-1]*x+m*Z>>8}}}function l(P,i,r){const m=P.length,F=1/255;for(let L=3;L<m;L+=4){const x=r?r[P[L]]:P[L];i[L]=i[L]*x*F|0}}function c(P,i,r){const m=P.length;for(let F=3;F<m;F+=4){const L=P[F-3]*77+P[F-2]*152+P[F-1]*28;i[F]=r?i[F]*r[L>>8]>>8:i[F]*L>>16}}function N(P,i,r,m,F,L,x,Z,mt,St,Et){const Pt=!!L,xt=Pt?L[0]:0,Ft=Pt?L[1]:0,ct=Pt?L[2]:0,ut=F==="Luminosity"?c:l,I=Math.min(m,Math.ceil(1048576/r));for(let nt=0;nt<m;nt+=I){const dt=Math.min(I,m-nt),wt=P.getImageData(Z-St,nt+(mt-Et),r,dt),Lt=i.getImageData(Z,nt+mt,r,dt);Pt&&a(wt.data,xt,Ft,ct),ut(wt.data,Lt.data,x),i.putImageData(Lt,Z,nt+mt)}}function o(P,i,r,m){const F=m[0],L=m[1],x=m[2]-F,Z=m[3]-L;x===0||Z===0||(N(i.context,r,x,Z,i.subtype,i.backdrop,i.transferMap,F,L,i.offsetX,i.offsetY),P.save(),P.globalAlpha=1,P.globalCompositeOperation="source-over",P.setTransform(1,0,0,1,0,0),P.drawImage(r.canvas,0,0),P.restore())}function E(P,i){const r=d.Util.singularValueDecompose2dScale(P);r[0]=Math.fround(r[0]),r[1]=Math.fround(r[1]);const m=Math.fround((globalThis.devicePixelRatio||1)*T.PixelsPerInch.PDF_TO_CSS_UNITS);return i!==void 0?i:r[0]<=m||r[1]<=m}const D=["butt","round","square"],vt=["miter","round","bevel"],Y={},it={},lt=class lt{constructor(i,r,m,F,L,{optionalContentConfig:x,markedContentStack:Z=null},mt,St){pt(this,bt);this.ctx=i,this.current=new S(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=m,this.canvasFactory=F,this.filterFactory=L,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Z||[],this.optionalContentConfig=x,this.cachedCanvases=new k(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=mt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=St,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(i,r=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):r}beginDrawing({transform:i,viewport:r,transparency:m=!1,background:F=null}){const L=this.ctx.canvas.width,x=this.ctx.canvas.height,Z=this.ctx.fillStyle;if(this.ctx.fillStyle=F||"#ffffff",this.ctx.fillRect(0,0,L,x),this.ctx.fillStyle=Z,m){const mt=this.cachedCanvases.getCanvas("transparent",L,x);this.compositeCtx=this.ctx,this.transparentCanvas=mt.canvas,this.ctx=mt.context,this.ctx.save(),this.ctx.transform(...(0,T.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),u(this.ctx),i&&(this.ctx.transform(...i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=(0,T.getCurrentTransform)(this.ctx)}executeOperatorList(i,r,m,F){const L=i.argsArray,x=i.fnArray;let Z=r||0;const mt=L.length;if(mt===Z)return Z;const St=mt-Z>W&&typeof m=="function",Et=St?Date.now()+f:0;let Pt=0;const xt=this.commonObjs,Ft=this.objs;let ct;for(;;){if(F!==void 0&&Z===F.nextBreakPoint)return F.breakIt(Z,m),Z;if(ct=x[Z],ct!==d.OPS.dependency)this[ct].apply(this,L[Z]);else for(const ut of L[Z]){const A=ut.startsWith("g_")?xt:Ft;if(!A.has(ut))return A.get(ut,m),Z}if(Z++,Z===mt)return Z;if(St&&++Pt>W){if(Date.now()>Et)return m(),Z;Pt=0}}}endDrawing(){Q(this,bt,Vi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const i of this._cachedBitmapsMap.values()){for(const r of i.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);i.clear()}this._cachedBitmapsMap.clear(),Q(this,bt,Gi).call(this)}_scaleImage(i,r){const m=i.width,F=i.height;let L=Math.max(Math.hypot(r[0],r[1]),1),x=Math.max(Math.hypot(r[2],r[3]),1),Z=m,mt=F,St="prescale1",Et,Pt;for(;L>2&&Z>1||x>2&&mt>1;){let xt=Z,Ft=mt;L>2&&Z>1&&(xt=Z>=16384?Math.floor(Z/2)-1||1:Math.ceil(Z/2),L/=Z/xt),x>2&&mt>1&&(Ft=mt>=16384?Math.floor(mt/2)-1||1:Math.ceil(mt)/2,x/=mt/Ft),Et=this.cachedCanvases.getCanvas(St,xt,Ft),Pt=Et.context,Pt.clearRect(0,0,xt,Ft),Pt.drawImage(i,0,0,Z,mt,0,0,xt,Ft),i=Et.canvas,Z=xt,mt=Ft,St=St==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:Z,paintHeight:mt}}_createMaskCanvas(i){const r=this.ctx,{width:m,height:F}=i,L=this.current.fillColor,x=this.current.patternFill,Z=(0,T.getCurrentTransform)(r);let mt,St,Et,Pt;if((i.bitmap||i.data)&&i.count>1){const et=i.bitmap||i.data.buffer;St=JSON.stringify(x?Z:[Z.slice(0,4),L]),mt=this._cachedBitmapsMap.get(et),mt||(mt=new Map,this._cachedBitmapsMap.set(et,mt));const Wt=mt.get(St);if(Wt&&!x){const Bt=Math.round(Math.min(Z[0],Z[2])+Z[4]),ge=Math.round(Math.min(Z[1],Z[3])+Z[5]);return{canvas:Wt,offsetX:Bt,offsetY:ge}}Et=Wt}Et||(Pt=this.cachedCanvases.getCanvas("maskCanvas",m,F),w(Pt.context,i));let xt=d.Util.transform(Z,[1/m,0,0,-1/F,0,0]);xt=d.Util.transform(xt,[1,0,0,1,0,-F]);const Ft=d.Util.applyTransform([0,0],xt),ct=d.Util.applyTransform([m,F],xt),ut=d.Util.normalizeRect([Ft[0],Ft[1],ct[0],ct[1]]),A=Math.round(ut[2]-ut[0])||1,I=Math.round(ut[3]-ut[1])||1,nt=this.cachedCanvases.getCanvas("fillCanvas",A,I),dt=nt.context,wt=Math.min(Ft[0],ct[0]),Lt=Math.min(Ft[1],ct[1]);dt.translate(-wt,-Lt),dt.transform(...xt),Et||(Et=this._scaleImage(Pt.canvas,(0,T.getCurrentTransformInverse)(dt)),Et=Et.img,mt&&x&&mt.set(St,Et)),dt.imageSmoothingEnabled=E((0,T.getCurrentTransform)(dt),i.interpolate),_(dt,Et,0,0,Et.width,Et.height,0,0,m,F),dt.globalCompositeOperation="source-in";const kt=d.Util.transform((0,T.getCurrentTransformInverse)(dt),[1,0,0,1,-wt,-Lt]);return dt.fillStyle=x?L.getPattern(r,this,kt,e.PathType.FILL):L,dt.fillRect(0,0,m,F),mt&&!x&&(this.cachedCanvases.delete("fillCanvas"),mt.set(St,nt.canvas)),{canvas:nt.canvas,offsetX:Math.round(wt),offsetY:Math.round(Lt)}}setLineWidth(i){i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=D[i]}setLineJoin(i){this.ctx.lineJoin=vt[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,r){const m=this.ctx;m.setLineDash!==void 0&&(m.setLineDash(i),m.lineDashOffset=r)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[r,m]of i)switch(r){case"LW":this.setLineWidth(m);break;case"LC":this.setLineCap(m);break;case"LJ":this.setLineJoin(m);break;case"ML":this.setMiterLimit(m);break;case"D":this.setDash(m[0],m[1]);break;case"RI":this.setRenderingIntent(m);break;case"FL":this.setFlatness(m);break;case"Font":this.setFont(m[0],m[1]);break;case"CA":this.current.strokeAlpha=m;break;case"ca":this.current.fillAlpha=m,this.ctx.globalAlpha=m;break;case"BM":this.ctx.globalCompositeOperation=m;break;case"SMask":this.current.activeSMask=m?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(m);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,r=this.ctx.canvas.height,m="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(m,i,r);this.suspendedCtx=this.ctx,this.ctx=F.context;const L=this.ctx;L.setTransform(...(0,T.getCurrentTransform)(this.suspendedCtx)),s(this.suspendedCtx,L),b(L,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),s(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,m=this.suspendedCtx;o(m,r,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(s(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),s(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(i,r,m,F,L,x){this.ctx.transform(i,r,m,F,L,x),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,r,m){const F=this.ctx,L=this.current;let x=L.x,Z=L.y,mt,St;const Et=(0,T.getCurrentTransform)(F),Pt=Et[0]===0&&Et[3]===0||Et[1]===0&&Et[2]===0,xt=Pt?m.slice(0):null;for(let Ft=0,ct=0,ut=i.length;Ft<ut;Ft++)switch(i[Ft]|0){case d.OPS.rectangle:x=r[ct++],Z=r[ct++];const A=r[ct++],I=r[ct++],nt=x+A,dt=Z+I;F.moveTo(x,Z),A===0||I===0?F.lineTo(nt,dt):(F.lineTo(nt,Z),F.lineTo(nt,dt),F.lineTo(x,dt)),Pt||L.updateRectMinMax(Et,[x,Z,nt,dt]),F.closePath();break;case d.OPS.moveTo:x=r[ct++],Z=r[ct++],F.moveTo(x,Z),Pt||L.updatePathMinMax(Et,x,Z);break;case d.OPS.lineTo:x=r[ct++],Z=r[ct++],F.lineTo(x,Z),Pt||L.updatePathMinMax(Et,x,Z);break;case d.OPS.curveTo:mt=x,St=Z,x=r[ct+4],Z=r[ct+5],F.bezierCurveTo(r[ct],r[ct+1],r[ct+2],r[ct+3],x,Z),L.updateCurvePathMinMax(Et,mt,St,r[ct],r[ct+1],r[ct+2],r[ct+3],x,Z,xt),ct+=6;break;case d.OPS.curveTo2:mt=x,St=Z,F.bezierCurveTo(x,Z,r[ct],r[ct+1],r[ct+2],r[ct+3]),L.updateCurvePathMinMax(Et,mt,St,x,Z,r[ct],r[ct+1],r[ct+2],r[ct+3],xt),x=r[ct+2],Z=r[ct+3],ct+=4;break;case d.OPS.curveTo3:mt=x,St=Z,x=r[ct+2],Z=r[ct+3],F.bezierCurveTo(r[ct],r[ct+1],x,Z,x,Z),L.updateCurvePathMinMax(Et,mt,St,r[ct],r[ct+1],x,Z,x,Z,xt),ct+=4;break;case d.OPS.closePath:F.closePath();break}Pt&&L.updateScalingPathMinMax(Et,xt),L.setCurrentPoint(x,Z)}closePath(){this.ctx.closePath()}stroke(i=!0){const r=this.ctx,m=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof m=="object"&&(m!=null&&m.getPattern)?(r.save(),r.strokeStyle=m.getPattern(r,this,(0,T.getCurrentTransformInverse)(r),e.PathType.STROKE),this.rescaleAndStroke(!1),r.restore()):this.rescaleAndStroke(!0)),i&&this.consumePath(this.current.getClippedPathBoundingBox()),r.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i=!0){const r=this.ctx,m=this.current.fillColor,F=this.current.patternFill;let L=!1;F&&(r.save(),r.fillStyle=m.getPattern(r,this,(0,T.getCurrentTransformInverse)(r),e.PathType.FILL),L=!0);const x=this.current.getClippedPathBoundingBox();this.contentVisible&&x!==null&&(this.pendingEOFill?(r.fill("evenodd"),this.pendingEOFill=!1):r.fill()),L&&r.restore(),i&&this.consumePath(x)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Y}eoClip(){this.pendingClip=it}beginText(){this.current.textMatrix=d.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,r=this.ctx;if(i===void 0){r.beginPath();return}r.save(),r.beginPath();for(const m of i)r.setTransform(...m.transform),r.translate(m.x,m.y),m.addToPath(r,m.fontSize);r.restore(),r.clip(),r.beginPath(),delete this.pendingTextPaths}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,r){var Et;const m=this.commonObjs.get(i),F=this.current;if(!m)throw new Error(`Can't find font for ${i}`);if(F.fontMatrix=m.fontMatrix||d.FONT_IDENTITY_MATRIX,(F.fontMatrix[0]===0||F.fontMatrix[3]===0)&&(0,d.warn)("Invalid font matrix for font "+i),r<0?(r=-r,F.fontDirection=-1):F.fontDirection=1,this.current.font=m,this.current.fontSize=r,m.isType3Font)return;const L=m.loadedName||"sans-serif",x=((Et=m.systemFontInfo)==null?void 0:Et.css)||`"${L}", ${m.fallbackName}`;let Z="normal";m.black?Z="900":m.bold&&(Z="bold");const mt=m.italic?"italic":"normal";let St=r;r<Rt?St=Rt:r>G&&(St=G),this.current.fontSizeScale=r/St,this.ctx.font=`${mt} ${Z} ${St}px ${x}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,r){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=r}setLeadingMoveText(i,r){this.setLeading(-r),this.moveText(i,r)}setTextMatrix(i,r,m,F,L,x){this.current.textMatrix=[i,r,m,F,L,x],this.current.textMatrixScale=Math.hypot(i,r),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,r,m,F){const L=this.ctx,x=this.current,Z=x.font,mt=x.textRenderingMode,St=x.fontSize/x.fontSizeScale,Et=mt&d.TextRenderingMode.FILL_STROKE_MASK,Pt=!!(mt&d.TextRenderingMode.ADD_TO_PATH_FLAG),xt=x.patternFill&&!Z.missingFile;let Ft;(Z.disableFontFace||Pt||xt)&&(Ft=Z.getPathGenerator(this.commonObjs,i)),Z.disableFontFace||xt?(L.save(),L.translate(r,m),L.beginPath(),Ft(L,St),F&&L.setTransform(...F),(Et===d.TextRenderingMode.FILL||Et===d.TextRenderingMode.FILL_STROKE)&&L.fill(),(Et===d.TextRenderingMode.STROKE||Et===d.TextRenderingMode.FILL_STROKE)&&L.stroke(),L.restore()):((Et===d.TextRenderingMode.FILL||Et===d.TextRenderingMode.FILL_STROKE)&&L.fillText(i,r,m),(Et===d.TextRenderingMode.STROKE||Et===d.TextRenderingMode.FILL_STROKE)&&L.strokeText(i,r,m)),Pt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,T.getCurrentTransform)(L),x:r,y:m,fontSize:St,addToPath:Ft})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const r=i.getImageData(0,0,10,10).data;let m=!1;for(let F=3;F<r.length;F+=4)if(r[F]>0&&r[F]<255){m=!0;break}return(0,d.shadow)(this,"isFontSubpixelAAEnabled",m)}showText(i){const r=this.current,m=r.font;if(m.isType3Font)return this.showType3Text(i);const F=r.fontSize;if(F===0)return;const L=this.ctx,x=r.fontSizeScale,Z=r.charSpacing,mt=r.wordSpacing,St=r.fontDirection,Et=r.textHScale*St,Pt=i.length,xt=m.vertical,Ft=xt?1:-1,ct=m.defaultVMetrics,ut=F*r.fontMatrix[0],A=r.textRenderingMode===d.TextRenderingMode.FILL&&!m.disableFontFace&&!r.patternFill;L.save(),L.transform(...r.textMatrix),L.translate(r.x,r.y+r.textRise),St>0?L.scale(Et,-1):L.scale(Et,1);let I;if(r.patternFill){L.save();const kt=r.fillColor.getPattern(L,this,(0,T.getCurrentTransformInverse)(L),e.PathType.FILL);I=(0,T.getCurrentTransform)(L),L.restore(),L.fillStyle=kt}let nt=r.lineWidth;const dt=r.textMatrixScale;if(dt===0||nt===0){const kt=r.textRenderingMode&d.TextRenderingMode.FILL_STROKE_MASK;(kt===d.TextRenderingMode.STROKE||kt===d.TextRenderingMode.FILL_STROKE)&&(nt=this.getSinglePixelWidth())}else nt/=dt;if(x!==1&&(L.scale(x,x),nt/=x),L.lineWidth=nt,m.isInvalidPDFjsFont){const kt=[];let et=0;for(const Wt of i)kt.push(Wt.unicode),et+=Wt.width;L.fillText(kt.join(""),0,0),r.x+=et*ut*Et,L.restore(),this.compose();return}let wt=0,Lt;for(Lt=0;Lt<Pt;++Lt){const kt=i[Lt];if(typeof kt=="number"){wt+=Ft*kt*F/1e3;continue}let et=!1;const Wt=(kt.isSpace?mt:0)+Z,Bt=kt.fontChar,ge=kt.accent;let le,Pe,$t=kt.width;if(xt){const ye=kt.vmetric||ct,De=-(kt.vmetric?ye[1]:$t*.5)*ut,Tt=ye[2]*ut;$t=ye?-ye[0]:$t,le=De/x,Pe=(wt+Tt)/x}else le=wt/x,Pe=0;if(m.remeasure&&$t>0){const ye=L.measureText(Bt).width*1e3/F*x;if($t<ye&&this.isFontSubpixelAAEnabled){const De=$t/ye;et=!0,L.save(),L.scale(De,1),le/=De}else $t!==ye&&(le+=($t-ye)/2e3*F/x)}if(this.contentVisible&&(kt.isInFont||m.missingFile)){if(A&&!ge)L.fillText(Bt,le,Pe);else if(this.paintChar(Bt,le,Pe,I),ge){const ye=le+F*ge.offset.x/x,De=Pe-F*ge.offset.y/x;this.paintChar(ge.fontChar,ye,De,I)}}const ie=xt?$t*ut-Wt*St:$t*ut+Wt*St;wt+=ie,et&&L.restore()}xt?r.y-=wt:r.x+=wt*Et,L.restore(),this.compose()}showType3Text(i){const r=this.ctx,m=this.current,F=m.font,L=m.fontSize,x=m.fontDirection,Z=F.vertical?1:-1,mt=m.charSpacing,St=m.wordSpacing,Et=m.textHScale*x,Pt=m.fontMatrix||d.FONT_IDENTITY_MATRIX,xt=i.length,Ft=m.textRenderingMode===d.TextRenderingMode.INVISIBLE;let ct,ut,A,I;if(!(Ft||L===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),r.transform(...m.textMatrix),r.translate(m.x,m.y),r.scale(Et,x),ct=0;ct<xt;++ct){if(ut=i[ct],typeof ut=="number"){I=Z*ut*L/1e3,this.ctx.translate(I,0),m.x+=I*Et;continue}const nt=(ut.isSpace?St:0)+mt,dt=F.charProcOperatorList[ut.operatorListId];if(!dt){(0,d.warn)(`Type3 character "${ut.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ut,this.save(),r.scale(L,L),r.transform(...Pt),this.executeOperatorList(dt),this.restore()),A=d.Util.applyTransform([ut.width,0],Pt)[0]*L+nt,r.translate(A,0),m.x+=A*Et}r.restore(),this.processingType3=null}}setCharWidth(i,r){}setCharWidthAndBounds(i,r,m,F,L,x){this.ctx.rect(m,F,L-m,x-F),this.ctx.clip(),this.endPath()}getColorN_Pattern(i){let r;if(i[0]==="TilingPattern"){const m=i[1],F=this.baseTransform||(0,T.getCurrentTransform)(this.ctx),L={createCanvasGraphics:x=>new lt(x,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};r=new e.TilingPattern(i,m,this.ctx,L,F)}else r=this._getPattern(i[1],i[2]);return r}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,r,m){const F=d.Util.makeHexColor(i,r,m);this.ctx.strokeStyle=F,this.current.strokeColor=F}setFillRGBColor(i,r,m){const F=d.Util.makeHexColor(i,r,m);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}_getPattern(i,r=null){let m;return this.cachedPatterns.has(i)?m=this.cachedPatterns.get(i):(m=(0,e.getShadingPattern)(this.getObject(i)),this.cachedPatterns.set(i,m)),r&&(m.matrix=r),m}shadingFill(i){if(!this.contentVisible)return;const r=this.ctx;this.save();const m=this._getPattern(i);r.fillStyle=m.getPattern(r,this,(0,T.getCurrentTransformInverse)(r),e.PathType.SHADING);const F=(0,T.getCurrentTransformInverse)(r);if(F){const{width:L,height:x}=r.canvas,[Z,mt,St,Et]=d.Util.getAxialAlignedBoundingBox([0,0,L,x],F);this.ctx.fillRect(Z,mt,St-Z,Et-mt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,d.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,d.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(i,r){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(i)&&i.length===6&&this.transform(...i),this.baseTransform=(0,T.getCurrentTransform)(this.ctx),r)){const m=r[2]-r[0],F=r[3]-r[1];this.ctx.rect(r[0],r[1],m,F),this.current.updateRectMinMax((0,T.getCurrentTransform)(this.ctx),r),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;i.isolated||(0,d.info)("TODO: Support non-isolated groups."),i.knockout&&(0,d.warn)("Knockout groups not supported.");const m=(0,T.getCurrentTransform)(r);if(i.matrix&&r.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let F=d.Util.getAxialAlignedBoundingBox(i.bbox,(0,T.getCurrentTransform)(r));const L=[0,0,r.canvas.width,r.canvas.height];F=d.Util.intersect(F,L)||[0,0,0,0];const x=Math.floor(F[0]),Z=Math.floor(F[1]);let mt=Math.max(Math.ceil(F[2])-x,1),St=Math.max(Math.ceil(F[3])-Z,1),Et=1,Pt=1;mt>O&&(Et=mt/O,mt=O),St>O&&(Pt=St/O,St=O),this.current.startNewPathAndClipBox([0,0,mt,St]);let xt="groupAt"+this.groupLevel;i.smask&&(xt+="_smask_"+this.smaskCounter++%2);const Ft=this.cachedCanvases.getCanvas(xt,mt,St),ct=Ft.context;ct.scale(1/Et,1/Pt),ct.translate(-x,-Z),ct.transform(...m),i.smask?this.smaskStack.push({canvas:Ft.canvas,context:ct,offsetX:x,offsetY:Z,scaleX:Et,scaleY:Pt,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(x,Z),r.scale(Et,Pt),r.save()),s(r,ct),this.ctx=ct,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,m=this.groupStack.pop();if(this.ctx=m,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const F=(0,T.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...F);const L=d.Util.getAxialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],F);this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(L)}}beginAnnotation(i,r,m,F,L){if(Q(this,bt,Vi).call(this),u(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(r)&&r.length===4){const x=r[2]-r[0],Z=r[3]-r[1];if(L&&this.annotationCanvasMap){m=m.slice(),m[4]-=r[0],m[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=x,r[3]=Z;const[mt,St]=d.Util.singularValueDecompose2dScale((0,T.getCurrentTransform)(this.ctx)),{viewportScale:Et}=this,Pt=Math.ceil(x*this.outputScaleX*Et),xt=Math.ceil(Z*this.outputScaleY*Et);this.annotationCanvas=this.canvasFactory.create(Pt,xt);const{canvas:Ft,context:ct}=this.annotationCanvas;this.annotationCanvasMap.set(i,Ft),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ct,this.ctx.save(),this.ctx.setTransform(mt,0,0,-St,0,Z*St),u(this.ctx)}else u(this.ctx),this.ctx.rect(r[0],r[1],x,Z),this.ctx.clip(),this.endPath()}this.current=new S(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...m),this.transform(...F)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Q(this,bt,Gi).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(i){if(!this.contentVisible)return;const r=i.count;i=this.getObject(i.data,i),i.count=r;const m=this.ctx,F=this.processingType3;if(F&&(F.compiled===void 0&&(F.compiled=g(i)),F.compiled)){F.compiled(m);return}const L=this._createMaskCanvas(i),x=L.canvas;m.save(),m.setTransform(1,0,0,1,0,0),m.drawImage(x,L.offsetX,L.offsetY),m.restore(),this.compose()}paintImageMaskXObjectRepeat(i,r,m=0,F=0,L,x){if(!this.contentVisible)return;i=this.getObject(i.data,i);const Z=this.ctx;Z.save();const mt=(0,T.getCurrentTransform)(Z);Z.transform(r,m,F,L,0,0);const St=this._createMaskCanvas(i);Z.setTransform(1,0,0,1,St.offsetX-mt[4],St.offsetY-mt[5]);for(let Et=0,Pt=x.length;Et<Pt;Et+=2){const xt=d.Util.transform(mt,[r,m,F,L,x[Et],x[Et+1]]),[Ft,ct]=d.Util.applyTransform([0,0],xt);Z.drawImage(St.canvas,Ft,ct)}Z.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const r=this.ctx,m=this.current.fillColor,F=this.current.patternFill;for(const L of i){const{data:x,width:Z,height:mt,transform:St}=L,Et=this.cachedCanvases.getCanvas("maskCanvas",Z,mt),Pt=Et.context;Pt.save();const xt=this.getObject(x,L);w(Pt,xt),Pt.globalCompositeOperation="source-in",Pt.fillStyle=F?m.getPattern(Pt,this,(0,T.getCurrentTransformInverse)(r),e.PathType.FILL):m,Pt.fillRect(0,0,Z,mt),Pt.restore(),r.save(),r.transform(...St),r.scale(1,-1),_(r,Et.canvas,0,0,Z,mt,0,-1,1,1),r.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const r=this.getObject(i);if(!r){(0,d.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(r)}paintImageXObjectRepeat(i,r,m,F){if(!this.contentVisible)return;const L=this.getObject(i);if(!L){(0,d.warn)("Dependent image isn't ready yet");return}const x=L.width,Z=L.height,mt=[];for(let St=0,Et=F.length;St<Et;St+=2)mt.push({transform:[r,0,0,m,F[St],F[St+1]],x:0,y:0,w:x,h:Z});this.paintInlineImageXObjectGroup(L,mt)}applyTransferMapsToCanvas(i){return this.current.transferMaps!=="none"&&(i.filter=this.current.transferMaps,i.drawImage(i.canvas,0,0),i.filter="none"),i.canvas}applyTransferMapsToBitmap(i){if(this.current.transferMaps==="none")return i.bitmap;const{bitmap:r,width:m,height:F}=i,L=this.cachedCanvases.getCanvas("inlineImage",m,F),x=L.context;return x.filter=this.current.transferMaps,x.drawImage(r,0,0),x.filter="none",L.canvas}paintInlineImageXObject(i){if(!this.contentVisible)return;const r=i.width,m=i.height,F=this.ctx;if(this.save(),!d.isNodeJS){const{filter:Z}=F;Z!=="none"&&Z!==""&&(F.filter="none")}F.scale(1/r,-1/m);let L;if(i.bitmap)L=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)L=i;else{const mt=this.cachedCanvases.getCanvas("inlineImage",r,m).context;B(mt,i),L=this.applyTransferMapsToCanvas(mt)}const x=this._scaleImage(L,(0,T.getCurrentTransformInverse)(F));F.imageSmoothingEnabled=E((0,T.getCurrentTransform)(F),i.interpolate),_(F,x.img,0,0,x.paintWidth,x.paintHeight,0,-m,r,m),this.compose(),this.restore()}paintInlineImageXObjectGroup(i,r){if(!this.contentVisible)return;const m=this.ctx;let F;if(i.bitmap)F=i.bitmap;else{const L=i.width,x=i.height,mt=this.cachedCanvases.getCanvas("inlineImage",L,x).context;B(mt,i),F=this.applyTransferMapsToCanvas(mt)}for(const L of r)m.save(),m.transform(...L.transform),m.scale(1,-1),_(m,F,L.x,L.y,L.w,L.h,0,-1,1,1),m.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,r){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,r){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const m=this.ctx;this.pendingClip&&(r||(this.pendingClip===it?m.clip("evenodd"):m.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),m.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const i=(0,T.getCurrentTransform)(this.ctx);if(i[1]===0&&i[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3]));else{const r=Math.abs(i[0]*i[3]-i[2]*i[1]),m=Math.hypot(i[0],i[2]),F=Math.hypot(i[1],i[3]);this._cachedGetSinglePixelWidth=Math.max(m,F)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:i}=this.current,{a:r,b:m,c:F,d:L}=this.ctx.getTransform();let x,Z;if(m===0&&F===0){const mt=Math.abs(r),St=Math.abs(L);if(mt===St)if(i===0)x=Z=1/mt;else{const Et=mt*i;x=Z=Et<1?1/Et:1}else if(i===0)x=1/mt,Z=1/St;else{const Et=mt*i,Pt=St*i;x=Et<1?1/Et:1,Z=Pt<1?1/Pt:1}}else{const mt=Math.abs(r*L-m*F),St=Math.hypot(r,m),Et=Math.hypot(F,L);if(i===0)x=Et/mt,Z=St/mt;else{const Pt=i*mt;x=Et>Pt?Et/Pt:1,Z=St>Pt?St/Pt:1}}this._cachedScaleForStroking[0]=x,this._cachedScaleForStroking[1]=Z}return this._cachedScaleForStroking}rescaleAndStroke(i){const{ctx:r}=this,{lineWidth:m}=this.current,[F,L]=this.getScaleForStroking();if(r.lineWidth=m||1,F===1&&L===1){r.stroke();return}const x=r.getLineDash();if(i&&r.save(),r.scale(F,L),x.length>0){const Z=Math.max(F,L);r.setLineDash(x.map(mt=>mt/Z)),r.lineDashOffset/=Z}r.stroke(),i&&r.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};bt=new WeakSet,Vi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Gi=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const r=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}};let q=lt;v.CanvasGraphics=q;for(const P in d.OPS)q.prototype[P]!==void 0&&(q.prototype[d.OPS[P]]=q.prototype[P])},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.TilingPattern=v.PathType=void 0,v.getShadingPattern=y;var d=At(1),T=At(6);const e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};v.PathType=e;function tt(g,S){if(!S)return;const B=S[2]-S[0],w=S[3]-S[1],s=new Path2D;s.rect(S[0],S[1],B,w),g.clip(s)}class Rt{constructor(){this.constructor===Rt&&(0,d.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,d.unreachable)("Abstract method `getPattern` called.")}}class G extends Rt{constructor(S){super(),this._type=S[1],this._bbox=S[2],this._colorStops=S[3],this._p0=S[4],this._p1=S[5],this._r0=S[6],this._r1=S[7],this.matrix=null}_createGradient(S){let B;this._type==="axial"?B=S.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(B=S.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const w of this._colorStops)B.addColorStop(w[0],w[1]);return B}getPattern(S,B,w,s){let u;if(s===e.STROKE||s===e.FILL){const a=B.current.getClippedPathBoundingBox(s,(0,T.getCurrentTransform)(S))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,N=B.cachedCanvases.getCanvas("pattern",l,c,!0),o=N.context;o.clearRect(0,0,o.canvas.width,o.canvas.height),o.beginPath(),o.rect(0,0,o.canvas.width,o.canvas.height),o.translate(-a[0],-a[1]),w=d.Util.transform(w,[1,0,0,1,a[0],a[1]]),o.transform(...B.baseTransform),this.matrix&&o.transform(...this.matrix),tt(o,this._bbox),o.fillStyle=this._createGradient(o),o.fill(),u=S.createPattern(N.canvas,"no-repeat");const E=new DOMMatrix(w);u.setTransform(E)}else tt(S,this._bbox),u=this._createGradient(S);return u}}function O(g,S,B,w,s,u,a,l){const c=S.coords,N=S.colors,o=g.data,E=g.width*4;let D;c[B+1]>c[w+1]&&(D=B,B=w,w=D,D=u,u=a,a=D),c[w+1]>c[s+1]&&(D=w,w=s,s=D,D=a,a=l,l=D),c[B+1]>c[w+1]&&(D=B,B=w,w=D,D=u,u=a,a=D);const vt=(c[B]+S.offsetX)*S.scaleX,Y=(c[B+1]+S.offsetY)*S.scaleY,it=(c[w]+S.offsetX)*S.scaleX,q=(c[w+1]+S.offsetY)*S.scaleY,bt=(c[s]+S.offsetX)*S.scaleX,M=(c[s+1]+S.offsetY)*S.scaleY;if(Y>=M)return;const X=N[u],lt=N[u+1],P=N[u+2],i=N[a],r=N[a+1],m=N[a+2],F=N[l],L=N[l+1],x=N[l+2],Z=Math.round(Y),mt=Math.round(M);let St,Et,Pt,xt,Ft,ct,ut,A;for(let I=Z;I<=mt;I++){if(I<q){const kt=I<Y?0:(Y-I)/(Y-q);St=vt-(vt-it)*kt,Et=X-(X-i)*kt,Pt=lt-(lt-r)*kt,xt=P-(P-m)*kt}else{let kt;I>M?kt=1:q===M?kt=0:kt=(q-I)/(q-M),St=it-(it-bt)*kt,Et=i-(i-F)*kt,Pt=r-(r-L)*kt,xt=m-(m-x)*kt}let nt;I<Y?nt=0:I>M?nt=1:nt=(Y-I)/(Y-M),Ft=vt-(vt-bt)*nt,ct=X-(X-F)*nt,ut=lt-(lt-L)*nt,A=P-(P-x)*nt;const dt=Math.round(Math.min(St,Ft)),wt=Math.round(Math.max(St,Ft));let Lt=E*I+dt*4;for(let kt=dt;kt<=wt;kt++)nt=(St-kt)/(St-Ft),nt<0?nt=0:nt>1&&(nt=1),o[Lt++]=Et-(Et-ct)*nt|0,o[Lt++]=Pt-(Pt-ut)*nt|0,o[Lt++]=xt-(xt-A)*nt|0,o[Lt++]=255}}function f(g,S,B){const w=S.coords,s=S.colors;let u,a;switch(S.type){case"lattice":const l=S.verticesPerRow,c=Math.floor(w.length/l)-1,N=l-1;for(u=0;u<c;u++){let o=u*l;for(let E=0;E<N;E++,o++)O(g,B,w[o],w[o+1],w[o+l],s[o],s[o+1],s[o+l]),O(g,B,w[o+l+1],w[o+1],w[o+l],s[o+l+1],s[o+1],s[o+l])}break;case"triangles":for(u=0,a=w.length;u<a;u+=3)O(g,B,w[u],w[u+1],w[u+2],s[u],s[u+1],s[u+2]);break;default:throw new Error("illegal figure")}}class W extends Rt{constructor(S){super(),this._coords=S[2],this._colors=S[3],this._figures=S[4],this._bounds=S[5],this._bbox=S[7],this._background=S[8],this.matrix=null}_createMeshCanvas(S,B,w){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),N=Math.ceil(this._bounds[2])-l,o=Math.ceil(this._bounds[3])-c,E=Math.min(Math.ceil(Math.abs(N*S[0]*1.1)),3e3),D=Math.min(Math.ceil(Math.abs(o*S[1]*1.1)),3e3),vt=N/E,Y=o/D,it={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/vt,scaleY:1/Y},q=E+2*2,bt=D+2*2,M=w.getCanvas("mesh",q,bt,!1),X=M.context,lt=X.createImageData(E,D);if(B){const i=lt.data;for(let r=0,m=i.length;r<m;r+=4)i[r]=B[0],i[r+1]=B[1],i[r+2]=B[2],i[r+3]=255}for(const i of this._figures)f(lt,i,it);return X.putImageData(lt,2,2),{canvas:M.canvas,offsetX:l-2*vt,offsetY:c-2*Y,scaleX:vt,scaleY:Y}}getPattern(S,B,w,s){tt(S,this._bbox);let u;if(s===e.SHADING)u=d.Util.singularValueDecompose2dScale((0,T.getCurrentTransform)(S));else if(u=d.Util.singularValueDecompose2dScale(B.baseTransform),this.matrix){const l=d.Util.singularValueDecompose2dScale(this.matrix);u=[u[0]*l[0],u[1]*l[1]]}const a=this._createMeshCanvas(u,s===e.SHADING?null:this._background,B.cachedCanvases);return s!==e.SHADING&&(S.setTransform(...B.baseTransform),this.matrix&&S.transform(...this.matrix)),S.translate(a.offsetX,a.offsetY),S.scale(a.scaleX,a.scaleY),S.createPattern(a.canvas,"no-repeat")}}class j extends Rt{getPattern(){return"hotpink"}}function y(g){switch(g[0]){case"RadialAxial":return new G(g);case"Mesh":return new W(g);case"Dummy":return new j}throw new Error(`Unknown IR type: ${g[0]}`)}const b={COLORED:1,UNCOLORED:2},_=class _{constructor(S,B,w,s,u){this.operatorList=S[2],this.matrix=S[3]||[1,0,0,1,0,0],this.bbox=S[4],this.xstep=S[5],this.ystep=S[6],this.paintType=S[7],this.tilingType=S[8],this.color=B,this.ctx=w,this.canvasGraphicsFactory=s,this.baseTransform=u}createPatternCanvas(S){const B=this.operatorList,w=this.bbox,s=this.xstep,u=this.ystep,a=this.paintType,l=this.tilingType,c=this.color,N=this.canvasGraphicsFactory;(0,d.info)("TilingType: "+l);const o=w[0],E=w[1],D=w[2],vt=w[3],Y=d.Util.singularValueDecompose2dScale(this.matrix),it=d.Util.singularValueDecompose2dScale(this.baseTransform),q=[Y[0]*it[0],Y[1]*it[1]],bt=this.getSizeAndScale(s,this.ctx.canvas.width,q[0]),M=this.getSizeAndScale(u,this.ctx.canvas.height,q[1]),X=S.cachedCanvases.getCanvas("pattern",bt.size,M.size,!0),lt=X.context,P=N.createCanvasGraphics(lt);P.groupLevel=S.groupLevel,this.setFillAndStrokeStyleToContext(P,a,c);let i=o,r=E,m=D,F=vt;return o<0&&(i=0,m+=Math.abs(o)),E<0&&(r=0,F+=Math.abs(E)),lt.translate(-(bt.scale*i),-(M.scale*r)),P.transform(bt.scale,0,0,M.scale,0,0),lt.save(),this.clipBbox(P,i,r,m,F),P.baseTransform=(0,T.getCurrentTransform)(P.ctx),P.executeOperatorList(B),P.endDrawing(),{canvas:X.canvas,scaleX:bt.scale,scaleY:M.scale,offsetX:i,offsetY:r}}getSizeAndScale(S,B,w){S=Math.abs(S);const s=Math.max(_.MAX_PATTERN_SIZE,B);let u=Math.ceil(S*w);return u>=s?u=s:w=u/S,{scale:w,size:u}}clipBbox(S,B,w,s,u){const a=s-B,l=u-w;S.ctx.rect(B,w,a,l),S.current.updateRectMinMax((0,T.getCurrentTransform)(S.ctx),[B,w,s,u]),S.clip(),S.endPath()}setFillAndStrokeStyleToContext(S,B,w){const s=S.ctx,u=S.current;switch(B){case b.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,u.fillColor=a.fillStyle,u.strokeColor=a.strokeStyle;break;case b.UNCOLORED:const l=d.Util.makeHexColor(w[0],w[1],w[2]);s.fillStyle=l,s.strokeStyle=l,u.fillColor=l,u.strokeColor=l;break;default:throw new d.FormatError(`Unsupported paint type: ${B}`)}}getPattern(S,B,w,s){let u=w;s!==e.SHADING&&(u=d.Util.transform(u,B.baseTransform),this.matrix&&(u=d.Util.transform(u,this.matrix)));const a=this.createPatternCanvas(B);let l=new DOMMatrix(u);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=S.createPattern(a.canvas,"repeat");return c.setTransform(l),c}};qe(_,"MAX_PATTERN_SIZE",3e3);let k=_;v.TilingPattern=k},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.convertBlackAndWhiteToRGBA=e,v.convertToRGBA=T,v.grayToRGBA=Rt;var d=At(1);function T(G){switch(G.kind){case d.ImageKind.GRAYSCALE_1BPP:return e(G);case d.ImageKind.RGB_24BPP:return tt(G)}return null}function e({src:G,srcPos:O=0,dest:f,width:W,height:j,nonBlackColor:y=4294967295,inverseDecode:b=!1}){const k=d.FeatureTest.isLittleEndian?4278190080:255,[_,g]=b?[y,k]:[k,y],S=W>>3,B=W&7,w=G.length;f=new Uint32Array(f.buffer);let s=0;for(let u=0;u<j;u++){for(const l=O+S;O<l;O++){const c=O<w?G[O]:255;f[s++]=c&128?g:_,f[s++]=c&64?g:_,f[s++]=c&32?g:_,f[s++]=c&16?g:_,f[s++]=c&8?g:_,f[s++]=c&4?g:_,f[s++]=c&2?g:_,f[s++]=c&1?g:_}if(B===0)continue;const a=O<w?G[O++]:255;for(let l=0;l<B;l++)f[s++]=a&1<<7-l?g:_}return{srcPos:O,destPos:s}}function tt({src:G,srcPos:O=0,dest:f,destPos:W=0,width:j,height:y}){let b=0;const k=G.length>>2,_=new Uint32Array(G.buffer,O,k);if(d.FeatureTest.isLittleEndian){for(;b<k-2;b+=3,W+=4){const g=_[b],S=_[b+1],B=_[b+2];f[W]=g|4278190080,f[W+1]=g>>>24|S<<8|4278190080,f[W+2]=S>>>16|B<<16|4278190080,f[W+3]=B>>>8|4278190080}for(let g=b*4,S=G.length;g<S;g+=3)f[W++]=G[g]|G[g+1]<<8|G[g+2]<<16|4278190080}else{for(;b<k-2;b+=3,W+=4){const g=_[b],S=_[b+1],B=_[b+2];f[W]=g|255,f[W+1]=g<<24|S>>>8|255,f[W+2]=S<<16|B>>>16|255,f[W+3]=B<<8|255}for(let g=b*4,S=G.length;g<S;g+=3)f[W++]=G[g]<<24|G[g+1]<<16|G[g+2]<<8|255}return{srcPos:O,destPos:W}}function Rt(G,O){if(d.FeatureTest.isLittleEndian)for(let f=0,W=G.length;f<W;f++)O[f]=G[f]*65793|4278190080;else for(let f=0,W=G.length;f<W;f++)O[f]=G[f]*16843008|255}},(h,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.GlobalWorkerOptions=void 0;const At=Object.create(null);v.GlobalWorkerOptions=At,At.workerPort=null,At.workerSrc=""},(h,v,At)=>{var G,Br,Hr,li;Object.defineProperty(v,"__esModule",{value:!0}),v.MessageHandler=void 0;var d=At(1);const T={DATA:1,ERROR:2},e={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function tt(j){switch(j instanceof Error||typeof j=="object"&&j!==null||(0,d.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),j.name){case"AbortException":return new d.AbortException(j.message);case"MissingPDFException":return new d.MissingPDFException(j.message);case"PasswordException":return new d.PasswordException(j.message,j.code);case"UnexpectedResponseException":return new d.UnexpectedResponseException(j.message,j.status);case"UnknownErrorException":return new d.UnknownErrorException(j.message,j.details);default:return new d.UnknownErrorException(j.message,j.toString())}}class Rt{constructor(y,b,k){pt(this,G);this.sourceName=y,this.targetName=b,this.comObj=k,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=_=>{const g=_.data;if(g.targetName!==this.sourceName)return;if(g.stream){Q(this,G,Hr).call(this,g);return}if(g.callback){const B=g.callbackId,w=this.callbackCapabilities[B];if(!w)throw new Error(`Cannot resolve callback ${B}`);if(delete this.callbackCapabilities[B],g.callback===T.DATA)w.resolve(g.data);else if(g.callback===T.ERROR)w.reject(tt(g.reason));else throw new Error("Unexpected callback case");return}const S=this.actionHandler[g.action];if(!S)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const B=this.sourceName,w=g.sourceName;new Promise(function(s){s(S(g.data))}).then(function(s){k.postMessage({sourceName:B,targetName:w,callback:T.DATA,callbackId:g.callbackId,data:s})},function(s){k.postMessage({sourceName:B,targetName:w,callback:T.ERROR,callbackId:g.callbackId,reason:tt(s)})});return}if(g.streamId){Q(this,G,Br).call(this,g);return}S(g.data)},k.addEventListener("message",this._onComObjOnMessage)}on(y,b){const k=this.actionHandler;if(k[y])throw new Error(`There is already an actionName called "${y}"`);k[y]=b}send(y,b,k){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:b},k)}sendWithPromise(y,b,k){const _=this.callbackId++,g=new d.PromiseCapability;this.callbackCapabilities[_]=g;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:_,data:b},k)}catch(S){g.reject(S)}return g.promise}sendWithStream(y,b,k,_){const g=this.streamId++,S=this.sourceName,B=this.targetName,w=this.comObj;return new ReadableStream({start:s=>{const u=new d.PromiseCapability;return this.streamControllers[g]={controller:s,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},w.postMessage({sourceName:S,targetName:B,action:y,streamId:g,data:b,desiredSize:s.desiredSize},_),u.promise},pull:s=>{const u=new d.PromiseCapability;return this.streamControllers[g].pullCall=u,w.postMessage({sourceName:S,targetName:B,stream:e.PULL,streamId:g,desiredSize:s.desiredSize}),u.promise},cancel:s=>{(0,d.assert)(s instanceof Error,"cancel must have a valid reason");const u=new d.PromiseCapability;return this.streamControllers[g].cancelCall=u,this.streamControllers[g].isClosed=!0,w.postMessage({sourceName:S,targetName:B,stream:e.CANCEL,streamId:g,reason:tt(s)}),u.promise}},k)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}G=new WeakSet,Br=function(y){const b=y.streamId,k=this.sourceName,_=y.sourceName,g=this.comObj,S=this,B=this.actionHandler[y.action],w={enqueue(s,u=1,a){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=u,l>0&&this.desiredSize<=0&&(this.sinkCapability=new d.PromiseCapability,this.ready=this.sinkCapability.promise),g.postMessage({sourceName:k,targetName:_,stream:e.ENQUEUE,streamId:b,chunk:s},a)},close(){this.isCancelled||(this.isCancelled=!0,g.postMessage({sourceName:k,targetName:_,stream:e.CLOSE,streamId:b}),delete S.streamSinks[b])},error(s){(0,d.assert)(s instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,g.postMessage({sourceName:k,targetName:_,stream:e.ERROR,streamId:b,reason:tt(s)}))},sinkCapability:new d.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};w.sinkCapability.resolve(),w.ready=w.sinkCapability.promise,this.streamSinks[b]=w,new Promise(function(s){s(B(y.data,w))}).then(function(){g.postMessage({sourceName:k,targetName:_,stream:e.START_COMPLETE,streamId:b,success:!0})},function(s){g.postMessage({sourceName:k,targetName:_,stream:e.START_COMPLETE,streamId:b,reason:tt(s)})})},Hr=function(y){const b=y.streamId,k=this.sourceName,_=y.sourceName,g=this.comObj,S=this.streamControllers[b],B=this.streamSinks[b];switch(y.stream){case e.START_COMPLETE:y.success?S.startCall.resolve():S.startCall.reject(tt(y.reason));break;case e.PULL_COMPLETE:y.success?S.pullCall.resolve():S.pullCall.reject(tt(y.reason));break;case e.PULL:if(!B){g.postMessage({sourceName:k,targetName:_,stream:e.PULL_COMPLETE,streamId:b,success:!0});break}B.desiredSize<=0&&y.desiredSize>0&&B.sinkCapability.resolve(),B.desiredSize=y.desiredSize,new Promise(function(w){var s;w((s=B.onPull)==null?void 0:s.call(B))}).then(function(){g.postMessage({sourceName:k,targetName:_,stream:e.PULL_COMPLETE,streamId:b,success:!0})},function(w){g.postMessage({sourceName:k,targetName:_,stream:e.PULL_COMPLETE,streamId:b,reason:tt(w)})});break;case e.ENQUEUE:if((0,d.assert)(S,"enqueue should have stream controller"),S.isClosed)break;S.controller.enqueue(y.chunk);break;case e.CLOSE:if((0,d.assert)(S,"close should have stream controller"),S.isClosed)break;S.isClosed=!0,S.controller.close(),Q(this,G,li).call(this,S,b);break;case e.ERROR:(0,d.assert)(S,"error should have stream controller"),S.controller.error(tt(y.reason)),Q(this,G,li).call(this,S,b);break;case e.CANCEL_COMPLETE:y.success?S.cancelCall.resolve():S.cancelCall.reject(tt(y.reason)),Q(this,G,li).call(this,S,b);break;case e.CANCEL:if(!B)break;new Promise(function(w){var s;w((s=B.onCancel)==null?void 0:s.call(B,tt(y.reason)))}).then(function(){g.postMessage({sourceName:k,targetName:_,stream:e.CANCEL_COMPLETE,streamId:b,success:!0})},function(w){g.postMessage({sourceName:k,targetName:_,stream:e.CANCEL_COMPLETE,streamId:b,reason:tt(w)})}),B.sinkCapability.reject(tt(y.reason)),B.isCancelled=!0,delete this.streamSinks[b];break;default:throw new Error("Unexpected stream case")}},li=async function(y,b){var k,_,g;await Promise.allSettled([(k=y.startCall)==null?void 0:k.promise,(_=y.pullCall)==null?void 0:_.promise,(g=y.cancelCall)==null?void 0:g.promise]),delete this.streamControllers[b]},v.MessageHandler=Rt},(h,v,At)=>{var e,tt;Object.defineProperty(v,"__esModule",{value:!0}),v.Metadata=void 0;var d=At(1);class T{constructor({parsedData:G,rawData:O}){pt(this,e);pt(this,tt);gt(this,e,G),gt(this,tt,O)}getRaw(){return t(this,tt)}get(G){return t(this,e).get(G)??null}getAll(){return(0,d.objectFromMap)(t(this,e))}has(G){return t(this,e).has(G)}}e=new WeakMap,tt=new WeakMap,v.Metadata=T},(h,v,At)=>{var G,O,f,W,j,y,qi;Object.defineProperty(v,"__esModule",{value:!0}),v.OptionalContentConfig=void 0;var d=At(1),T=At(8);const e=Symbol("INTERNAL");class tt{constructor(_,g){pt(this,G,!0);this.name=_,this.intent=g}get visible(){return t(this,G)}_setVisible(_,g){_!==e&&(0,d.unreachable)("Internal method `_setVisible` called."),gt(this,G,g)}}G=new WeakMap;class Rt{constructor(_){pt(this,y);pt(this,O,null);pt(this,f,new Map);pt(this,W,null);pt(this,j,null);if(this.name=null,this.creator=null,_!==null){this.name=_.name,this.creator=_.creator,gt(this,j,_.order);for(const g of _.groups)t(this,f).set(g.id,new tt(g.name,g.intent));if(_.baseState==="OFF")for(const g of t(this,f).values())g._setVisible(e,!1);for(const g of _.on)t(this,f).get(g)._setVisible(e,!0);for(const g of _.off)t(this,f).get(g)._setVisible(e,!1);gt(this,W,this.getHash())}}isVisible(_){if(t(this,f).size===0)return!0;if(!_)return(0,d.warn)("Optional content group not defined."),!0;if(_.type==="OCG")return t(this,f).has(_.id)?t(this,f).get(_.id).visible:((0,d.warn)(`Optional content group not found: ${_.id}`),!0);if(_.type==="OCMD"){if(_.expression)return Q(this,y,qi).call(this,_.expression);if(!_.policy||_.policy==="AnyOn"){for(const g of _.ids){if(!t(this,f).has(g))return(0,d.warn)(`Optional content group not found: ${g}`),!0;if(t(this,f).get(g).visible)return!0}return!1}else if(_.policy==="AllOn"){for(const g of _.ids){if(!t(this,f).has(g))return(0,d.warn)(`Optional content group not found: ${g}`),!0;if(!t(this,f).get(g).visible)return!1}return!0}else if(_.policy==="AnyOff"){for(const g of _.ids){if(!t(this,f).has(g))return(0,d.warn)(`Optional content group not found: ${g}`),!0;if(!t(this,f).get(g).visible)return!0}return!1}else if(_.policy==="AllOff"){for(const g of _.ids){if(!t(this,f).has(g))return(0,d.warn)(`Optional content group not found: ${g}`),!0;if(t(this,f).get(g).visible)return!1}return!0}return(0,d.warn)(`Unknown optional content policy ${_.policy}.`),!0}return(0,d.warn)(`Unknown group type ${_.type}.`),!0}setVisibility(_,g=!0){if(!t(this,f).has(_)){(0,d.warn)(`Optional content group not found: ${_}`);return}t(this,f).get(_)._setVisible(e,!!g),gt(this,O,null)}get hasInitialVisibility(){return t(this,W)===null||this.getHash()===t(this,W)}getOrder(){return t(this,f).size?t(this,j)?t(this,j).slice():[...t(this,f).keys()]:null}getGroups(){return t(this,f).size>0?(0,d.objectFromMap)(t(this,f)):null}getGroup(_){return t(this,f).get(_)||null}getHash(){if(t(this,O)!==null)return t(this,O);const _=new T.MurmurHash3_64;for(const[g,S]of t(this,f))_.update(`${g}:${S.visible}`);return gt(this,O,_.hexdigest())}}O=new WeakMap,f=new WeakMap,W=new WeakMap,j=new WeakMap,y=new WeakSet,qi=function(_){const g=_.length;if(g<2)return!0;const S=_[0];for(let B=1;B<g;B++){const w=_[B];let s;if(Array.isArray(w))s=Q(this,y,qi).call(this,w);else if(t(this,f).has(w))s=t(this,f).get(w).visible;else return(0,d.warn)(`Optional content group not found: ${w}`),!0;switch(S){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return S==="And"},v.OptionalContentConfig=Rt},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PDFDataTransportStream=void 0;var d=At(1),T=At(6);class e{constructor({length:O,initialData:f,progressiveDone:W=!1,contentDispositionFilename:j=null,disableRange:y=!1,disableStream:b=!1},k){if((0,d.assert)(k,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=W,this._contentDispositionFilename=j,(f==null?void 0:f.length)>0){const _=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;this._queuedChunks.push(_)}this._pdfDataRangeTransport=k,this._isStreamingSupported=!b,this._isRangeSupported=!y,this._contentLength=O,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((_,g)=>{this._onReceiveData({begin:_,chunk:g})}),this._pdfDataRangeTransport.addProgressListener((_,g)=>{this._onProgress({loaded:_,total:g})}),this._pdfDataRangeTransport.addProgressiveReadListener(_=>{this._onReceiveData({chunk:_})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:O,chunk:f}){const W=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;if(O===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(W):this._queuedChunks.push(W);else{const j=this._rangeReaders.some(function(y){return y._begin!==O?!1:(y._enqueue(W),!0)});(0,d.assert)(j,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var O;return((O=this._fullRequestReader)==null?void 0:O._loaded)??0}_onProgress(O){var f,W,j,y;O.total===void 0?(W=(f=this._rangeReaders[0])==null?void 0:f.onProgress)==null||W.call(f,{loaded:O.loaded}):(y=(j=this._fullRequestReader)==null?void 0:j.onProgress)==null||y.call(j,{loaded:O.loaded,total:O.total})}_onProgressiveDone(){var O;(O=this._fullRequestReader)==null||O.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(O){const f=this._rangeReaders.indexOf(O);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,d.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const O=this._queuedChunks;return this._queuedChunks=null,new tt(this,O,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(O,f){if(f<=this._progressiveDataLength)return null;const W=new Rt(this,O,f);return this._pdfDataRangeTransport.requestDataRange(O,f),this._rangeReaders.push(W),W}cancelAllRequests(O){var f;(f=this._fullRequestReader)==null||f.cancel(O);for(const W of this._rangeReaders.slice(0))W.cancel(O);this._pdfDataRangeTransport.abort()}}v.PDFDataTransportStream=e;class tt{constructor(O,f,W=!1,j=null){this._stream=O,this._done=W||!1,this._filename=(0,T.isPdfFile)(j)?j:null,this._queuedChunks=f||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),O._fullRequestReader=this,this.onProgress=null}_enqueue(O){this._done||(this._requests.length>0?this._requests.shift().resolve({value:O,done:!1}):this._queuedChunks.push(O),this._loaded+=O.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const O=new d.PromiseCapability;return this._requests.push(O),O.promise}cancel(O){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Rt{constructor(O,f,W){this._stream=O,this._begin=f,this._end=W,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(O){if(!this._done){if(this._requests.length===0)this._queuedChunk=O;else{this._requests.shift().resolve({value:O,done:!1});for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const O=new d.PromiseCapability;return this._requests.push(O),O.promise}cancel(O){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PDFFetchStream=void 0;var d=At(1),T=At(20);function e(W,j,y){return{method:"GET",headers:W,signal:y.signal,mode:"cors",credentials:j?"include":"same-origin",redirect:"follow"}}function tt(W){const j=new Headers;for(const y in W){const b=W[y];b!==void 0&&j.append(y,b)}return j}function Rt(W){return W instanceof Uint8Array?W.buffer:W instanceof ArrayBuffer?W:((0,d.warn)(`getArrayBuffer - unexpected data format: ${W}`),new Uint8Array(W).buffer)}class G{constructor(j){this.source=j,this.isHttp=/^https?:/i.test(j.url),this.httpHeaders=this.isHttp&&j.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var j;return((j=this._fullRequestReader)==null?void 0:j._loaded)??0}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new O(this),this._fullRequestReader}getRangeReader(j,y){if(y<=this._progressiveDataLength)return null;const b=new f(this,j,y);return this._rangeRequestReaders.push(b),b}cancelAllRequests(j){var y;(y=this._fullRequestReader)==null||y.cancel(j);for(const b of this._rangeRequestReaders.slice(0))b.cancel(j)}}v.PDFFetchStream=G;class O{constructor(j){this._stream=j,this._reader=null,this._loaded=0,this._filename=null;const y=j.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=new d.PromiseCapability,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=tt(this._stream.httpHeaders);const b=y.url;fetch(b,e(this._headers,this._withCredentials,this._abortController)).then(k=>{if(!(0,T.validateResponseStatus)(k.status))throw(0,T.createResponseStatusError)(k.status,b);this._reader=k.body.getReader(),this._headersCapability.resolve();const _=B=>k.headers.get(B),{allowRangeRequests:g,suggestedLength:S}=(0,T.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=S||this._contentLength,this._filename=(0,T.extractFilenameFromHeader)(_),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new d.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;await this._headersCapability.promise;const{value:j,done:y}=await this._reader.read();return y?{value:j,done:y}:(this._loaded+=j.byteLength,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Rt(j),done:!1})}cancel(j){var y;(y=this._reader)==null||y.cancel(j),this._abortController.abort()}}class f{constructor(j,y,b){this._stream=j,this._reader=null,this._loaded=0;const k=j.source;this._withCredentials=k.withCredentials||!1,this._readCapability=new d.PromiseCapability,this._isStreamingSupported=!k.disableStream,this._abortController=new AbortController,this._headers=tt(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${b-1}`);const _=k.url;fetch(_,e(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,T.validateResponseStatus)(g.status))throw(0,T.createResponseStatusError)(g.status,_);this._readCapability.resolve(),this._reader=g.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;await this._readCapability.promise;const{value:j,done:y}=await this._reader.read();return y?{value:j,done:y}:(this._loaded+=j.byteLength,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded}),{value:Rt(j),done:!1})}cancel(j){var y;(y=this._reader)==null||y.cancel(j),this._abortController.abort()}}},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.createResponseStatusError=G,v.extractFilenameFromHeader=Rt,v.validateRangeRequestCapabilities=tt,v.validateResponseStatus=O;var d=At(1),T=At(21),e=At(6);function tt({getResponseHeader:f,isHttp:W,rangeChunkSize:j,disableRange:y}){const b={allowRangeRequests:!1,suggestedLength:void 0},k=parseInt(f("Content-Length"),10);return!Number.isInteger(k)||(b.suggestedLength=k,k<=2*j)||y||!W||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(b.allowRangeRequests=!0),b}function Rt(f){const W=f("Content-Disposition");if(W){let j=(0,T.getFilenameFromContentDispositionHeader)(W);if(j.includes("%"))try{j=decodeURIComponent(j)}catch{}if((0,e.isPdfFile)(j))return j}return null}function G(f,W){return f===404||f===0&&W.startsWith("file:")?new d.MissingPDFException('Missing PDF "'+W+'".'):new d.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${W}".`,f)}function O(f){return f===200||f===206}},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.getFilenameFromContentDispositionHeader=T;var d=At(1);function T(e){let tt=!0,Rt=G("filename\\*","i").exec(e);if(Rt){Rt=Rt[1];let k=j(Rt);return k=unescape(k),k=y(k),k=b(k),f(k)}if(Rt=W(e),Rt){const k=b(Rt);return f(k)}if(Rt=G("filename","i").exec(e),Rt){Rt=Rt[1];let k=j(Rt);return k=b(k),f(k)}function G(k,_){return new RegExp("(?:^|;)\\s*"+k+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function O(k,_){if(k){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const g=new TextDecoder(k,{fatal:!0}),S=(0,d.stringToBytes)(_);_=g.decode(S),tt=!1}catch{}}return _}function f(k){return tt&&/[\x80-\xff]/.test(k)&&(k=O("utf-8",k),tt&&(k=O("iso-8859-1",k))),k}function W(k){const _=[];let g;const S=G("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=S.exec(k))!==null;){let[,w,s,u]=g;if(w=parseInt(w,10),w in _){if(w===0)break;continue}_[w]=[s,u]}const B=[];for(let w=0;w<_.length&&w in _;++w){let[s,u]=_[w];u=j(u),s&&(u=unescape(u),w===0&&(u=y(u))),B.push(u)}return B.join("")}function j(k){if(k.startsWith('"')){const _=k.slice(1).split('\\"');for(let g=0;g<_.length;++g){const S=_[g].indexOf('"');S!==-1&&(_[g]=_[g].slice(0,S),_.length=g+1),_[g]=_[g].replaceAll(/\\(.)/g,"$1")}k=_.join('"')}return k}function y(k){const _=k.indexOf("'");if(_===-1)return k;const g=k.slice(0,_),B=k.slice(_+1).replace(/^[^']*'/,"");return O(g,B)}function b(k){return!k.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(k)?k:k.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,g,S,B){if(S==="q"||S==="Q")return B=B.replaceAll("_"," "),B=B.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,s){return String.fromCharCode(parseInt(s,16))}),O(g,B);try{B=atob(B)}catch{}return O(g,B)})}return""}},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PDFNetworkStream=void 0;var d=At(1),T=At(20);const e=200,tt=206;function Rt(j){const y=j.response;return typeof y!="string"?y:(0,d.stringToBytes)(y).buffer}class G{constructor(y,b={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&b.httpHeaders||Object.create(null),this.withCredentials=b.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,b,k){const _={begin:y,end:b};for(const g in k)_[g]=k[g];return this.request(_)}requestFull(y){return this.request(y)}request(y){const b=new XMLHttpRequest,k=this.currXhrId++,_=this.pendingRequests[k]={xhr:b};b.open("GET",this.url),b.withCredentials=this.withCredentials;for(const g in this.httpHeaders){const S=this.httpHeaders[g];S!==void 0&&b.setRequestHeader(g,S)}return this.isHttp&&"begin"in y&&"end"in y?(b.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),_.expectedStatus=tt):_.expectedStatus=e,b.responseType="arraybuffer",y.onError&&(b.onerror=function(g){y.onError(b.status)}),b.onreadystatechange=this.onStateChange.bind(this,k),b.onprogress=this.onProgress.bind(this,k),_.onHeadersReceived=y.onHeadersReceived,_.onDone=y.onDone,_.onError=y.onError,_.onProgress=y.onProgress,b.send(null),k}onProgress(y,b){var _;const k=this.pendingRequests[y];k&&((_=k.onProgress)==null||_.call(k,b))}onStateChange(y,b){var w,s,u;const k=this.pendingRequests[y];if(!k)return;const _=k.xhr;if(_.readyState>=2&&k.onHeadersReceived&&(k.onHeadersReceived(),delete k.onHeadersReceived),_.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],_.status===0&&this.isHttp){(w=k.onError)==null||w.call(k,_.status);return}const g=_.status||e;if(!(g===e&&k.expectedStatus===tt)&&g!==k.expectedStatus){(s=k.onError)==null||s.call(k,_.status);return}const B=Rt(_);if(g===tt){const a=_.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(a);k.onDone({begin:parseInt(l[1],10),chunk:B})}else B?k.onDone({begin:0,chunk:B}):(u=k.onError)==null||u.call(k,_.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const b=this.pendingRequests[y].xhr;delete this.pendingRequests[y],b.abort()}}class O{constructor(y){this._source=y,this._manager=new G(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const b=this._rangeRequestReaders.indexOf(y);b>=0&&this._rangeRequestReaders.splice(b,1)}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(y,b){const k=new W(this._manager,y,b);return k.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(k),k}cancelAllRequests(y){var b;(b=this._fullRequestReader)==null||b.cancel(y);for(const k of this._rangeRequestReaders.slice(0))k.cancel(y)}}v.PDFNetworkStream=O;class f{constructor(y,b){this._manager=y;const k={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._fullRequestId=y.requestFull(k),this._headersReceivedCapability=new d.PromiseCapability,this._disableRange=b.disableRange||!1,this._contentLength=b.length,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,b=this._manager.getRequestXhr(y),k=S=>b.getResponseHeader(S),{allowRangeRequests:_,suggestedLength:g}=(0,T.validateRangeRequestCapabilities)({getResponseHeader:k,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,T.extractFilenameFromHeader)(k),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,T.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){var b;(b=this.onProgress)==null||b.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=new d.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class W{constructor(y,b,k){this._manager=y;const _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(b,k,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var y;(y=this.onClosed)==null||y.call(this,this)}_onDone(y){const b=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunk=b,this._done=!0;for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,T.createResponseStatusError)(y,this._url);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){var b;this.isStreamingSupported||(b=this.onProgress)==null||b.call(this,{loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const b=this._queuedChunk;return this._queuedChunk=null,{value:b,done:!1}}if(this._done)return{value:void 0,done:!0};const y=new d.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PDFNodeStream=void 0;var d=At(1),T=At(20);const e=/^file:\/\/\/[a-zA-Z]:\//;function tt(k){const _=require$$5,g=_.parse(k);return g.protocol==="file:"||g.host?g:/^[a-z]:[/\\]/i.test(k)?_.parse(`file:///${k}`):(g.host||(g.protocol="file:"),g)}class Rt{constructor(_){this.source=_,this.url=tt(_.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&_.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _;return((_=this._fullRequestReader)==null?void 0:_._loaded)??0}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new W(this),this._fullRequestReader}getRangeReader(_,g){if(g<=this._progressiveDataLength)return null;const S=this.isFsUrl?new b(this,_,g):new j(this,_,g);return this._rangeRequestReaders.push(S),S}cancelAllRequests(_){var g;(g=this._fullRequestReader)==null||g.cancel(_);for(const S of this._rangeRequestReaders.slice(0))S.cancel(_)}}v.PDFNodeStream=Rt;class G{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null;const g=_.source;this._contentLength=g.length,this._loaded=0,this._filename=null,this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._readableStream=null,this._readCapability=new d.PromiseCapability,this._headersCapability=new d.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var S;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new d.PromiseCapability,this.read()):(this._loaded+=_.length,(S=this.onProgress)==null||S.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",g=>{this._error(g)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new d.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class O{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new d.PromiseCapability;const g=_.source;this._isStreamingSupported=!g.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var S;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new d.PromiseCapability,this.read()):(this._loaded+=_.length,(S=this.onProgress)==null||S.call(this,{loaded:this._loaded}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",g=>{this._error(g)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(k,_){return{protocol:k.protocol,auth:k.auth,host:k.hostname,port:k.port,path:k.path,method:"GET",headers:_}}class W extends G{constructor(_){super(_);const g=S=>{if(S.statusCode===404){const u=new d.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=u,this._headersCapability.reject(u);return}this._headersCapability.resolve(),this._setReadableStream(S);const B=u=>this._readableStream.headers[u.toLowerCase()],{allowRangeRequests:w,suggestedLength:s}=(0,T.validateRangeRequestCapabilities)({getResponseHeader:B,isHttp:_.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=w,this._contentLength=s||this._contentLength,this._filename=(0,T.extractFilenameFromHeader)(B)};if(this._request=null,this._url.protocol==="http:"){const S=require$$5;this._request=S.request(f(this._url,_.httpHeaders),g)}else{const S=require$$5;this._request=S.request(f(this._url,_.httpHeaders),g)}this._request.on("error",S=>{this._storedError=S,this._headersCapability.reject(S)}),this._request.end()}}class j extends O{constructor(_,g,S){super(_),this._httpHeaders={};for(const w in _.httpHeaders){const s=_.httpHeaders[w];s!==void 0&&(this._httpHeaders[w]=s)}this._httpHeaders.Range=`bytes=${g}-${S-1}`;const B=w=>{if(w.statusCode===404){const s=new d.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=s;return}this._setReadableStream(w)};if(this._request=null,this._url.protocol==="http:"){const w=require$$5;this._request=w.request(f(this._url,this._httpHeaders),B)}else{const w=require$$5;this._request=w.request(f(this._url,this._httpHeaders),B)}this._request.on("error",w=>{this._storedError=w}),this._request.end()}}class y extends G{constructor(_){super(_);let g=decodeURIComponent(this._url.path);e.test(this._url.href)&&(g=g.replace(/^\//,""));const S=require$$5;S.lstat(g,(B,w)=>{if(B){B.code==="ENOENT"&&(B=new d.MissingPDFException(`Missing PDF "${g}".`)),this._storedError=B,this._headersCapability.reject(B);return}this._contentLength=w.size,this._setReadableStream(S.createReadStream(g)),this._headersCapability.resolve()})}}class b extends O{constructor(_,g,S){super(_);let B=decodeURIComponent(this._url.path);e.test(this._url.href)&&(B=B.replace(/^\//,""));const w=require$$5;this._setReadableStream(w.createReadStream(B,{start:g,end:S-1}))}}},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.SVGGraphics=void 0;var d=At(6),T=At(1);const e={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},tt="http://www.w3.org/XML/1998/namespace",Rt="http://www.w3.org/1999/xlink",G=["butt","round","square"],O=["miter","round","bevel"],f=function(w,s="",u=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!u)return URL.createObjectURL(new Blob([w],{type:s}));const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let l=`data:${s};base64,`;for(let c=0,N=w.length;c<N;c+=3){const o=w[c]&255,E=w[c+1]&255,D=w[c+2]&255,vt=o>>2,Y=(o&3)<<4|E>>4,it=c+1<N?(E&15)<<2|D>>6:64,q=c+2<N?D&63:64;l+=a[vt]+a[Y]+a[it]+a[q]}return l},W=function(){const w=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,u=new Int32Array(256);for(let D=0;D<256;D++){let vt=D;for(let Y=0;Y<8;Y++)vt=vt&1?3988292384^vt>>1&2147483647:vt>>1&2147483647;u[D]=vt}function a(D,vt,Y){let it=-1;for(let q=vt;q<Y;q++){const bt=(it^D[q])&255,M=u[bt];it=it>>>8^M}return it^-1}function l(D,vt,Y,it){let q=it;const bt=vt.length;Y[q]=bt>>24&255,Y[q+1]=bt>>16&255,Y[q+2]=bt>>8&255,Y[q+3]=bt&255,q+=4,Y[q]=D.charCodeAt(0)&255,Y[q+1]=D.charCodeAt(1)&255,Y[q+2]=D.charCodeAt(2)&255,Y[q+3]=D.charCodeAt(3)&255,q+=4,Y.set(vt,q),q+=vt.length;const M=a(Y,it+4,q);Y[q]=M>>24&255,Y[q+1]=M>>16&255,Y[q+2]=M>>8&255,Y[q+3]=M&255}function c(D,vt,Y){let it=1,q=0;for(let bt=vt;bt<Y;++bt)it=(it+(D[bt]&255))%65521,q=(q+it)%65521;return q<<16|it}function N(D){if(!T.isNodeJS)return o(D);try{const vt=parseInt(process.versions.node)>=8?D:Buffer.from(D),Y=require$$5.deflateSync(vt,{level:9});return Y instanceof Uint8Array?Y:new Uint8Array(Y)}catch(vt){(0,T.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+vt)}return o(D)}function o(D){let vt=D.length;const Y=65535,it=Math.ceil(vt/Y),q=new Uint8Array(2+vt+it*5+4);let bt=0;q[bt++]=120,q[bt++]=156;let M=0;for(;vt>Y;)q[bt++]=0,q[bt++]=255,q[bt++]=255,q[bt++]=0,q[bt++]=0,q.set(D.subarray(M,M+Y),bt),bt+=Y,M+=Y,vt-=Y;q[bt++]=1,q[bt++]=vt&255,q[bt++]=vt>>8&255,q[bt++]=~vt&65535&255,q[bt++]=(~vt&65535)>>8&255,q.set(D.subarray(M),bt),bt+=D.length-M;const X=c(D,0,D.length);return q[bt++]=X>>24&255,q[bt++]=X>>16&255,q[bt++]=X>>8&255,q[bt++]=X&255,q}function E(D,vt,Y,it){const q=D.width,bt=D.height;let M,X,lt;const P=D.data;switch(vt){case T.ImageKind.GRAYSCALE_1BPP:X=0,M=1,lt=q+7>>3;break;case T.ImageKind.RGB_24BPP:X=2,M=8,lt=q*3;break;case T.ImageKind.RGBA_32BPP:X=6,M=8,lt=q*4;break;default:throw new Error("invalid format")}const i=new Uint8Array((1+lt)*bt);let r=0,m=0;for(let St=0;St<bt;++St)i[r++]=0,i.set(P.subarray(m,m+lt),r),m+=lt,r+=lt;if(vt===T.ImageKind.GRAYSCALE_1BPP&&it){r=0;for(let St=0;St<bt;St++){r++;for(let Et=0;Et<lt;Et++)i[r++]^=255}}const F=new Uint8Array([q>>24&255,q>>16&255,q>>8&255,q&255,bt>>24&255,bt>>16&255,bt>>8&255,bt&255,M,X,0,0,0]),L=N(i),x=w.length+s*3+F.length+L.length,Z=new Uint8Array(x);let mt=0;return Z.set(w,mt),mt+=w.length,l("IHDR",F,Z,mt),mt+=s+F.length,l("IDATA",L,Z,mt),mt+=s+L.length,l("IEND",new Uint8Array(0),Z,mt),f(Z,"image/png",Y)}return function(vt,Y,it){const q=vt.kind===void 0?T.ImageKind.GRAYSCALE_1BPP:vt.kind;return E(vt,q,Y,it)}}();class j{constructor(){this.fontSizeScale=1,this.fontWeight=e.fontWeight,this.fontSize=0,this.textMatrix=T.IDENTITY_MATRIX,this.fontMatrix=T.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=T.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=e.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,u){this.x=s,this.y=u}}function y(w){let s=[];const u=[];for(const a of w){if(a.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),u.push(s),s=s.at(-1).items;continue}a.fn==="restore"?s=u.pop():s.push(a)}return s}function b(w){if(Number.isInteger(w))return w.toString();const s=w.toFixed(10);let u=s.length-1;if(s[u]!=="0")return s;do u--;while(s[u]==="0");return s.substring(0,s[u]==="."?u:u+1)}function k(w){if(w[4]===0&&w[5]===0){if(w[1]===0&&w[2]===0)return w[0]===1&&w[3]===1?"":`scale(${b(w[0])} ${b(w[3])})`;if(w[0]===w[3]&&w[1]===-w[2]){const s=Math.acos(w[0])*180/Math.PI;return`rotate(${b(s)})`}}else if(w[0]===1&&w[1]===0&&w[2]===0&&w[3]===1)return`translate(${b(w[4])} ${b(w[5])})`;return`matrix(${b(w[0])} ${b(w[1])} ${b(w[2])} ${b(w[3])} ${b(w[4])} ${b(w[5])})`}let _=0,g=0,S=0;class B{constructor(s,u,a=!1){(0,d.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new d.DOMSVGFactory,this.current=new j,this.transformMatrix=T.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=s,this.objs=u,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!a,this._operatorIdMapping=[];for(const l in T.OPS)this._operatorIdMapping[T.OPS[l]]=l}getObject(s,u=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):u}save(){this.transformStack.push(this.transformMatrix);const s=this.current;this.extraStack.push(s),this.current=s.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(s){this.save(),this.executeOpTree(s),this.restore()}loadDependencies(s){const u=s.fnArray,a=s.argsArray;for(let l=0,c=u.length;l<c;l++)if(u[l]===T.OPS.dependency)for(const N of a[l]){const o=N.startsWith("g_")?this.commonObjs:this.objs,E=new Promise(D=>{o.get(N,D)});this.current.dependencies.push(E)}return Promise.all(this.current.dependencies)}transform(s,u,a,l,c,N){const o=[s,u,a,l,c,N];this.transformMatrix=T.Util.transform(this.transformMatrix,o),this.tgrp=null}getSVG(s,u){this.viewport=u;const a=this._initialize(u);return this.loadDependencies(s).then(()=>(this.transformMatrix=T.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(s)),a))}convertOpList(s){const u=this._operatorIdMapping,a=s.argsArray,l=s.fnArray,c=[];for(let N=0,o=l.length;N<o;N++){const E=l[N];c.push({fnId:E,fn:u[E],args:a[N]})}return y(c)}executeOpTree(s){for(const u of s){const a=u.fn,l=u.fnId,c=u.args;switch(l|0){case T.OPS.beginText:this.beginText();break;case T.OPS.dependency:break;case T.OPS.setLeading:this.setLeading(c);break;case T.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case T.OPS.setFont:this.setFont(c);break;case T.OPS.showText:this.showText(c[0]);break;case T.OPS.showSpacedText:this.showText(c[0]);break;case T.OPS.endText:this.endText();break;case T.OPS.moveText:this.moveText(c[0],c[1]);break;case T.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case T.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case T.OPS.setHScale:this.setHScale(c[0]);break;case T.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case T.OPS.setTextRise:this.setTextRise(c[0]);break;case T.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case T.OPS.setLineWidth:this.setLineWidth(c[0]);break;case T.OPS.setLineJoin:this.setLineJoin(c[0]);break;case T.OPS.setLineCap:this.setLineCap(c[0]);break;case T.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case T.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case T.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case T.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case T.OPS.setFillColorN:this.setFillColorN(c);break;case T.OPS.shadingFill:this.shadingFill(c[0]);break;case T.OPS.setDash:this.setDash(c[0],c[1]);break;case T.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case T.OPS.setFlatness:this.setFlatness(c[0]);break;case T.OPS.setGState:this.setGState(c[0]);break;case T.OPS.fill:this.fill();break;case T.OPS.eoFill:this.eoFill();break;case T.OPS.stroke:this.stroke();break;case T.OPS.fillStroke:this.fillStroke();break;case T.OPS.eoFillStroke:this.eoFillStroke();break;case T.OPS.clip:this.clip("nonzero");break;case T.OPS.eoClip:this.clip("evenodd");break;case T.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case T.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case T.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case T.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case T.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case T.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case T.OPS.closePath:this.closePath();break;case T.OPS.closeStroke:this.closeStroke();break;case T.OPS.closeFillStroke:this.closeFillStroke();break;case T.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case T.OPS.nextLine:this.nextLine();break;case T.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case T.OPS.constructPath:this.constructPath(c[0],c[1]);break;case T.OPS.endPath:this.endPath();break;case 92:this.group(u.items);break;default:(0,T.warn)(`Unimplemented operator ${a}`);break}}}setWordSpacing(s){this.current.wordSpacing=s}setCharSpacing(s){this.current.charSpacing=s}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(s,u,a,l,c,N){const o=this.current;o.textMatrix=o.lineMatrix=[s,u,a,l,c,N],o.textMatrixScale=Math.hypot(s,u),o.x=o.lineX=0,o.y=o.lineY=0,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${b(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",b(-o.y)),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtElement.append(o.tspan)}beginText(){const s=this.current;s.x=s.lineX=0,s.y=s.lineY=0,s.textMatrix=T.IDENTITY_MATRIX,s.lineMatrix=T.IDENTITY_MATRIX,s.textMatrixScale=1,s.tspan=this.svgFactory.createElement("svg:tspan"),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtgrp=this.svgFactory.createElement("svg:g"),s.xcoords=[],s.ycoords=[]}moveText(s,u){const a=this.current;a.x=a.lineX+=s,a.y=a.lineY+=u,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${b(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",b(-a.y))}showText(s){const u=this.current,a=u.font,l=u.fontSize;if(l===0)return;const c=u.fontSizeScale,N=u.charSpacing,o=u.wordSpacing,E=u.fontDirection,D=u.textHScale*E,vt=a.vertical,Y=vt?1:-1,it=a.defaultVMetrics,q=l*u.fontMatrix[0];let bt=0;for(const lt of s){if(lt===null){bt+=E*o;continue}else if(typeof lt=="number"){bt+=Y*lt*l/1e3;continue}const P=(lt.isSpace?o:0)+N,i=lt.fontChar;let r,m,F=lt.width;if(vt){let x;const Z=lt.vmetric||it;x=lt.vmetric?Z[1]:F*.5,x=-x*q;const mt=Z[2]*q;F=Z?-Z[0]:F,r=x/c,m=(bt+mt)/c}else r=bt/c,m=0;(lt.isInFont||a.missingFile)&&(u.xcoords.push(u.x+r),vt&&u.ycoords.push(-u.y+m),u.tspan.textContent+=i);const L=vt?F*q-P*E:F*q+P*E;bt+=L}u.tspan.setAttributeNS(null,"x",u.xcoords.map(b).join(" ")),vt?u.tspan.setAttributeNS(null,"y",u.ycoords.map(b).join(" ")):u.tspan.setAttributeNS(null,"y",b(-u.y)),vt?u.y-=bt:u.x+=bt*D,u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size",`${b(u.fontSize)}px`),u.fontStyle!==e.fontStyle&&u.tspan.setAttributeNS(null,"font-style",u.fontStyle),u.fontWeight!==e.fontWeight&&u.tspan.setAttributeNS(null,"font-weight",u.fontWeight);const M=u.textRenderingMode&T.TextRenderingMode.FILL_STROKE_MASK;if(M===T.TextRenderingMode.FILL||M===T.TextRenderingMode.FILL_STROKE?(u.fillColor!==e.fillColor&&u.tspan.setAttributeNS(null,"fill",u.fillColor),u.fillAlpha<1&&u.tspan.setAttributeNS(null,"fill-opacity",u.fillAlpha)):u.textRenderingMode===T.TextRenderingMode.ADD_TO_PATH?u.tspan.setAttributeNS(null,"fill","transparent"):u.tspan.setAttributeNS(null,"fill","none"),M===T.TextRenderingMode.STROKE||M===T.TextRenderingMode.FILL_STROKE){const lt=1/(u.textMatrixScale||1);this._setStrokeAttributes(u.tspan,lt)}let X=u.textMatrix;u.textRise!==0&&(X=X.slice(),X[5]+=u.textRise),u.txtElement.setAttributeNS(null,"transform",`${k(X)} scale(${b(D)}, -1)`),u.txtElement.setAttributeNS(tt,"xml:space","preserve"),u.txtElement.append(u.tspan),u.txtgrp.append(u.txtElement),this._ensureTransformGroup().append(u.txtElement)}setLeadingMoveText(s,u){this.setLeading(-u),this.moveText(s,u)}addFontStyle(s){if(!s.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const u=f(s.data,s.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${s.loadedName}"; src: url(${u}); }
`}setFont(s){const u=this.current,a=this.commonObjs.get(s[0]);let l=s[1];u.font=a,this.embedFonts&&!a.missingFile&&!this.embeddedFonts[a.loadedName]&&(this.addFontStyle(a),this.embeddedFonts[a.loadedName]=a),u.fontMatrix=a.fontMatrix||T.FONT_IDENTITY_MATRIX;let c="normal";a.black?c="900":a.bold&&(c="bold");const N=a.italic?"italic":"normal";l<0?(l=-l,u.fontDirection=-1):u.fontDirection=1,u.fontSize=l,u.fontFamily=a.loadedName,u.fontWeight=c,u.fontStyle=N,u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"y",b(-u.y)),u.xcoords=[],u.ycoords=[]}endText(){var u;const s=this.current;s.textRenderingMode&T.TextRenderingMode.ADD_TO_PATH_FLAG&&((u=s.txtElement)!=null&&u.hasChildNodes())&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(s){s>0&&(this.current.lineWidth=s)}setLineCap(s){this.current.lineCap=G[s]}setLineJoin(s){this.current.lineJoin=O[s]}setMiterLimit(s){this.current.miterLimit=s}setStrokeAlpha(s){this.current.strokeAlpha=s}setStrokeRGBColor(s,u,a){this.current.strokeColor=T.Util.makeHexColor(s,u,a)}setFillAlpha(s){this.current.fillAlpha=s}setFillRGBColor(s,u,a){this.current.fillColor=T.Util.makeHexColor(s,u,a),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(s){this.current.strokeColor=this._makeColorN_Pattern(s)}setFillColorN(s){this.current.fillColor=this._makeColorN_Pattern(s)}shadingFill(s){const{width:u,height:a}=this.viewport,l=T.Util.inverseTransform(this.transformMatrix),[c,N,o,E]=T.Util.getAxialAlignedBoundingBox([0,0,u,a],l),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x",c),D.setAttributeNS(null,"y",N),D.setAttributeNS(null,"width",o-c),D.setAttributeNS(null,"height",E-N),D.setAttributeNS(null,"fill",this._makeShadingPattern(s)),this.current.fillAlpha<1&&D.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(D)}_makeColorN_Pattern(s){return s[0]==="TilingPattern"?this._makeTilingPattern(s):this._makeShadingPattern(s)}_makeTilingPattern(s){const u=s[1],a=s[2],l=s[3]||T.IDENTITY_MATRIX,[c,N,o,E]=s[4],D=s[5],vt=s[6],Y=s[7],it=`shading${S++}`,[q,bt,M,X]=T.Util.normalizeRect([...T.Util.applyTransform([c,N],l),...T.Util.applyTransform([o,E],l)]),[lt,P]=T.Util.singularValueDecompose2dScale(l),i=D*lt,r=vt*P,m=this.svgFactory.createElement("svg:pattern");m.setAttributeNS(null,"id",it),m.setAttributeNS(null,"patternUnits","userSpaceOnUse"),m.setAttributeNS(null,"width",i),m.setAttributeNS(null,"height",r),m.setAttributeNS(null,"x",`${q}`),m.setAttributeNS(null,"y",`${bt}`);const F=this.svg,L=this.transformMatrix,x=this.current.fillColor,Z=this.current.strokeColor,mt=this.svgFactory.create(M-q,X-bt);if(this.svg=mt,this.transformMatrix=l,Y===2){const St=T.Util.makeHexColor(...u);this.current.fillColor=St,this.current.strokeColor=St}return this.executeOpTree(this.convertOpList(a)),this.svg=F,this.transformMatrix=L,this.current.fillColor=x,this.current.strokeColor=Z,m.append(mt.childNodes[0]),this.defs.append(m),`url(#${it})`}_makeShadingPattern(s){switch(typeof s=="string"&&(s=this.objs.get(s)),s[0]){case"RadialAxial":const u=`shading${S++}`,a=s[3];let l;switch(s[1]){case"axial":const c=s[4],N=s[5];l=this.svgFactory.createElement("svg:linearGradient"),l.setAttributeNS(null,"id",u),l.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),l.setAttributeNS(null,"x1",c[0]),l.setAttributeNS(null,"y1",c[1]),l.setAttributeNS(null,"x2",N[0]),l.setAttributeNS(null,"y2",N[1]);break;case"radial":const o=s[4],E=s[5],D=s[6],vt=s[7];l=this.svgFactory.createElement("svg:radialGradient"),l.setAttributeNS(null,"id",u),l.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),l.setAttributeNS(null,"cx",E[0]),l.setAttributeNS(null,"cy",E[1]),l.setAttributeNS(null,"r",vt),l.setAttributeNS(null,"fx",o[0]),l.setAttributeNS(null,"fy",o[1]),l.setAttributeNS(null,"fr",D);break;default:throw new Error(`Unknown RadialAxial type: ${s[1]}`)}for(const c of a){const N=this.svgFactory.createElement("svg:stop");N.setAttributeNS(null,"offset",c[0]),N.setAttributeNS(null,"stop-color",c[1]),l.append(N)}return this.defs.append(l),`url(#${u})`;case"Mesh":return(0,T.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${s[0]}`)}}setDash(s,u){this.current.dashArray=s,this.current.dashPhase=u}constructPath(s,u){const a=this.current;let l=a.x,c=a.y,N=[],o=0;for(const E of s)switch(E|0){case T.OPS.rectangle:l=u[o++],c=u[o++];const D=u[o++],vt=u[o++],Y=l+D,it=c+vt;N.push("M",b(l),b(c),"L",b(Y),b(c),"L",b(Y),b(it),"L",b(l),b(it),"Z");break;case T.OPS.moveTo:l=u[o++],c=u[o++],N.push("M",b(l),b(c));break;case T.OPS.lineTo:l=u[o++],c=u[o++],N.push("L",b(l),b(c));break;case T.OPS.curveTo:l=u[o+4],c=u[o+5],N.push("C",b(u[o]),b(u[o+1]),b(u[o+2]),b(u[o+3]),b(l),b(c)),o+=6;break;case T.OPS.curveTo2:N.push("C",b(l),b(c),b(u[o]),b(u[o+1]),b(u[o+2]),b(u[o+3])),l=u[o+2],c=u[o+3],o+=4;break;case T.OPS.curveTo3:l=u[o+2],c=u[o+3],N.push("C",b(u[o]),b(u[o+1]),b(l),b(c),b(l),b(c)),o+=4;break;case T.OPS.closePath:N.push("Z");break}N=N.join(" "),a.path&&s.length>0&&s[0]!==T.OPS.rectangle&&s[0]!==T.OPS.moveTo?N=a.path.getAttributeNS(null,"d")+N:(a.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(a.path)),a.path.setAttributeNS(null,"d",N),a.path.setAttributeNS(null,"fill","none"),a.element=a.path,a.setCurrentPoint(l,c)}endPath(){const s=this.current;if(s.path=null,!this.pendingClip)return;if(!s.element){this.pendingClip=null;return}const u=`clippath${_++}`,a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",u),a.setAttributeNS(null,"transform",k(this.transformMatrix));const l=s.element.cloneNode(!0);if(this.pendingClip==="evenodd"?l.setAttributeNS(null,"clip-rule","evenodd"):l.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,a.append(l),this.defs.append(a),s.activeClipUrl){s.clipGroup=null;for(const c of this.extraStack)c.clipGroup=null;a.setAttributeNS(null,"clip-path",s.activeClipUrl)}s.activeClipUrl=`url(#${u})`,this.tgrp=null}clip(s){this.pendingClip=s}closePath(){const s=this.current;if(s.path){const u=`${s.path.getAttributeNS(null,"d")}Z`;s.path.setAttributeNS(null,"d",u)}}setLeading(s){this.current.leading=-s}setTextRise(s){this.current.textRise=s}setTextRenderingMode(s){this.current.textRenderingMode=s}setHScale(s){this.current.textHScale=s/100}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[u,a]of s)switch(u){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a);break;case"CA":this.setStrokeAlpha(a);break;case"ca":this.setFillAlpha(a);break;default:(0,T.warn)(`Unimplemented graphic state operator ${u}`);break}}fill(){const s=this.current;s.element&&(s.element.setAttributeNS(null,"fill",s.fillColor),s.element.setAttributeNS(null,"fill-opacity",s.fillAlpha),this.endPath())}stroke(){const s=this.current;s.element&&(this._setStrokeAttributes(s.element),s.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(s,u=1){const a=this.current;let l=a.dashArray;u!==1&&l.length>0&&(l=l.map(function(c){return u*c})),s.setAttributeNS(null,"stroke",a.strokeColor),s.setAttributeNS(null,"stroke-opacity",a.strokeAlpha),s.setAttributeNS(null,"stroke-miterlimit",b(a.miterLimit)),s.setAttributeNS(null,"stroke-linecap",a.lineCap),s.setAttributeNS(null,"stroke-linejoin",a.lineJoin),s.setAttributeNS(null,"stroke-width",b(u*a.lineWidth)+"px"),s.setAttributeNS(null,"stroke-dasharray",l.map(b).join(" ")),s.setAttributeNS(null,"stroke-dashoffset",b(u*a.dashPhase)+"px")}eoFill(){var s;(s=this.current.element)==null||s.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var s;(s=this.current.element)==null||s.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width","1px"),s.setAttributeNS(null,"height","1px"),s.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(s)}paintImageXObject(s){const u=this.getObject(s);if(!u){(0,T.warn)(`Dependent image with object ID ${s} is not ready yet`);return}this.paintInlineImageXObject(u)}paintInlineImageXObject(s,u){const a=s.width,l=s.height,c=W(s,this.forceDataSchema,!!u),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",b(a)),N.setAttributeNS(null,"height",b(l)),this.current.element=N,this.clip("nonzero");const o=this.svgFactory.createElement("svg:image");o.setAttributeNS(Rt,"xlink:href",c),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",b(-l)),o.setAttributeNS(null,"width",b(a)+"px"),o.setAttributeNS(null,"height",b(l)+"px"),o.setAttributeNS(null,"transform",`scale(${b(1/a)} ${b(-1/l)})`),u?u.append(o):this._ensureTransformGroup().append(o)}paintImageMaskXObject(s){const u=this.getObject(s.data,s);if(u.bitmap){(0,T.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const a=this.current,l=u.width,c=u.height,N=a.fillColor;a.maskId=`mask${g++}`;const o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",a.maskId);const E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width",b(l)),E.setAttributeNS(null,"height",b(c)),E.setAttributeNS(null,"fill",N),E.setAttributeNS(null,"mask",`url(#${a.maskId})`),this.defs.append(o),this._ensureTransformGroup().append(E),this.paintInlineImageXObject(u,o)}paintFormXObjectBegin(s,u){if(Array.isArray(s)&&s.length===6&&this.transform(s[0],s[1],s[2],s[3],s[4],s[5]),u){const a=u[2]-u[0],l=u[3]-u[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",u[0]),c.setAttributeNS(null,"y",u[1]),c.setAttributeNS(null,"width",b(a)),c.setAttributeNS(null,"height",b(l)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(s){const u=this.svgFactory.create(s.width,s.height),a=this.svgFactory.createElement("svg:defs");u.append(a),this.defs=a;const l=this.svgFactory.createElement("svg:g");return l.setAttributeNS(null,"transform",k(s.transform)),u.append(l),this.svg=l,u}_ensureClipGroup(){if(!this.current.clipGroup){const s=this.svgFactory.createElement("svg:g");s.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(s),this.current.clipGroup=s}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",k(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}v.SVGGraphics=B},(h,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.XfaText=void 0;class At{static textContent(T){const e=[],tt={items:e,styles:Object.create(null)};function Rt(G){var W;if(!G)return;let O=null;const f=G.name;if(f==="#text")O=G.value;else if(At.shouldBuildText(f))(W=G==null?void 0:G.attributes)!=null&&W.textContent?O=G.attributes.textContent:G.value&&(O=G.value);else return;if(O!==null&&e.push({str:O}),!!G.children)for(const j of G.children)Rt(j)}return Rt(T),tt}static shouldBuildText(T){return!(T==="textarea"||T==="input"||T==="option"||T==="select")}}v.XfaText=At},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.TextLayerRenderTask=void 0,v.renderTextLayer=k,v.updateTextLayer=_;var d=At(1),T=At(6);const e=1e5,tt=30,Rt=.8,G=new Map;function O(g,S){let B;if(S&&d.FeatureTest.isOffscreenCanvasSupported)B=new OffscreenCanvas(g,g).getContext("2d",{alpha:!1});else{const w=document.createElement("canvas");w.width=w.height=g,B=w.getContext("2d",{alpha:!1})}return B}function f(g,S){const B=G.get(g);if(B)return B;const w=O(tt,S);w.font=`${tt}px ${g}`;const s=w.measureText("");let u=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(u){const c=u/(u+a);return G.set(g,c),w.canvas.width=w.canvas.height=0,c}w.strokeStyle="red",w.clearRect(0,0,tt,tt),w.strokeText("g",0,0);let l=w.getImageData(0,0,tt,tt).data;a=0;for(let c=l.length-1-3;c>=0;c-=4)if(l[c]>0){a=Math.ceil(c/4/tt);break}w.clearRect(0,0,tt,tt),w.strokeText("A",0,tt),l=w.getImageData(0,0,tt,tt).data,u=0;for(let c=0,N=l.length;c<N;c+=4)if(l[c]>0){u=tt-Math.floor(c/4/tt);break}if(w.canvas.width=w.canvas.height=0,u){const c=u/(u+a);return G.set(g,c),c}return G.set(g,Rt),Rt}function W(g,S,B){const w=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:S.str!=="",hasEOL:S.hasEOL,fontSize:0};g._textDivs.push(w);const u=d.Util.transform(g._transform,S.transform);let a=Math.atan2(u[1],u[0]);const l=B[S.fontName];l.vertical&&(a+=Math.PI/2);const c=Math.hypot(u[2],u[3]),N=c*f(l.fontFamily,g._isOffscreenCanvasSupported);let o,E;a===0?(o=u[4],E=u[5]-N):(o=u[4]+N*Math.sin(a),E=u[5]-N*Math.cos(a));const D="calc(var(--scale-factor)*",vt=w.style;g._container===g._rootContainer?(vt.left=`${(100*o/g._pageWidth).toFixed(2)}%`,vt.top=`${(100*E/g._pageHeight).toFixed(2)}%`):(vt.left=`${D}${o.toFixed(2)}px)`,vt.top=`${D}${E.toFixed(2)}px)`),vt.fontSize=`${D}${c.toFixed(2)}px)`,vt.fontFamily=l.fontFamily,s.fontSize=c,w.setAttribute("role","presentation"),w.textContent=S.str,w.dir=S.dir,g._fontInspectorEnabled&&(w.dataset.fontName=S.fontName),a!==0&&(s.angle=a*(180/Math.PI));let Y=!1;if(S.str.length>1)Y=!0;else if(S.str!==" "&&S.transform[0]!==S.transform[3]){const it=Math.abs(S.transform[0]),q=Math.abs(S.transform[3]);it!==q&&Math.max(it,q)/Math.min(it,q)>1.5&&(Y=!0)}Y&&(s.canvasWidth=l.vertical?S.height:S.width),g._textDivProperties.set(w,s),g._isReadableStream&&g._layoutText(w)}function j(g){const{div:S,scale:B,properties:w,ctx:s,prevFontSize:u,prevFontFamily:a}=g,{style:l}=S;let c="";if(w.canvasWidth!==0&&w.hasText){const{fontFamily:N}=l,{canvasWidth:o,fontSize:E}=w;(u!==E||a!==N)&&(s.font=`${E*B}px ${N}`,g.prevFontSize=E,g.prevFontFamily=N);const{width:D}=s.measureText(S.textContent);D>0&&(c=`scaleX(${o*B/D})`)}w.angle!==0&&(c=`rotate(${w.angle}deg) ${c}`),c.length>0&&(l.transform=c)}function y(g){if(g._canceled)return;const S=g._textDivs,B=g._capability;if(S.length>e){B.resolve();return}if(!g._isReadableStream)for(const s of S)g._layoutText(s);B.resolve()}class b{constructor({textContentSource:S,container:B,viewport:w,textDivs:s,textDivProperties:u,textContentItemsStr:a,isOffscreenCanvasSupported:l}){var D;this._textContentSource=S,this._isReadableStream=S instanceof ReadableStream,this._container=this._rootContainer=B,this._textDivs=s||[],this._textContentItemsStr=a||[],this._isOffscreenCanvasSupported=l,this._fontInspectorEnabled=!!((D=globalThis.FontInspector)!=null&&D.enabled),this._reader=null,this._textDivProperties=u||new WeakMap,this._canceled=!1,this._capability=new d.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:w.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:O(0,l)};const{pageWidth:c,pageHeight:N,pageX:o,pageY:E}=w.rawDims;this._transform=[1,0,0,-1,-o,E+N],this._pageWidth=c,this._pageHeight=N,(0,T.setLayerDimensions)(B,w),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new d.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new d.AbortException("TextLayer task cancelled."))}_processItems(S,B){for(const w of S){if(w.str===void 0){if(w.type==="beginMarkedContentProps"||w.type==="beginMarkedContent"){const s=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),w.id!==null&&this._container.setAttribute("id",`${w.id}`),s.append(this._container)}else w.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(w.str),W(this,w,B)}}_layoutText(S){const B=this._layoutTextParams.properties=this._textDivProperties.get(S);if(this._layoutTextParams.div=S,j(this._layoutTextParams),B.hasText&&this._container.append(S),B.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this._container.append(w)}}_render(){const S=new d.PromiseCapability;let B=Object.create(null);if(this._isReadableStream){const w=()=>{this._reader.read().then(({value:s,done:u})=>{if(u){S.resolve();return}Object.assign(B,s.styles),this._processItems(s.items,B),w()},S.reject)};this._reader=this._textContentSource.getReader(),w()}else if(this._textContentSource){const{items:w,styles:s}=this._textContentSource;this._processItems(w,s),S.resolve()}else throw new Error('No "textContentSource" parameter specified.');S.promise.then(()=>{B=null,y(this)},this._capability.reject)}}v.TextLayerRenderTask=b;function k(g){!g.textContentSource&&(g.textContent||g.textContentStream)&&((0,T.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),g.textContentSource=g.textContent||g.textContentStream);const{container:S,viewport:B}=g,w=getComputedStyle(S),s=w.getPropertyValue("visibility"),u=parseFloat(w.getPropertyValue("--scale-factor"));s==="visible"&&(!u||Math.abs(u-B.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const a=new b(g);return a._render(),a}function _({container:g,viewport:S,textDivs:B,textDivProperties:w,isOffscreenCanvasSupported:s,mustRotate:u=!0,mustRescale:a=!0}){if(u&&(0,T.setLayerDimensions)(g,{rotation:S.rotation}),a){const l=O(0,s),N={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:l};for(const o of B)N.properties=w.get(o),N.div=o,j(N)}}},(h,v,At)=>{var f,W,j,y,b,k,_,g,S,B,w,Xi,ci,$i,Yi;Object.defineProperty(v,"__esModule",{value:!0}),v.AnnotationEditorLayer=void 0;var d=At(1),T=At(4),e=At(28),tt=At(33),Rt=At(6),G=At(34);const c=class c{constructor({uiManager:o,pageIndex:E,div:D,accessibilityManager:vt,annotationLayer:Y,viewport:it,l10n:q}){pt(this,w);pt(this,f);pt(this,W,!1);pt(this,j,null);pt(this,y,this.pointerup.bind(this));pt(this,b,this.pointerdown.bind(this));pt(this,k,new Map);pt(this,_,!1);pt(this,g,!1);pt(this,S,!1);pt(this,B);const bt=[e.FreeTextEditor,tt.InkEditor,G.StampEditor];if(!c._initialized){c._initialized=!0;for(const M of bt)M.initialize(q)}o.registerEditorTypes(bt),gt(this,B,o),this.pageIndex=E,this.div=D,gt(this,f,vt),gt(this,j,Y),this.viewport=it,t(this,B).addLayer(this)}get isEmpty(){return t(this,k).size===0}updateToolbar(o){t(this,B).updateToolbar(o)}updateMode(o=t(this,B).getMode()){Q(this,w,Yi).call(this),o===d.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),o!==d.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",o===d.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",o===d.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",o===d.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(o){if(!o&&t(this,B).getMode()!==d.AnnotationEditorType.INK)return;if(!o){for(const D of t(this,k).values())if(D.isEmpty()){D.setInBackground();return}}Q(this,w,ci).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(o){t(this,B).setEditingState(o)}addCommands(o){t(this,B).addCommands(o)}enable(){this.div.style.pointerEvents="auto";const o=new Set;for(const D of t(this,k).values())D.enableEditing(),D.annotationElementId&&o.add(D.annotationElementId);if(!t(this,j))return;const E=t(this,j).getEditableAnnotations();for(const D of E){if(D.hide(),t(this,B).isDeletedAnnotationElement(D.data.id)||o.has(D.data.id))continue;const vt=this.deserialize(D);vt&&(this.addOrRebuild(vt),vt.enableEditing())}}disable(){var E;gt(this,S,!0),this.div.style.pointerEvents="none";const o=new Set;for(const D of t(this,k).values()){if(D.disableEditing(),!D.annotationElementId||D.serialize()!==null){o.add(D.annotationElementId);continue}(E=this.getEditableAnnotation(D.annotationElementId))==null||E.show(),D.remove()}if(t(this,j)){const D=t(this,j).getEditableAnnotations();for(const vt of D){const{id:Y}=vt.data;o.has(Y)||t(this,B).isDeletedAnnotationElement(Y)||vt.show()}}Q(this,w,Yi).call(this),this.isEmpty&&(this.div.hidden=!0),gt(this,S,!1)}getEditableAnnotation(o){var E;return((E=t(this,j))==null?void 0:E.getEditableAnnotation(o))||null}setActiveEditor(o){t(this,B).getActive()!==o&&t(this,B).setActiveEditor(o)}enableClick(){this.div.addEventListener("pointerdown",t(this,b)),this.div.addEventListener("pointerup",t(this,y))}disableClick(){this.div.removeEventListener("pointerdown",t(this,b)),this.div.removeEventListener("pointerup",t(this,y))}attach(o){t(this,k).set(o.id,o);const{annotationElementId:E}=o;E&&t(this,B).isDeletedAnnotationElement(E)&&t(this,B).removeDeletedAnnotationElement(o)}detach(o){var E;t(this,k).delete(o.id),(E=t(this,f))==null||E.removePointerInTextLayer(o.contentDiv),!t(this,S)&&o.annotationElementId&&t(this,B).addDeletedAnnotationElement(o)}remove(o){this.detach(o),t(this,B).removeEditor(o),o.div.contains(document.activeElement)&&setTimeout(()=>{t(this,B).focusMainContainer()},0),o.div.remove(),o.isAttachedToDOM=!1,t(this,g)||this.addInkEditorIfNeeded(!1)}changeParent(o){var E;o.parent!==this&&(o.annotationElementId&&(t(this,B).addDeletedAnnotationElement(o.annotationElementId),T.AnnotationEditor.deleteAnnotationElement(o),o.annotationElementId=null),this.attach(o),(E=o.parent)==null||E.detach(o),o.setParent(this),o.div&&o.isAttachedToDOM&&(o.div.remove(),this.div.append(o.div)))}add(o){if(this.changeParent(o),t(this,B).addEditor(o),this.attach(o),!o.isAttachedToDOM){const E=o.render();this.div.append(E),o.isAttachedToDOM=!0}o.fixAndSetPosition(),o.onceAdded(),t(this,B).addToAnnotationStorage(o)}moveEditorInDOM(o){var D;if(!o.isAttachedToDOM)return;const{activeElement:E}=document;o.div.contains(E)&&(o._focusEventsAllowed=!1,setTimeout(()=>{o.div.contains(document.activeElement)?o._focusEventsAllowed=!0:(o.div.addEventListener("focusin",()=>{o._focusEventsAllowed=!0},{once:!0}),E.focus())},0)),o._structTreeParentId=(D=t(this,f))==null?void 0:D.moveElementInDOM(this.div,o.div,o.contentDiv,!0)}addOrRebuild(o){o.needsToBeRebuilt()?o.rebuild():this.add(o)}addUndoableEditor(o){const E=()=>o._uiManager.rebuild(o),D=()=>{o.remove()};this.addCommands({cmd:E,undo:D,mustExec:!1})}getNextId(){return t(this,B).getId()}pasteEditor(o,E){t(this,B).updateToolbar(o),t(this,B).updateMode(o);const{offsetX:D,offsetY:vt}=Q(this,w,$i).call(this),Y=this.getNextId(),it=Q(this,w,Xi).call(this,{parent:this,id:Y,x:D,y:vt,uiManager:t(this,B),isCentered:!0,...E});it&&this.add(it)}deserialize(o){switch(o.annotationType??o.annotationEditorType){case d.AnnotationEditorType.FREETEXT:return e.FreeTextEditor.deserialize(o,this,t(this,B));case d.AnnotationEditorType.INK:return tt.InkEditor.deserialize(o,this,t(this,B));case d.AnnotationEditorType.STAMP:return G.StampEditor.deserialize(o,this,t(this,B))}return null}addNewEditor(){Q(this,w,ci).call(this,Q(this,w,$i).call(this),!0)}setSelected(o){t(this,B).setSelected(o)}toggleSelected(o){t(this,B).toggleSelected(o)}isSelected(o){return t(this,B).isSelected(o)}unselect(o){t(this,B).unselect(o)}pointerup(o){const{isMac:E}=d.FeatureTest.platform;if(!(o.button!==0||o.ctrlKey&&E)&&o.target===this.div&&t(this,_)){if(gt(this,_,!1),!t(this,W)){gt(this,W,!0);return}if(t(this,B).getMode()===d.AnnotationEditorType.STAMP){t(this,B).unselectAll();return}Q(this,w,ci).call(this,o,!1)}}pointerdown(o){if(t(this,_)){gt(this,_,!1);return}const{isMac:E}=d.FeatureTest.platform;if(o.button!==0||o.ctrlKey&&E||o.target!==this.div)return;gt(this,_,!0);const D=t(this,B).getActive();gt(this,W,!D||D.isEmpty())}findNewParent(o,E,D){const vt=t(this,B).findParent(E,D);return vt===null||vt===this?!1:(vt.changeParent(o),!0)}destroy(){var o,E;((o=t(this,B).getActive())==null?void 0:o.parent)===this&&(t(this,B).commitOrRemove(),t(this,B).setActiveEditor(null));for(const D of t(this,k).values())(E=t(this,f))==null||E.removePointerInTextLayer(D.contentDiv),D.setParent(null),D.isAttachedToDOM=!1,D.div.remove();this.div=null,t(this,k).clear(),t(this,B).removeLayer(this)}render({viewport:o}){this.viewport=o,(0,Rt.setLayerDimensions)(this.div,o);for(const E of t(this,B).getEditors(this.pageIndex))this.add(E);this.updateMode()}update({viewport:o}){t(this,B).commitOrRemove(),this.viewport=o,(0,Rt.setLayerDimensions)(this.div,{rotation:o.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:o,pageHeight:E}=this.viewport.rawDims;return[o,E]}};f=new WeakMap,W=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,k=new WeakMap,_=new WeakMap,g=new WeakMap,S=new WeakMap,B=new WeakMap,w=new WeakSet,Xi=function(o){switch(t(this,B).getMode()){case d.AnnotationEditorType.FREETEXT:return new e.FreeTextEditor(o);case d.AnnotationEditorType.INK:return new tt.InkEditor(o);case d.AnnotationEditorType.STAMP:return new G.StampEditor(o)}return null},ci=function(o,E){const D=this.getNextId(),vt=Q(this,w,Xi).call(this,{parent:this,id:D,x:o.offsetX,y:o.offsetY,uiManager:t(this,B),isCentered:E});return vt&&this.add(vt),vt},$i=function(){const{x:o,y:E,width:D,height:vt}=this.div.getBoundingClientRect(),Y=Math.max(0,o),it=Math.max(0,E),q=Math.min(window.innerWidth,o+D),bt=Math.min(window.innerHeight,E+vt),M=(Y+q)/2-o,X=(it+bt)/2-E,[lt,P]=this.viewport.rotation%180===0?[M,X]:[X,M];return{offsetX:lt,offsetY:P}},Yi=function(){gt(this,g,!0);for(const o of t(this,k).values())o.isEmpty()&&o.remove();gt(this,g,!1)},qe(c,"_initialized",!1);let O=c;v.AnnotationEditorLayer=O},(h,v,At)=>{var G,O,f,W,j,y,b,k,_,g,Ur,jr,Wr,qn,Ki,zr,Ji;Object.defineProperty(v,"__esModule",{value:!0}),v.FreeTextEditor=void 0;var d=At(1),T=At(5),e=At(4),tt=At(29);const c=class c extends e.AnnotationEditor{constructor(E){super({...E,name:"freeTextEditor"});pt(this,g);pt(this,G,this.editorDivBlur.bind(this));pt(this,O,this.editorDivFocus.bind(this));pt(this,f,this.editorDivInput.bind(this));pt(this,W,this.editorDivKeydown.bind(this));pt(this,j);pt(this,y,"");pt(this,b,`${this.id}-editor`);pt(this,k);pt(this,_,null);gt(this,j,E.color||c._defaultColor||e.AnnotationEditor._defaultLineColor),gt(this,k,E.fontSize||c._defaultFontSize)}static get _keyboardManager(){const E=c.prototype,D=it=>it.isEmpty(),vt=T.AnnotationEditorUIManager.TRANSLATE_SMALL,Y=T.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,d.shadow)(this,"_keyboardManager",new T.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],E.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],E.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],E._translateEmpty,{args:[-vt,0],checker:D}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],E._translateEmpty,{args:[-Y,0],checker:D}],[["ArrowRight","mac+ArrowRight"],E._translateEmpty,{args:[vt,0],checker:D}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],E._translateEmpty,{args:[Y,0],checker:D}],[["ArrowUp","mac+ArrowUp"],E._translateEmpty,{args:[0,-vt],checker:D}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],E._translateEmpty,{args:[0,-Y],checker:D}],[["ArrowDown","mac+ArrowDown"],E._translateEmpty,{args:[0,vt],checker:D}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],E._translateEmpty,{args:[0,Y],checker:D}]]))}static initialize(E){e.AnnotationEditor.initialize(E,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const D=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(D.getPropertyValue("--freetext-padding"))}static updateDefaultParams(E,D){switch(E){case d.AnnotationEditorParamsType.FREETEXT_SIZE:c._defaultFontSize=D;break;case d.AnnotationEditorParamsType.FREETEXT_COLOR:c._defaultColor=D;break}}updateParams(E,D){switch(E){case d.AnnotationEditorParamsType.FREETEXT_SIZE:Q(this,g,Ur).call(this,D);break;case d.AnnotationEditorParamsType.FREETEXT_COLOR:Q(this,g,jr).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[d.AnnotationEditorParamsType.FREETEXT_SIZE,c._defaultFontSize],[d.AnnotationEditorParamsType.FREETEXT_COLOR,c._defaultColor||e.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[d.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,k)],[d.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,j)]]}_translateEmpty(E,D){this._uiManager.translateSelectedEditors(E,D,!0)}getInitialTranslation(){const E=this.parentScale;return[-c._internalPadding*E,-(c._internalPadding+t(this,k))*E]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(d.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,W)),this.editorDiv.addEventListener("focus",t(this,O)),this.editorDiv.addEventListener("blur",t(this,G)),this.editorDiv.addEventListener("input",t(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,b)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,W)),this.editorDiv.removeEventListener("focus",t(this,O)),this.editorDiv.removeEventListener("blur",t(this,G)),this.editorDiv.removeEventListener("input",t(this,f)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(E){this._focusEventsAllowed&&(super.focusin(E),E.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var E;if(this.width){Q(this,g,Ji).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(E=this._initialOptions)!=null&&E.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const E=t(this,y),D=gt(this,y,Q(this,g,Wr).call(this).trimEnd());if(E===D)return;const vt=Y=>{if(gt(this,y,Y),!Y){this.remove();return}Q(this,g,Ki).call(this),this._uiManager.rebuild(this),Q(this,g,qn).call(this)};this.addCommands({cmd:()=>{vt(D)},undo:()=>{vt(E)},mustExec:!1}),Q(this,g,qn).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(E){this.enterInEditMode()}keydown(E){E.target===this.div&&E.key==="Enter"&&(this.enterInEditMode(),E.preventDefault())}editorDivKeydown(E){c._keyboardManager.exec(this,E)}editorDivFocus(E){this.isEditing=!0}editorDivBlur(E){this.isEditing=!1}editorDivInput(E){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let E,D;this.width&&(E=this.x,D=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,b)),this.enableEditing(),e.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Y=>{var it;return(it=this.editorDiv)==null?void 0:it.setAttribute("aria-label",Y)}),e.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Y=>{var it;return(it=this.editorDiv)==null?void 0:it.setAttribute("default-content",Y)}),this.editorDiv.contentEditable=!0;const{style:vt}=this.editorDiv;if(vt.fontSize=`calc(${t(this,k)}px * var(--scale-factor))`,vt.color=t(this,j),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,T.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Y,it]=this.parentDimensions;if(this.annotationElementId){const{position:q}=t(this,_);let[bt,M]=this.getInitialTranslation();[bt,M]=this.pageTranslationToScreen(bt,M);const[X,lt]=this.pageDimensions,[P,i]=this.pageTranslation;let r,m;switch(this.rotation){case 0:r=E+(q[0]-P)/X,m=D+this.height-(q[1]-i)/lt;break;case 90:r=E+(q[0]-P)/X,m=D-(q[1]-i)/lt,[bt,M]=[M,-bt];break;case 180:r=E-this.width+(q[0]-P)/X,m=D-(q[1]-i)/lt,[bt,M]=[-bt,-M];break;case 270:r=E+(q[0]-P-this.height*lt)/X,m=D+(q[1]-i-this.width*X)/lt,[bt,M]=[-M,bt];break}this.setAt(r*Y,m*it,bt,M)}else this.setAt(E*Y,D*it,this.width*Y,this.height*it);Q(this,g,Ki).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(E,D,vt){let Y=null;if(E instanceof tt.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:q,fontColor:bt},rect:M,rotation:X,id:lt},textContent:P,textPosition:i,parent:{page:{pageNumber:r}}}=E;if(!P||P.length===0)return null;Y=E={annotationType:d.AnnotationEditorType.FREETEXT,color:Array.from(bt),fontSize:q,value:P.join(`
`),position:i,pageIndex:r-1,rect:M,rotation:X,id:lt,deleted:!1}}const it=super.deserialize(E,D,vt);return gt(it,k,E.fontSize),gt(it,j,d.Util.makeHexColor(...E.color)),gt(it,y,E.value),it.annotationElementId=E.id||null,gt(it,_,Y),it}serialize(E=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const D=c._internalPadding*this.parentScale,vt=this.getRect(D,D),Y=e.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,j)),it={annotationType:d.AnnotationEditorType.FREETEXT,color:Y,fontSize:t(this,k),value:t(this,y),pageIndex:this.pageIndex,rect:vt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return E?it:this.annotationElementId&&!Q(this,g,zr).call(this,it)?null:(it.id=this.annotationElementId,it)}};G=new WeakMap,O=new WeakMap,f=new WeakMap,W=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,k=new WeakMap,_=new WeakMap,g=new WeakSet,Ur=function(E){const D=Y=>{this.editorDiv.style.fontSize=`calc(${Y}px * var(--scale-factor))`,this.translate(0,-(Y-t(this,k))*this.parentScale),gt(this,k,Y),Q(this,g,qn).call(this)},vt=t(this,k);this.addCommands({cmd:()=>{D(E)},undo:()=>{D(vt)},mustExec:!0,type:d.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},jr=function(E){const D=t(this,j);this.addCommands({cmd:()=>{gt(this,j,this.editorDiv.style.color=E)},undo:()=>{gt(this,j,this.editorDiv.style.color=D)},mustExec:!0,type:d.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Wr=function(){const E=this.editorDiv.getElementsByTagName("div");if(E.length===0)return this.editorDiv.innerText;const D=[];for(const vt of E)D.push(vt.innerText.replace(/\r\n?|\n/,""));return D.join(`
`)},qn=function(){const[E,D]=this.parentDimensions;let vt;if(this.isAttachedToDOM)vt=this.div.getBoundingClientRect();else{const{currentLayer:Y,div:it}=this,q=it.style.display;it.style.display="hidden",Y.div.append(this.div),vt=it.getBoundingClientRect(),it.remove(),it.style.display=q}this.rotation%180===this.parentRotation%180?(this.width=vt.width/E,this.height=vt.height/D):(this.width=vt.height/E,this.height=vt.width/D),this.fixAndSetPosition()},Ki=function(){if(this.editorDiv.replaceChildren(),!!t(this,y))for(const E of t(this,y).split(`
`)){const D=document.createElement("div");D.append(E?document.createTextNode(E):document.createElement("br")),this.editorDiv.append(D)}},zr=function(E){const{value:D,fontSize:vt,color:Y,rect:it,pageIndex:q}=t(this,_);return E.value!==D||E.fontSize!==vt||E.rect.some((bt,M)=>Math.abs(bt-it[M])>=1)||E.color.some((bt,M)=>bt!==Y[M])||E.pageIndex!==q},Ji=function(E=!1){if(!this.annotationElementId)return;if(Q(this,g,qn).call(this),!E&&(this.width===0||this.height===0)){setTimeout(()=>Q(this,g,Ji).call(this,!0),0);return}const D=c._internalPadding*this.parentScale;t(this,_).rect=this.getRect(D,D)},qe(c,"_freeTextDefaultContent",""),qe(c,"_internalPadding",0),qe(c,"_defaultColor",null),qe(c,"_defaultFontSize",10),qe(c,"_type","freetext");let Rt=c;v.FreeTextEditor=Rt},(h,v,At)=>{var m,L,Mn,Vr,mt,St,Et,Pt,xt,Ft,ct,ut,A,I,nt,dt,wt,Lt,kt,et,Wt,Bt,Gr,hi,Zi,Qi,ie,ye,De,Tt,rt,at,Xt,tr,oe,H,Ct,jt,qr,er;Object.defineProperty(v,"__esModule",{value:!0}),v.StampAnnotationElement=v.InkAnnotationElement=v.FreeTextAnnotationElement=v.AnnotationLayer=void 0;var d=At(1),T=At(6),e=At(3),tt=At(30),Rt=At(31),G=At(32);const O=1e3,f=9,W=new WeakSet;function j(qt){return{width:qt[2]-qt[0],height:qt[3]-qt[1]}}class y{static create(R){switch(R.data.annotationType){case d.AnnotationType.LINK:return new k(R);case d.AnnotationType.TEXT:return new _(R);case d.AnnotationType.WIDGET:switch(R.data.fieldType){case"Tx":return new S(R);case"Btn":return R.data.radioButton?new s(R):R.data.checkBox?new w(R):new u(R);case"Ch":return new a(R);case"Sig":return new B(R)}return new g(R);case d.AnnotationType.POPUP:return new l(R);case d.AnnotationType.FREETEXT:return new N(R);case d.AnnotationType.LINE:return new o(R);case d.AnnotationType.SQUARE:return new E(R);case d.AnnotationType.CIRCLE:return new D(R);case d.AnnotationType.POLYLINE:return new vt(R);case d.AnnotationType.CARET:return new it(R);case d.AnnotationType.INK:return new q(R);case d.AnnotationType.POLYGON:return new Y(R);case d.AnnotationType.HIGHLIGHT:return new bt(R);case d.AnnotationType.UNDERLINE:return new M(R);case d.AnnotationType.SQUIGGLY:return new X(R);case d.AnnotationType.STRIKEOUT:return new lt(R);case d.AnnotationType.STAMP:return new P(R);case d.AnnotationType.FILEATTACHMENT:return new i(R);default:return new b(R)}}}const F=class F{constructor(R,{isRenderable:C=!1,ignoreBorder:K=!1,createQuadrilaterals:_t=!1}={}){pt(this,m,!1);this.isRenderable=C,this.data=R.data,this.layer=R.layer,this.linkService=R.linkService,this.downloadManager=R.downloadManager,this.imageResourcesPath=R.imageResourcesPath,this.renderForms=R.renderForms,this.svgFactory=R.svgFactory,this.annotationStorage=R.annotationStorage,this.enableScripting=R.enableScripting,this.hasJSActions=R.hasJSActions,this._fieldObjects=R.fieldObjects,this.parent=R.parent,C&&(this.container=this._createContainer(K)),_t&&this._createQuadrilaterals()}static _hasPopupData({titleObj:R,contentsObj:C,richText:K}){return!!(R!=null&&R.str||C!=null&&C.str||K!=null&&K.str)}get hasPopupData(){return F._hasPopupData(this.data)}_createContainer(R){const{data:C,parent:{page:K,viewport:_t}}=this,yt=document.createElement("section");yt.setAttribute("data-annotation-id",C.id),this instanceof g||(yt.tabIndex=O),yt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&yt.setAttribute("aria-haspopup","dialog"),C.noRotate&&yt.classList.add("norotate");const{pageWidth:Mt,pageHeight:Nt,pageX:Qt,pageY:Yt}=_t.rawDims;if(!C.rect||this instanceof l){const{rotation:de}=C;return!C.hasOwnCanvas&&de!==0&&this.setRotation(de,yt),yt}const{width:Vt,height:be}=j(C.rect),Kt=d.Util.normalizeRect([C.rect[0],K.view[3]-C.rect[1]+K.view[1],C.rect[2],K.view[3]-C.rect[3]+K.view[1]]);if(!R&&C.borderStyle.width>0){yt.style.borderWidth=`${C.borderStyle.width}px`;const de=C.borderStyle.horizontalCornerRadius,Ee=C.borderStyle.verticalCornerRadius;if(de>0||Ee>0){const Ue=`calc(${de}px * var(--scale-factor)) / calc(${Ee}px * var(--scale-factor))`;yt.style.borderRadius=Ue}else if(this instanceof s){const Ue=`calc(${Vt}px * var(--scale-factor)) / calc(${be}px * var(--scale-factor))`;yt.style.borderRadius=Ue}switch(C.borderStyle.style){case d.AnnotationBorderStyleType.SOLID:yt.style.borderStyle="solid";break;case d.AnnotationBorderStyleType.DASHED:yt.style.borderStyle="dashed";break;case d.AnnotationBorderStyleType.BEVELED:(0,d.warn)("Unimplemented border style: beveled");break;case d.AnnotationBorderStyleType.INSET:(0,d.warn)("Unimplemented border style: inset");break;case d.AnnotationBorderStyleType.UNDERLINE:yt.style.borderBottomStyle="solid";break}const xe=C.borderColor||null;xe?(gt(this,m,!0),yt.style.borderColor=d.Util.makeHexColor(xe[0]|0,xe[1]|0,xe[2]|0)):yt.style.borderWidth=0}yt.style.left=`${100*(Kt[0]-Qt)/Mt}%`,yt.style.top=`${100*(Kt[1]-Yt)/Nt}%`;const{rotation:ne}=C;return C.hasOwnCanvas||ne===0?(yt.style.width=`${100*Vt/Mt}%`,yt.style.height=`${100*be/Nt}%`):this.setRotation(ne,yt),yt}setRotation(R,C=this.container){if(!this.data.rect)return;const{pageWidth:K,pageHeight:_t}=this.parent.viewport.rawDims,{width:yt,height:Mt}=j(this.data.rect);let Nt,Qt;R%180===0?(Nt=100*yt/K,Qt=100*Mt/_t):(Nt=100*Mt/K,Qt=100*yt/_t),C.style.width=`${Nt}%`,C.style.height=`${Qt}%`,C.setAttribute("data-main-rotation",(360-R)%360)}get _commonActions(){const R=(C,K,_t)=>{const yt=_t.detail[C],Mt=yt[0],Nt=yt.slice(1);_t.target.style[K]=tt.ColorConverters[`${Mt}_HTML`](Nt),this.annotationStorage.setValue(this.data.id,{[K]:tt.ColorConverters[`${Mt}_rgb`](Nt)})};return(0,d.shadow)(this,"_commonActions",{display:C=>{const{display:K}=C.detail,_t=K%2===1;this.container.style.visibility=_t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:_t,noPrint:K===1||K===2})},print:C=>{this.annotationStorage.setValue(this.data.id,{noPrint:!C.detail.print})},hidden:C=>{const{hidden:K}=C.detail;this.container.style.visibility=K?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:K,noView:K})},focus:C=>{setTimeout(()=>C.target.focus({preventScroll:!1}),0)},userName:C=>{C.target.title=C.detail.userName},readonly:C=>{C.target.disabled=C.detail.readonly},required:C=>{this._setRequired(C.target,C.detail.required)},bgColor:C=>{R("bgColor","backgroundColor",C)},fillColor:C=>{R("fillColor","backgroundColor",C)},fgColor:C=>{R("fgColor","color",C)},textColor:C=>{R("textColor","color",C)},borderColor:C=>{R("borderColor","borderColor",C)},strokeColor:C=>{R("strokeColor","borderColor",C)},rotation:C=>{const K=C.detail.rotation;this.setRotation(K),this.annotationStorage.setValue(this.data.id,{rotation:K})}})}_dispatchEventFromSandbox(R,C){const K=this._commonActions;for(const _t of Object.keys(C.detail)){const yt=R[_t]||K[_t];yt==null||yt(C)}}_setDefaultPropertiesFromJS(R){if(!this.enableScripting)return;const C=this.annotationStorage.getRawValue(this.data.id);if(!C)return;const K=this._commonActions;for(const[_t,yt]of Object.entries(C)){const Mt=K[_t];if(Mt){const Nt={detail:{[_t]:yt},target:R};Mt(Nt),delete C[_t]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:R}=this.data;if(!R)return;const[C,K,_t,yt]=this.data.rect;if(R.length===1){const[,{x:Ee,y:xe},{x:Ue,y:sn}]=R[0];if(_t===Ee&&yt===xe&&C===Ue&&K===sn)return}const{style:Mt}=this.container;let Nt;if(t(this,m)){const{borderColor:Ee,borderWidth:xe}=Mt;Mt.borderWidth=0,Nt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ee}" stroke-width="${xe}">`],this.container.classList.add("hasBorder")}const Qt=_t-C,Yt=yt-K,{svgFactory:Vt}=this,be=Vt.createElement("svg");be.classList.add("quadrilateralsContainer"),be.setAttribute("width",0),be.setAttribute("height",0);const Kt=Vt.createElement("defs");be.append(Kt);const ne=Vt.createElement("clipPath"),de=`clippath_${this.data.id}`;ne.setAttribute("id",de),ne.setAttribute("clipPathUnits","objectBoundingBox"),Kt.append(ne);for(const[,{x:Ee,y:xe},{x:Ue,y:sn}]of R){const Je=Vt.createElement("rect"),mn=(Ue-C)/Qt,bn=(yt-xe)/Yt,_n=(Ee-Ue)/Qt,Yn=(xe-sn)/Yt;Je.setAttribute("x",mn),Je.setAttribute("y",bn),Je.setAttribute("width",_n),Je.setAttribute("height",Yn),ne.append(Je),Nt==null||Nt.push(`<rect vector-effect="non-scaling-stroke" x="${mn}" y="${bn}" width="${_n}" height="${Yn}"/>`)}t(this,m)&&(Nt.push("</g></svg>')"),Mt.backgroundImage=Nt.join("")),this.container.append(be),this.container.style.clipPath=`url(#${de})`}_createPopup(){const{container:R,data:C}=this;R.setAttribute("aria-haspopup","dialog");const K=new l({data:{color:C.color,titleObj:C.titleObj,modificationDate:C.modificationDate,contentsObj:C.contentsObj,richText:C.richText,parentRect:C.rect,borderStyle:0,id:`popup_${C.id}`,rotation:C.rotation},parent:this.parent,elements:[this]});this.parent.div.append(K.render())}render(){(0,d.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(R,C=null){const K=[];if(this._fieldObjects){const _t=this._fieldObjects[R];if(_t)for(const{page:yt,id:Mt,exportValues:Nt}of _t){if(yt===-1||Mt===C)continue;const Qt=typeof Nt=="string"?Nt:null,Yt=document.querySelector(`[data-element-id="${Mt}"]`);if(Yt&&!W.has(Yt)){(0,d.warn)(`_getElementsByName - element not allowed: ${Mt}`);continue}K.push({id:Mt,exportValue:Qt,domElement:Yt})}return K}for(const _t of document.getElementsByName(R)){const{exportValue:yt}=_t,Mt=_t.getAttribute("data-element-id");Mt!==C&&W.has(_t)&&K.push({id:Mt,exportValue:yt,domElement:_t})}return K}show(){var R;this.container&&(this.container.hidden=!1),(R=this.popup)==null||R.maybeShow()}hide(){var R;this.container&&(this.container.hidden=!0),(R=this.popup)==null||R.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const R=this.getElementsToTriggerPopup();if(Array.isArray(R))for(const C of R)C.classList.add("highlightArea");else R.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:R,data:{id:C}}=this;this.container.addEventListener("dblclick",()=>{var K;(K=this.linkService.eventBus)==null||K.dispatch("switchannotationeditormode",{source:this,mode:R,editId:C})})}};m=new WeakMap;let b=F;class k extends b{constructor(C,K=null){super(C,{isRenderable:!0,ignoreBorder:!!(K!=null&&K.ignoreBorder),createQuadrilaterals:!0});pt(this,L);this.isTooltipOnly=C.data.isTooltipOnly}render(){const{data:C,linkService:K}=this,_t=document.createElement("a");_t.setAttribute("data-element-id",C.id);let yt=!1;return C.url?(K.addLinkAttributes(_t,C.url,C.newWindow),yt=!0):C.action?(this._bindNamedAction(_t,C.action),yt=!0):C.attachment?(this._bindAttachment(_t,C.attachment),yt=!0):C.setOCGState?(Q(this,L,Vr).call(this,_t,C.setOCGState),yt=!0):C.dest?(this._bindLink(_t,C.dest),yt=!0):(C.actions&&(C.actions.Action||C.actions["Mouse Up"]||C.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(_t,C),yt=!0),C.resetForm?(this._bindResetFormAction(_t,C.resetForm),yt=!0):this.isTooltipOnly&&!yt&&(this._bindLink(_t,""),yt=!0)),this.container.classList.add("linkAnnotation"),yt&&this.container.append(_t),this.container}_bindLink(C,K){C.href=this.linkService.getDestinationHash(K),C.onclick=()=>(K&&this.linkService.goToDestination(K),!1),(K||K==="")&&Q(this,L,Mn).call(this)}_bindNamedAction(C,K){C.href=this.linkService.getAnchorUrl(""),C.onclick=()=>(this.linkService.executeNamedAction(K),!1),Q(this,L,Mn).call(this)}_bindAttachment(C,K){C.href=this.linkService.getAnchorUrl(""),C.onclick=()=>{var _t;return(_t=this.downloadManager)==null||_t.openOrDownloadData(this.container,K.content,K.filename),!1},Q(this,L,Mn).call(this)}_bindJSAction(C,K){C.href=this.linkService.getAnchorUrl("");const _t=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const yt of Object.keys(K.actions)){const Mt=_t.get(yt);Mt&&(C[Mt]=()=>{var Nt;return(Nt=this.linkService.eventBus)==null||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K.id,name:yt}}),!1})}C.onclick||(C.onclick=()=>!1),Q(this,L,Mn).call(this)}_bindResetFormAction(C,K){const _t=C.onclick;if(_t||(C.href=this.linkService.getAnchorUrl("")),Q(this,L,Mn).call(this),!this._fieldObjects){(0,d.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),_t||(C.onclick=()=>!1);return}C.onclick=()=>{var be;_t==null||_t();const{fields:yt,refs:Mt,include:Nt}=K,Qt=[];if(yt.length!==0||Mt.length!==0){const Kt=new Set(Mt);for(const ne of yt){const de=this._fieldObjects[ne]||[];for(const{id:Ee}of de)Kt.add(Ee)}for(const ne of Object.values(this._fieldObjects))for(const de of ne)Kt.has(de.id)===Nt&&Qt.push(de)}else for(const Kt of Object.values(this._fieldObjects))Qt.push(...Kt);const Yt=this.annotationStorage,Vt=[];for(const Kt of Qt){const{id:ne}=Kt;switch(Vt.push(ne),Kt.type){case"text":{const Ee=Kt.defaultValue||"";Yt.setValue(ne,{value:Ee});break}case"checkbox":case"radiobutton":{const Ee=Kt.defaultValue===Kt.exportValues;Yt.setValue(ne,{value:Ee});break}case"combobox":case"listbox":{const Ee=Kt.defaultValue||"";Yt.setValue(ne,{value:Ee});break}default:continue}const de=document.querySelector(`[data-element-id="${ne}"]`);if(de){if(!W.has(de)){(0,d.warn)(`_bindResetFormAction - element not allowed: ${ne}`);continue}}else continue;de.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((be=this.linkService.eventBus)==null||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Vt,name:"ResetForm"}})),!1}}}L=new WeakSet,Mn=function(){this.container.setAttribute("data-internal-link","")},Vr=function(C,K){C.href=this.linkService.getAnchorUrl(""),C.onclick=()=>(this.linkService.executeSetOCGState(K),!1),Q(this,L,Mn).call(this)};class _ extends b{constructor(R){super(R,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const R=document.createElement("img");return R.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",R.alt="[{{type}} Annotation]",R.dataset.l10nId="text_annotation_type",R.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(R),this.container}}class g extends b{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(R){var C;this.data.hasOwnCanvas&&(((C=R.previousSibling)==null?void 0:C.nodeName)==="CANVAS"&&(R.previousSibling.hidden=!0),R.hidden=!1)}_getKeyModifier(R){const{isWin:C,isMac:K}=d.FeatureTest.platform;return C&&R.ctrlKey||K&&R.metaKey}_setEventListener(R,C,K,_t,yt){K.includes("mouse")?R.addEventListener(K,Mt=>{var Nt;(Nt=this.linkService.eventBus)==null||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_t,value:yt(Mt),shift:Mt.shiftKey,modifier:this._getKeyModifier(Mt)}})}):R.addEventListener(K,Mt=>{var Nt;if(K==="blur"){if(!C.focused||!Mt.relatedTarget)return;C.focused=!1}else if(K==="focus"){if(C.focused)return;C.focused=!0}yt&&((Nt=this.linkService.eventBus)==null||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_t,value:yt(Mt)}}))})}_setEventListeners(R,C,K,_t){var yt,Mt,Nt;for(const[Qt,Yt]of K)(Yt==="Action"||(yt=this.data.actions)!=null&&yt[Yt])&&((Yt==="Focus"||Yt==="Blur")&&(C||(C={focused:!1})),this._setEventListener(R,C,Qt,Yt,_t),Yt==="Focus"&&!((Mt=this.data.actions)!=null&&Mt.Blur)?this._setEventListener(R,C,"blur","Blur",null):Yt==="Blur"&&!((Nt=this.data.actions)!=null&&Nt.Focus)&&this._setEventListener(R,C,"focus","Focus",null))}_setBackgroundColor(R){const C=this.data.backgroundColor||null;R.style.backgroundColor=C===null?"transparent":d.Util.makeHexColor(C[0],C[1],C[2])}_setTextStyle(R){const C=["left","center","right"],{fontColor:K}=this.data.defaultAppearanceData,_t=this.data.defaultAppearanceData.fontSize||f,yt=R.style;let Mt;const Nt=2,Qt=Yt=>Math.round(10*Yt)/10;if(this.data.multiLine){const Yt=Math.abs(this.data.rect[3]-this.data.rect[1]-Nt),Vt=Math.round(Yt/(d.LINE_FACTOR*_t))||1,be=Yt/Vt;Mt=Math.min(_t,Qt(be/d.LINE_FACTOR))}else{const Yt=Math.abs(this.data.rect[3]-this.data.rect[1]-Nt);Mt=Math.min(_t,Qt(Yt/d.LINE_FACTOR))}yt.fontSize=`calc(${Mt}px * var(--scale-factor))`,yt.color=d.Util.makeHexColor(K[0],K[1],K[2]),this.data.textAlignment!==null&&(yt.textAlign=C[this.data.textAlignment])}_setRequired(R,C){C?R.setAttribute("required",!0):R.removeAttribute("required"),R.setAttribute("aria-required",C)}}class S extends g{constructor(R){const C=R.renderForms||!R.data.hasAppearance&&!!R.data.fieldValue;super(R,{isRenderable:C})}setPropertyOnSiblings(R,C,K,_t){const yt=this.annotationStorage;for(const Mt of this._getElementsByName(R.name,R.id))Mt.domElement&&(Mt.domElement[C]=K),yt.setValue(Mt.id,{[_t]:K})}render(){var _t,yt;const R=this.annotationStorage,C=this.data.id;this.container.classList.add("textWidgetAnnotation");let K=null;if(this.renderForms){const Mt=R.getValue(C,{value:this.data.fieldValue});let Nt=Mt.value||"";const Qt=R.getValue(C,{charLimit:this.data.maxLen}).charLimit;Qt&&Nt.length>Qt&&(Nt=Nt.slice(0,Qt));let Yt=Mt.formattedValue||((_t=this.data.textContent)==null?void 0:_t.join(`
`))||null;Yt&&this.data.comb&&(Yt=Yt.replaceAll(/\s+/g,""));const Vt={userValue:Nt,formattedValue:Yt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(K=document.createElement("textarea"),K.textContent=Yt??Nt,this.data.doNotScroll&&(K.style.overflowY="hidden")):(K=document.createElement("input"),K.type="text",K.setAttribute("value",Yt??Nt),this.data.doNotScroll&&(K.style.overflowX="hidden")),this.data.hasOwnCanvas&&(K.hidden=!0),W.add(K),K.setAttribute("data-element-id",C),K.disabled=this.data.readOnly,K.name=this.data.fieldName,K.tabIndex=O,this._setRequired(K,this.data.required),Qt&&(K.maxLength=Qt),K.addEventListener("input",Kt=>{R.setValue(C,{value:Kt.target.value}),this.setPropertyOnSiblings(K,"value",Kt.target.value,"value"),Vt.formattedValue=null}),K.addEventListener("resetform",Kt=>{const ne=this.data.defaultFieldValue??"";K.value=Vt.userValue=ne,Vt.formattedValue=null});let be=Kt=>{const{formattedValue:ne}=Vt;ne!=null&&(Kt.target.value=ne),Kt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){K.addEventListener("focus",ne=>{if(Vt.focused)return;const{target:de}=ne;Vt.userValue&&(de.value=Vt.userValue),Vt.lastCommittedValue=de.value,Vt.commitKey=1,Vt.focused=!0}),K.addEventListener("updatefromsandbox",ne=>{this.showElementAndHideCanvas(ne.target);const de={value(Ee){Vt.userValue=Ee.detail.value??"",R.setValue(C,{value:Vt.userValue.toString()}),Ee.target.value=Vt.userValue},formattedValue(Ee){const{formattedValue:xe}=Ee.detail;Vt.formattedValue=xe,xe!=null&&Ee.target!==document.activeElement&&(Ee.target.value=xe),R.setValue(C,{formattedValue:xe})},selRange(Ee){Ee.target.setSelectionRange(...Ee.detail.selRange)},charLimit:Ee=>{var Je;const{charLimit:xe}=Ee.detail,{target:Ue}=Ee;if(xe===0){Ue.removeAttribute("maxLength");return}Ue.setAttribute("maxLength",xe);let sn=Vt.userValue;!sn||sn.length<=xe||(sn=sn.slice(0,xe),Ue.value=Vt.userValue=sn,R.setValue(C,{value:sn}),(Je=this.linkService.eventBus)==null||Je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:sn,willCommit:!0,commitKey:1,selStart:Ue.selectionStart,selEnd:Ue.selectionEnd}}))}};this._dispatchEventFromSandbox(de,ne)}),K.addEventListener("keydown",ne=>{var xe;Vt.commitKey=1;let de=-1;if(ne.key==="Escape"?de=0:ne.key==="Enter"&&!this.data.multiLine?de=2:ne.key==="Tab"&&(Vt.commitKey=3),de===-1)return;const{value:Ee}=ne.target;Vt.lastCommittedValue!==Ee&&(Vt.lastCommittedValue=Ee,Vt.userValue=Ee,(xe=this.linkService.eventBus)==null||xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:Ee,willCommit:!0,commitKey:de,selStart:ne.target.selectionStart,selEnd:ne.target.selectionEnd}}))});const Kt=be;be=null,K.addEventListener("blur",ne=>{var Ee;if(!Vt.focused||!ne.relatedTarget)return;Vt.focused=!1;const{value:de}=ne.target;Vt.userValue=de,Vt.lastCommittedValue!==de&&((Ee=this.linkService.eventBus)==null||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:de,willCommit:!0,commitKey:Vt.commitKey,selStart:ne.target.selectionStart,selEnd:ne.target.selectionEnd}})),Kt(ne)}),(yt=this.data.actions)!=null&&yt.Keystroke&&K.addEventListener("beforeinput",ne=>{var bn;Vt.lastCommittedValue=null;const{data:de,target:Ee}=ne,{value:xe,selectionStart:Ue,selectionEnd:sn}=Ee;let Je=Ue,mn=sn;switch(ne.inputType){case"deleteWordBackward":{const _n=xe.substring(0,Ue).match(/\w*[^\w]*$/);_n&&(Je-=_n[0].length);break}case"deleteWordForward":{const _n=xe.substring(Ue).match(/^[^\w]*\w*/);_n&&(mn+=_n[0].length);break}case"deleteContentBackward":Ue===sn&&(Je-=1);break;case"deleteContentForward":Ue===sn&&(mn+=1);break}ne.preventDefault(),(bn=this.linkService.eventBus)==null||bn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:xe,change:de||"",willCommit:!1,selStart:Je,selEnd:mn}})}),this._setEventListeners(K,Vt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ne=>ne.target.value)}if(be&&K.addEventListener("blur",be),this.data.comb){const ne=(this.data.rect[2]-this.data.rect[0])/Qt;K.classList.add("comb"),K.style.letterSpacing=`calc(${ne}px * var(--scale-factor) - 1ch)`}}else K=document.createElement("div"),K.textContent=this.data.fieldValue,K.style.verticalAlign="middle",K.style.display="table-cell";return this._setTextStyle(K),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class B extends g{constructor(R){super(R,{isRenderable:!!R.data.hasOwnCanvas})}}class w extends g{constructor(R){super(R,{isRenderable:R.renderForms})}render(){const R=this.annotationStorage,C=this.data,K=C.id;let _t=R.getValue(K,{value:C.exportValue===C.fieldValue}).value;typeof _t=="string"&&(_t=_t!=="Off",R.setValue(K,{value:_t})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const yt=document.createElement("input");return W.add(yt),yt.setAttribute("data-element-id",K),yt.disabled=C.readOnly,this._setRequired(yt,this.data.required),yt.type="checkbox",yt.name=C.fieldName,_t&&yt.setAttribute("checked",!0),yt.setAttribute("exportValue",C.exportValue),yt.tabIndex=O,yt.addEventListener("change",Mt=>{const{name:Nt,checked:Qt}=Mt.target;for(const Yt of this._getElementsByName(Nt,K)){const Vt=Qt&&Yt.exportValue===C.exportValue;Yt.domElement&&(Yt.domElement.checked=Vt),R.setValue(Yt.id,{value:Vt})}R.setValue(K,{value:Qt})}),yt.addEventListener("resetform",Mt=>{const Nt=C.defaultFieldValue||"Off";Mt.target.checked=Nt===C.exportValue}),this.enableScripting&&this.hasJSActions&&(yt.addEventListener("updatefromsandbox",Mt=>{const Nt={value(Qt){Qt.target.checked=Qt.detail.value!=="Off",R.setValue(K,{value:Qt.target.checked})}};this._dispatchEventFromSandbox(Nt,Mt)}),this._setEventListeners(yt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mt=>Mt.target.checked)),this._setBackgroundColor(yt),this._setDefaultPropertiesFromJS(yt),this.container.append(yt),this.container}}class s extends g{constructor(R){super(R,{isRenderable:R.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const R=this.annotationStorage,C=this.data,K=C.id;let _t=R.getValue(K,{value:C.fieldValue===C.buttonValue}).value;typeof _t=="string"&&(_t=_t!==C.buttonValue,R.setValue(K,{value:_t}));const yt=document.createElement("input");if(W.add(yt),yt.setAttribute("data-element-id",K),yt.disabled=C.readOnly,this._setRequired(yt,this.data.required),yt.type="radio",yt.name=C.fieldName,_t&&yt.setAttribute("checked",!0),yt.tabIndex=O,yt.addEventListener("change",Mt=>{const{name:Nt,checked:Qt}=Mt.target;for(const Yt of this._getElementsByName(Nt,K))R.setValue(Yt.id,{value:!1});R.setValue(K,{value:Qt})}),yt.addEventListener("resetform",Mt=>{const Nt=C.defaultFieldValue;Mt.target.checked=Nt!=null&&Nt===C.buttonValue}),this.enableScripting&&this.hasJSActions){const Mt=C.buttonValue;yt.addEventListener("updatefromsandbox",Nt=>{const Qt={value:Yt=>{const Vt=Mt===Yt.detail.value;for(const be of this._getElementsByName(Yt.target.name)){const Kt=Vt&&be.id===K;be.domElement&&(be.domElement.checked=Kt),R.setValue(be.id,{value:Kt})}}};this._dispatchEventFromSandbox(Qt,Nt)}),this._setEventListeners(yt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Nt=>Nt.target.checked)}return this._setBackgroundColor(yt),this._setDefaultPropertiesFromJS(yt),this.container.append(yt),this.container}}class u extends k{constructor(R){super(R,{ignoreBorder:R.data.hasAppearance})}render(){const R=super.render();R.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(R.title=this.data.alternativeText);const C=R.lastChild;return this.enableScripting&&this.hasJSActions&&C&&(this._setDefaultPropertiesFromJS(C),C.addEventListener("updatefromsandbox",K=>{this._dispatchEventFromSandbox({},K)})),R}}class a extends g{constructor(R){super(R,{isRenderable:R.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const R=this.annotationStorage,C=this.data.id,K=R.getValue(C,{value:this.data.fieldValue}),_t=document.createElement("select");W.add(_t),_t.setAttribute("data-element-id",C),_t.disabled=this.data.readOnly,this._setRequired(_t,this.data.required),_t.name=this.data.fieldName,_t.tabIndex=O;let yt=this.data.combo&&this.data.options.length>0;this.data.combo||(_t.size=this.data.options.length,this.data.multiSelect&&(_t.multiple=!0)),_t.addEventListener("resetform",Vt=>{const be=this.data.defaultFieldValue;for(const Kt of _t.options)Kt.selected=Kt.value===be});for(const Vt of this.data.options){const be=document.createElement("option");be.textContent=Vt.displayValue,be.value=Vt.exportValue,K.value.includes(Vt.exportValue)&&(be.setAttribute("selected",!0),yt=!1),_t.append(be)}let Mt=null;if(yt){const Vt=document.createElement("option");Vt.value=" ",Vt.setAttribute("hidden",!0),Vt.setAttribute("selected",!0),_t.prepend(Vt),Mt=()=>{Vt.remove(),_t.removeEventListener("input",Mt),Mt=null},_t.addEventListener("input",Mt)}const Nt=Vt=>{const be=Vt?"value":"textContent",{options:Kt,multiple:ne}=_t;return ne?Array.prototype.filter.call(Kt,de=>de.selected).map(de=>de[be]):Kt.selectedIndex===-1?null:Kt[Kt.selectedIndex][be]};let Qt=Nt(!1);const Yt=Vt=>{const be=Vt.target.options;return Array.prototype.map.call(be,Kt=>({displayValue:Kt.textContent,exportValue:Kt.value}))};return this.enableScripting&&this.hasJSActions?(_t.addEventListener("updatefromsandbox",Vt=>{const be={value(Kt){Mt==null||Mt();const ne=Kt.detail.value,de=new Set(Array.isArray(ne)?ne:[ne]);for(const Ee of _t.options)Ee.selected=de.has(Ee.value);R.setValue(C,{value:Nt(!0)}),Qt=Nt(!1)},multipleSelection(Kt){_t.multiple=!0},remove(Kt){const ne=_t.options,de=Kt.detail.remove;ne[de].selected=!1,_t.remove(de),ne.length>0&&Array.prototype.findIndex.call(ne,xe=>xe.selected)===-1&&(ne[0].selected=!0),R.setValue(C,{value:Nt(!0),items:Yt(Kt)}),Qt=Nt(!1)},clear(Kt){for(;_t.length!==0;)_t.remove(0);R.setValue(C,{value:null,items:[]}),Qt=Nt(!1)},insert(Kt){const{index:ne,displayValue:de,exportValue:Ee}=Kt.detail.insert,xe=_t.children[ne],Ue=document.createElement("option");Ue.textContent=de,Ue.value=Ee,xe?xe.before(Ue):_t.append(Ue),R.setValue(C,{value:Nt(!0),items:Yt(Kt)}),Qt=Nt(!1)},items(Kt){const{items:ne}=Kt.detail;for(;_t.length!==0;)_t.remove(0);for(const de of ne){const{displayValue:Ee,exportValue:xe}=de,Ue=document.createElement("option");Ue.textContent=Ee,Ue.value=xe,_t.append(Ue)}_t.options.length>0&&(_t.options[0].selected=!0),R.setValue(C,{value:Nt(!0),items:Yt(Kt)}),Qt=Nt(!1)},indices(Kt){const ne=new Set(Kt.detail.indices);for(const de of Kt.target.options)de.selected=ne.has(de.index);R.setValue(C,{value:Nt(!0)}),Qt=Nt(!1)},editable(Kt){Kt.target.disabled=!Kt.detail.editable}};this._dispatchEventFromSandbox(be,Vt)}),_t.addEventListener("input",Vt=>{var Kt;const be=Nt(!0);R.setValue(C,{value:be}),Vt.preventDefault(),(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:Qt,changeEx:be,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(_t,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Vt=>Vt.target.value)):_t.addEventListener("input",function(Vt){R.setValue(C,{value:Nt(!0)})}),this.data.combo&&this._setTextStyle(_t),this._setBackgroundColor(_t),this._setDefaultPropertiesFromJS(_t),this.container.append(_t),this.container}}class l extends b{constructor(R){const{data:C,elements:K}=R;super(R,{isRenderable:b._hasPopupData(C)}),this.elements=K}render(){this.container.classList.add("popupAnnotation");const R=new c({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),C=[];for(const K of this.elements)K.popup=R,C.push(K.data.id),K.addHighlightArea();return this.container.setAttribute("aria-controls",C.map(K=>`${d.AnnotationPrefix}${K}`).join(",")),this.container}}class c{constructor({container:R,color:C,elements:K,titleObj:_t,modificationDate:yt,contentsObj:Mt,richText:Nt,parent:Qt,rect:Yt,parentRect:Vt,open:be}){pt(this,Bt);pt(this,mt,null);pt(this,St,Q(this,Bt,Gr).bind(this));pt(this,Et,Q(this,Bt,Qi).bind(this));pt(this,Pt,Q(this,Bt,Zi).bind(this));pt(this,xt,Q(this,Bt,hi).bind(this));pt(this,Ft,null);pt(this,ct,null);pt(this,ut,null);pt(this,A,null);pt(this,I,null);pt(this,nt,null);pt(this,dt,!1);pt(this,wt,null);pt(this,Lt,null);pt(this,kt,null);pt(this,et,null);pt(this,Wt,!1);var ne;gt(this,ct,R),gt(this,et,_t),gt(this,ut,Mt),gt(this,kt,Nt),gt(this,I,Qt),gt(this,Ft,C),gt(this,Lt,Yt),gt(this,nt,Vt),gt(this,A,K);const Kt=T.PDFDateString.toDateObject(yt);Kt&&gt(this,mt,Qt.l10n.get("annotation_date_string",{date:Kt.toLocaleDateString(),time:Kt.toLocaleTimeString()})),this.trigger=K.flatMap(de=>de.getElementsToTriggerPopup());for(const de of this.trigger)de.addEventListener("click",t(this,xt)),de.addEventListener("mouseenter",t(this,Pt)),de.addEventListener("mouseleave",t(this,Et)),de.classList.add("popupTriggerArea");for(const de of K)(ne=de.container)==null||ne.addEventListener("keydown",t(this,St));t(this,ct).hidden=!0,be&&Q(this,Bt,hi).call(this)}render(){if(t(this,wt))return;const{page:{view:R},viewport:{rawDims:{pageWidth:C,pageHeight:K,pageX:_t,pageY:yt}}}=t(this,I),Mt=gt(this,wt,document.createElement("div"));if(Mt.className="popup",t(this,Ft)){const Je=Mt.style.outlineColor=d.Util.makeHexColor(...t(this,Ft));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Mt.style.backgroundColor=`color-mix(in srgb, ${Je} 30%, white)`:Mt.style.backgroundColor=d.Util.makeHexColor(...t(this,Ft).map(bn=>Math.floor(.7*(255-bn)+bn)))}const Nt=document.createElement("span");Nt.className="header";const Qt=document.createElement("h1");if(Nt.append(Qt),{dir:Qt.dir,str:Qt.textContent}=t(this,et),Mt.append(Nt),t(this,mt)){const Je=document.createElement("span");Je.classList.add("popupDate"),t(this,mt).then(mn=>{Je.textContent=mn}),Nt.append(Je)}const Yt=t(this,ut),Vt=t(this,kt);if(Vt!=null&&Vt.str&&(!(Yt!=null&&Yt.str)||Yt.str===Vt.str))G.XfaLayer.render({xfaHtml:Vt.html,intent:"richText",div:Mt}),Mt.lastChild.classList.add("richText","popupContent");else{const Je=this._formatContents(Yt);Mt.append(Je)}let be=!!t(this,nt),Kt=be?t(this,nt):t(this,Lt);for(const Je of t(this,A))if(!Kt||d.Util.intersect(Je.data.rect,Kt)!==null){Kt=Je.data.rect,be=!0;break}const ne=d.Util.normalizeRect([Kt[0],R[3]-Kt[1]+R[1],Kt[2],R[3]-Kt[3]+R[1]]),Ee=be?Kt[2]-Kt[0]+5:0,xe=ne[0]+Ee,Ue=ne[1],{style:sn}=t(this,ct);sn.left=`${100*(xe-_t)/C}%`,sn.top=`${100*(Ue-yt)/K}%`,t(this,ct).append(Mt)}_formatContents({str:R,dir:C}){const K=document.createElement("p");K.classList.add("popupContent"),K.dir=C;const _t=R.split(/(?:\r\n?|\n)/);for(let yt=0,Mt=_t.length;yt<Mt;++yt){const Nt=_t[yt];K.append(document.createTextNode(Nt)),yt<Mt-1&&K.append(document.createElement("br"))}return K}forceHide(){gt(this,Wt,this.isVisible),t(this,Wt)&&(t(this,ct).hidden=!0)}maybeShow(){t(this,Wt)&&(gt(this,Wt,!1),t(this,ct).hidden=!1)}get isVisible(){return t(this,ct).hidden===!1}}mt=new WeakMap,St=new WeakMap,Et=new WeakMap,Pt=new WeakMap,xt=new WeakMap,Ft=new WeakMap,ct=new WeakMap,ut=new WeakMap,A=new WeakMap,I=new WeakMap,nt=new WeakMap,dt=new WeakMap,wt=new WeakMap,Lt=new WeakMap,kt=new WeakMap,et=new WeakMap,Wt=new WeakMap,Bt=new WeakSet,Gr=function(R){R.altKey||R.shiftKey||R.ctrlKey||R.metaKey||(R.key==="Enter"||R.key==="Escape"&&t(this,dt))&&Q(this,Bt,hi).call(this)},hi=function(){gt(this,dt,!t(this,dt)),t(this,dt)?(Q(this,Bt,Zi).call(this),t(this,ct).addEventListener("click",t(this,xt)),t(this,ct).addEventListener("keydown",t(this,St))):(Q(this,Bt,Qi).call(this),t(this,ct).removeEventListener("click",t(this,xt)),t(this,ct).removeEventListener("keydown",t(this,St)))},Zi=function(){t(this,wt)||this.render(),this.isVisible?t(this,dt)&&t(this,ct).classList.add("focused"):(t(this,ct).hidden=!1,t(this,ct).style.zIndex=parseInt(t(this,ct).style.zIndex)+1e3)},Qi=function(){t(this,ct).classList.remove("focused"),!(t(this,dt)||!this.isVisible)&&(t(this,ct).hidden=!0,t(this,ct).style.zIndex=parseInt(t(this,ct).style.zIndex)-1e3)};class N extends b{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0}),this.textContent=R.data.textContent,this.textPosition=R.data.textPosition,this.annotationEditorType=d.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const R=document.createElement("div");R.classList.add("annotationTextContent"),R.setAttribute("role","comment");for(const C of this.textContent){const K=document.createElement("span");K.textContent=C,R.append(K)}this.container.append(R)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}v.FreeTextAnnotationElement=N;class o extends b{constructor(C){super(C,{isRenderable:!0,ignoreBorder:!0});pt(this,ie,null)}render(){this.container.classList.add("lineAnnotation");const C=this.data,{width:K,height:_t}=j(C.rect),yt=this.svgFactory.create(K,_t,!0),Mt=gt(this,ie,this.svgFactory.createElement("svg:line"));return Mt.setAttribute("x1",C.rect[2]-C.lineCoordinates[0]),Mt.setAttribute("y1",C.rect[3]-C.lineCoordinates[1]),Mt.setAttribute("x2",C.rect[2]-C.lineCoordinates[2]),Mt.setAttribute("y2",C.rect[3]-C.lineCoordinates[3]),Mt.setAttribute("stroke-width",C.borderStyle.width||1),Mt.setAttribute("stroke","transparent"),Mt.setAttribute("fill","transparent"),yt.append(Mt),this.container.append(yt),!C.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ie)}addHighlightArea(){this.container.classList.add("highlightArea")}}ie=new WeakMap;class E extends b{constructor(C){super(C,{isRenderable:!0,ignoreBorder:!0});pt(this,ye,null)}render(){this.container.classList.add("squareAnnotation");const C=this.data,{width:K,height:_t}=j(C.rect),yt=this.svgFactory.create(K,_t,!0),Mt=C.borderStyle.width,Nt=gt(this,ye,this.svgFactory.createElement("svg:rect"));return Nt.setAttribute("x",Mt/2),Nt.setAttribute("y",Mt/2),Nt.setAttribute("width",K-Mt),Nt.setAttribute("height",_t-Mt),Nt.setAttribute("stroke-width",Mt||1),Nt.setAttribute("stroke","transparent"),Nt.setAttribute("fill","transparent"),yt.append(Nt),this.container.append(yt),!C.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ye)}addHighlightArea(){this.container.classList.add("highlightArea")}}ye=new WeakMap;class D extends b{constructor(C){super(C,{isRenderable:!0,ignoreBorder:!0});pt(this,De,null)}render(){this.container.classList.add("circleAnnotation");const C=this.data,{width:K,height:_t}=j(C.rect),yt=this.svgFactory.create(K,_t,!0),Mt=C.borderStyle.width,Nt=gt(this,De,this.svgFactory.createElement("svg:ellipse"));return Nt.setAttribute("cx",K/2),Nt.setAttribute("cy",_t/2),Nt.setAttribute("rx",K/2-Mt/2),Nt.setAttribute("ry",_t/2-Mt/2),Nt.setAttribute("stroke-width",Mt||1),Nt.setAttribute("stroke","transparent"),Nt.setAttribute("fill","transparent"),yt.append(Nt),this.container.append(yt),!C.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,De)}addHighlightArea(){this.container.classList.add("highlightArea")}}De=new WeakMap;class vt extends b{constructor(C){super(C,{isRenderable:!0,ignoreBorder:!0});pt(this,Tt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const C=this.data,{width:K,height:_t}=j(C.rect),yt=this.svgFactory.create(K,_t,!0);let Mt=[];for(const Qt of C.vertices){const Yt=Qt.x-C.rect[0],Vt=C.rect[3]-Qt.y;Mt.push(Yt+","+Vt)}Mt=Mt.join(" ");const Nt=gt(this,Tt,this.svgFactory.createElement(this.svgElementName));return Nt.setAttribute("points",Mt),Nt.setAttribute("stroke-width",C.borderStyle.width||1),Nt.setAttribute("stroke","transparent"),Nt.setAttribute("fill","transparent"),yt.append(Nt),this.container.append(yt),!C.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tt=new WeakMap;class Y extends vt{constructor(R){super(R),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class it extends b{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class q extends b{constructor(C){super(C,{isRenderable:!0,ignoreBorder:!0});pt(this,rt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=d.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const C=this.data,{width:K,height:_t}=j(C.rect),yt=this.svgFactory.create(K,_t,!0);for(const Mt of C.inkLists){let Nt=[];for(const Yt of Mt){const Vt=Yt.x-C.rect[0],be=C.rect[3]-Yt.y;Nt.push(`${Vt},${be}`)}Nt=Nt.join(" ");const Qt=this.svgFactory.createElement(this.svgElementName);t(this,rt).push(Qt),Qt.setAttribute("points",Nt),Qt.setAttribute("stroke-width",C.borderStyle.width||1),Qt.setAttribute("stroke","transparent"),Qt.setAttribute("fill","transparent"),!C.popupRef&&this.hasPopupData&&this._createPopup(),yt.append(Qt)}return this.container.append(yt),this.container}getElementsToTriggerPopup(){return t(this,rt)}addHighlightArea(){this.container.classList.add("highlightArea")}}rt=new WeakMap,v.InkAnnotationElement=q;class bt extends b{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class M extends b{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class X extends b{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class lt extends b{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class P extends b{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}v.StampAnnotationElement=P;class i extends b{constructor(C){var yt;super(C,{isRenderable:!0});pt(this,Xt);pt(this,at,null);const{filename:K,content:_t}=this.data.file;this.filename=(0,T.getFilenameFromUrl)(K,!0),this.content=_t,(yt=this.linkService.eventBus)==null||yt.dispatch("fileattachmentannotation",{source:this,filename:K,content:_t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:C,data:K}=this;let _t;K.hasAppearance||K.fillAlpha===0?_t=document.createElement("div"):(_t=document.createElement("img"),_t.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(K.name)?"paperclip":"pushpin"}.svg`,K.fillAlpha&&K.fillAlpha<1&&(_t.style=`filter: opacity(${Math.round(K.fillAlpha*100)}%);`)),_t.addEventListener("dblclick",Q(this,Xt,tr).bind(this)),gt(this,at,_t);const{isMac:yt}=d.FeatureTest.platform;return C.addEventListener("keydown",Mt=>{Mt.key==="Enter"&&(yt?Mt.metaKey:Mt.ctrlKey)&&Q(this,Xt,tr).call(this)}),!K.popupRef&&this.hasPopupData?this._createPopup():_t.classList.add("popupTriggerArea"),C.append(_t),C}getElementsToTriggerPopup(){return t(this,at)}addHighlightArea(){this.container.classList.add("highlightArea")}}at=new WeakMap,Xt=new WeakSet,tr=function(){var C;(C=this.downloadManager)==null||C.openOrDownloadData(this.container,this.content,this.filename)};class r{constructor({div:R,accessibilityManager:C,annotationCanvasMap:K,l10n:_t,page:yt,viewport:Mt}){pt(this,jt);pt(this,oe,null);pt(this,H,null);pt(this,Ct,new Map);this.div=R,gt(this,oe,C),gt(this,H,K),this.l10n=_t,this.page=yt,this.viewport=Mt,this.zIndex=0,this.l10n||(this.l10n=Rt.NullL10n)}async render(R){const{annotations:C}=R,K=this.div;(0,T.setLayerDimensions)(K,this.viewport);const _t=new Map,yt={data:null,layer:K,linkService:R.linkService,downloadManager:R.downloadManager,imageResourcesPath:R.imageResourcesPath||"",renderForms:R.renderForms!==!1,svgFactory:new T.DOMSVGFactory,annotationStorage:R.annotationStorage||new e.AnnotationStorage,enableScripting:R.enableScripting===!0,hasJSActions:R.hasJSActions,fieldObjects:R.fieldObjects,parent:this,elements:null};for(const Mt of C){if(Mt.noHTML)continue;const Nt=Mt.annotationType===d.AnnotationType.POPUP;if(Nt){const Vt=_t.get(Mt.id);if(!Vt)continue;yt.elements=Vt}else{const{width:Vt,height:be}=j(Mt.rect);if(Vt<=0||be<=0)continue}yt.data=Mt;const Qt=y.create(yt);if(!Qt.isRenderable)continue;if(!Nt&&Mt.popupRef){const Vt=_t.get(Mt.popupRef);Vt?Vt.push(Qt):_t.set(Mt.popupRef,[Qt])}Qt.annotationEditorType>0&&t(this,Ct).set(Qt.data.id,Qt);const Yt=Qt.render();Mt.hidden&&(Yt.style.visibility="hidden"),Q(this,jt,qr).call(this,Yt,Mt.id)}Q(this,jt,er).call(this),await this.l10n.translate(K)}update({viewport:R}){const C=this.div;this.viewport=R,(0,T.setLayerDimensions)(C,{rotation:R.rotation}),Q(this,jt,er).call(this),C.hidden=!1}getEditableAnnotations(){return Array.from(t(this,Ct).values())}getEditableAnnotation(R){return t(this,Ct).get(R)}}oe=new WeakMap,H=new WeakMap,Ct=new WeakMap,jt=new WeakSet,qr=function(R,C){var _t;const K=R.firstChild||R;K.id=`${d.AnnotationPrefix}${C}`,this.div.append(R),(_t=t(this,oe))==null||_t.moveElementInDOM(this.div,R,K,!1)},er=function(){if(!t(this,H))return;const R=this.div;for(const[C,K]of t(this,H)){const _t=R.querySelector(`[data-annotation-id="${C}"]`);if(!_t)continue;const{firstChild:yt}=_t;yt?yt.nodeName==="CANVAS"?yt.replaceWith(K):yt.before(K):_t.append(K)}t(this,H).clear()},v.AnnotationLayer=r},(h,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.ColorConverters=void 0;function At(e){return Math.floor(Math.max(0,Math.min(1,e))*255).toString(16).padStart(2,"0")}function d(e){return Math.max(0,Math.min(255,255*e))}class T{static CMYK_G([tt,Rt,G,O]){return["G",1-Math.min(1,.3*tt+.59*G+.11*Rt+O)]}static G_CMYK([tt]){return["CMYK",0,0,0,1-tt]}static G_RGB([tt]){return["RGB",tt,tt,tt]}static G_rgb([tt]){return tt=d(tt),[tt,tt,tt]}static G_HTML([tt]){const Rt=At(tt);return`#${Rt}${Rt}${Rt}`}static RGB_G([tt,Rt,G]){return["G",.3*tt+.59*Rt+.11*G]}static RGB_rgb(tt){return tt.map(d)}static RGB_HTML(tt){return`#${tt.map(At).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([tt,Rt,G,O]){return["RGB",1-Math.min(1,tt+O),1-Math.min(1,G+O),1-Math.min(1,Rt+O)]}static CMYK_rgb([tt,Rt,G,O]){return[d(1-Math.min(1,tt+O)),d(1-Math.min(1,G+O)),d(1-Math.min(1,Rt+O))]}static CMYK_HTML(tt){const Rt=this.CMYK_RGB(tt).slice(1);return this.RGB_HTML(Rt)}static RGB_CMYK([tt,Rt,G]){const O=1-tt,f=1-Rt,W=1-G,j=Math.min(O,f,W);return["CMYK",O,f,W,j]}}v.ColorConverters=T},(h,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.NullL10n=void 0,v.getL10nFallback=d;const At={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};At.print_progress_percent="{{progress}}%";function d(tt,Rt){switch(tt){case"find_match_count":tt=`find_match_count[${Rt.total===1?"one":"other"}]`;break;case"find_match_count_limit":tt=`find_match_count_limit[${Rt.limit===1?"one":"other"}]`;break}return At[tt]||""}function T(tt,Rt){return Rt?tt.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(G,O)=>O in Rt?Rt[O]:"{{"+O+"}}"):tt}const e={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(tt,Rt=null,G=d(tt,Rt)){return T(G,Rt)},async translate(tt){}};v.NullL10n=e},(h,v,At)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.XfaLayer=void 0;var d=At(25);class T{static setupStorage(tt,Rt,G,O,f){const W=O.getValue(Rt,{value:null});switch(G.name){case"textarea":if(W.value!==null&&(tt.textContent=W.value),f==="print")break;tt.addEventListener("input",j=>{O.setValue(Rt,{value:j.target.value})});break;case"input":if(G.attributes.type==="radio"||G.attributes.type==="checkbox"){if(W.value===G.attributes.xfaOn?tt.setAttribute("checked",!0):W.value===G.attributes.xfaOff&&tt.removeAttribute("checked"),f==="print")break;tt.addEventListener("change",j=>{O.setValue(Rt,{value:j.target.checked?j.target.getAttribute("xfaOn"):j.target.getAttribute("xfaOff")})})}else{if(W.value!==null&&tt.setAttribute("value",W.value),f==="print")break;tt.addEventListener("input",j=>{O.setValue(Rt,{value:j.target.value})})}break;case"select":if(W.value!==null){tt.setAttribute("value",W.value);for(const j of G.children)j.attributes.value===W.value?j.attributes.selected=!0:j.attributes.hasOwnProperty("selected")&&delete j.attributes.selected}tt.addEventListener("input",j=>{const y=j.target.options,b=y.selectedIndex===-1?"":y[y.selectedIndex].value;O.setValue(Rt,{value:b})});break}}static setAttributes({html:tt,element:Rt,storage:G=null,intent:O,linkService:f}){const{attributes:W}=Rt,j=tt instanceof HTMLAnchorElement;W.type==="radio"&&(W.name=`${W.name}-${O}`);for(const[y,b]of Object.entries(W))if(b!=null)switch(y){case"class":b.length&&tt.setAttribute(y,b.join(" "));break;case"dataId":break;case"id":tt.setAttribute("data-element-id",b);break;case"style":Object.assign(tt.style,b);break;case"textContent":tt.textContent=b;break;default:(!j||y!=="href"&&y!=="newWindow")&&tt.setAttribute(y,b)}j&&f.addLinkAttributes(tt,W.href,W.newWindow),G&&W.dataId&&this.setupStorage(tt,W.dataId,Rt,G)}static render(tt){var k;const Rt=tt.annotationStorage,G=tt.linkService,O=tt.xfaHtml,f=tt.intent||"display",W=document.createElement(O.name);O.attributes&&this.setAttributes({html:W,element:O,intent:f,linkService:G});const j=[[O,-1,W]],y=tt.div;if(y.append(W),tt.viewport){const _=`matrix(${tt.viewport.transform.join(",")})`;y.style.transform=_}f!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const b=[];for(;j.length>0;){const[_,g,S]=j.at(-1);if(g+1===_.children.length){j.pop();continue}const B=_.children[++j.at(-1)[1]];if(B===null)continue;const{name:w}=B;if(w==="#text"){const u=document.createTextNode(B.value);b.push(u),S.append(u);continue}const s=(k=B==null?void 0:B.attributes)!=null&&k.xmlns?document.createElementNS(B.attributes.xmlns,w):document.createElement(w);if(S.append(s),B.attributes&&this.setAttributes({html:s,element:B,storage:Rt,intent:f,linkService:G}),B.children&&B.children.length>0)j.push([B,-1,s]);else if(B.value){const u=document.createTextNode(B.value);d.XfaText.shouldBuildText(w)&&b.push(u),s.append(u)}}for(const _ of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:b}}static update(tt){const Rt=`matrix(${tt.viewport.transform.join(",")})`;tt.div.style.transform=Rt,tt.div.hidden=!1}}v.XfaLayer=T},(h,v,At)=>{var O,f,W,j,y,b,k,_,g,S,B,w,s,u,a,Xr,$r,Yr,Kr,nr,Jr,ir,Zr,Qr,ts,es,ns,Sn,rr,ui,di,Nn,sr,fi,L,is,ar,rs,ss,or,pi,Bn;Object.defineProperty(v,"__esModule",{value:!0}),v.InkEditor=void 0;var d=At(1),T=At(4),e=At(29),tt=At(6),Rt=At(5);const Ft=class Ft extends T.AnnotationEditor{constructor(A){super({...A,name:"inkEditor"});pt(this,a);pt(this,O,0);pt(this,f,0);pt(this,W,this.canvasPointermove.bind(this));pt(this,j,this.canvasPointerleave.bind(this));pt(this,y,this.canvasPointerup.bind(this));pt(this,b,this.canvasPointerdown.bind(this));pt(this,k,new Path2D);pt(this,_,!1);pt(this,g,!1);pt(this,S,!1);pt(this,B,null);pt(this,w,0);pt(this,s,0);pt(this,u,null);this.color=A.color||null,this.thickness=A.thickness||null,this.opacity=A.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(A){T.AnnotationEditor.initialize(A,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(A,I){switch(A){case d.AnnotationEditorParamsType.INK_THICKNESS:Ft._defaultThickness=I;break;case d.AnnotationEditorParamsType.INK_COLOR:Ft._defaultColor=I;break;case d.AnnotationEditorParamsType.INK_OPACITY:Ft._defaultOpacity=I/100;break}}updateParams(A,I){switch(A){case d.AnnotationEditorParamsType.INK_THICKNESS:Q(this,a,Xr).call(this,I);break;case d.AnnotationEditorParamsType.INK_COLOR:Q(this,a,$r).call(this,I);break;case d.AnnotationEditorParamsType.INK_OPACITY:Q(this,a,Yr).call(this,I);break}}static get defaultPropertiesToUpdate(){return[[d.AnnotationEditorParamsType.INK_THICKNESS,Ft._defaultThickness],[d.AnnotationEditorParamsType.INK_COLOR,Ft._defaultColor||T.AnnotationEditor._defaultLineColor],[d.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ft._defaultOpacity*100)]]}get propertiesToUpdate(){return[[d.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ft._defaultThickness],[d.AnnotationEditorParamsType.INK_COLOR,this.color||Ft._defaultColor||T.AnnotationEditor._defaultLineColor],[d.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ft._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Q(this,a,ui).call(this),Q(this,a,di).call(this)),this.isAttachedToDOM||(this.parent.add(this),Q(this,a,Nn).call(this)),Q(this,a,Bn).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,B).disconnect(),gt(this,B,null),super.remove())}setParent(A){!this.parent&&A?this._uiManager.removeShouldRescale(this):this.parent&&A===null&&this._uiManager.addShouldRescale(this),super.setParent(A)}onScaleChanging(){const[A,I]=this.parentDimensions,nt=this.width*A,dt=this.height*I;this.setDimensions(nt,dt)}enableEditMode(){t(this,_)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,b)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,b)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,_)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),gt(this,_,!0),this.div.classList.add("disabled"),Q(this,a,Bn).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(A){this._focusEventsAllowed&&(super.focusin(A),this.enableEditMode())}canvasPointerdown(A){A.button!==0||!this.isInEditMode()||t(this,_)||(this.setInForeground(),A.preventDefault(),A.type!=="mouse"&&this.div.focus(),Q(this,a,Jr).call(this,A.offsetX,A.offsetY))}canvasPointermove(A){A.preventDefault(),Q(this,a,ir).call(this,A.offsetX,A.offsetY)}canvasPointerup(A){A.preventDefault(),Q(this,a,rr).call(this,A)}canvasPointerleave(A){Q(this,a,rr).call(this,A)}get isResizable(){return!this.isEmpty()&&t(this,_)}render(){if(this.div)return this.div;let A,I;this.width&&(A=this.x,I=this.y),super.render(),T.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(kt=>{var et;return(et=this.div)==null?void 0:et.setAttribute("aria-label",kt)});const[nt,dt,wt,Lt]=Q(this,a,Kr).call(this);if(this.setAt(nt,dt,0,0),this.setDims(wt,Lt),Q(this,a,ui).call(this),this.width){const[kt,et]=this.parentDimensions;this.setAspectRatio(this.width*kt,this.height*et),this.setAt(A*kt,I*et,this.width*kt,this.height*et),gt(this,S,!0),Q(this,a,Nn).call(this),this.setDims(this.width*kt,this.height*et),Q(this,a,Sn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Q(this,a,di).call(this),this.div}setDimensions(A,I){const nt=Math.round(A),dt=Math.round(I);if(t(this,w)===nt&&t(this,s)===dt)return;gt(this,w,nt),gt(this,s,dt),this.canvas.style.visibility="hidden";const[wt,Lt]=this.parentDimensions;this.width=A/wt,this.height=I/Lt,this.fixAndSetPosition(),t(this,_)&&Q(this,a,sr).call(this,A,I),Q(this,a,Nn).call(this),Q(this,a,Sn).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(A,I,nt){var ie,ye,De;if(A instanceof e.InkAnnotationElement)return null;const dt=super.deserialize(A,I,nt);dt.thickness=A.thickness,dt.color=d.Util.makeHexColor(...A.color),dt.opacity=A.opacity;const[wt,Lt]=dt.pageDimensions,kt=dt.width*wt,et=dt.height*Lt,Wt=dt.parentScale,Bt=A.thickness/2;gt(dt,_,!0),gt(dt,w,Math.round(kt)),gt(dt,s,Math.round(et));const{paths:ge,rect:le,rotation:Pe}=A;for(let{bezier:Tt}of ge){Tt=Q(ie=Ft,L,rs).call(ie,Tt,le,Pe);const rt=[];dt.paths.push(rt);let at=Wt*(Tt[0]-Bt),Xt=Wt*(Tt[1]-Bt);for(let oe=2,H=Tt.length;oe<H;oe+=6){const Ct=Wt*(Tt[oe]-Bt),jt=Wt*(Tt[oe+1]-Bt),Zt=Wt*(Tt[oe+2]-Bt),ee=Wt*(Tt[oe+3]-Bt),qt=Wt*(Tt[oe+4]-Bt),R=Wt*(Tt[oe+5]-Bt);rt.push([[at,Xt],[Ct,jt],[Zt,ee],[qt,R]]),at=qt,Xt=R}const Jt=Q(this,L,is).call(this,rt);dt.bezierPath2D.push(Jt)}const $t=Q(ye=dt,a,or).call(ye);return gt(dt,f,Math.max(T.AnnotationEditor.MIN_SIZE,$t[2]-$t[0])),gt(dt,O,Math.max(T.AnnotationEditor.MIN_SIZE,$t[3]-$t[1])),Q(De=dt,a,sr).call(De,kt,et),dt}serialize(){if(this.isEmpty())return null;const A=this.getRect(0,0),I=T.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:d.AnnotationEditorType.INK,color:I,thickness:this.thickness,opacity:this.opacity,paths:Q(this,a,ss).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,A),pageIndex:this.pageIndex,rect:A,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};O=new WeakMap,f=new WeakMap,W=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,k=new WeakMap,_=new WeakMap,g=new WeakMap,S=new WeakMap,B=new WeakMap,w=new WeakMap,s=new WeakMap,u=new WeakMap,a=new WeakSet,Xr=function(A){const I=this.thickness;this.addCommands({cmd:()=>{this.thickness=A,Q(this,a,Bn).call(this)},undo:()=>{this.thickness=I,Q(this,a,Bn).call(this)},mustExec:!0,type:d.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},$r=function(A){const I=this.color;this.addCommands({cmd:()=>{this.color=A,Q(this,a,Sn).call(this)},undo:()=>{this.color=I,Q(this,a,Sn).call(this)},mustExec:!0,type:d.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Yr=function(A){A/=100;const I=this.opacity;this.addCommands({cmd:()=>{this.opacity=A,Q(this,a,Sn).call(this)},undo:()=>{this.opacity=I,Q(this,a,Sn).call(this)},mustExec:!0,type:d.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Kr=function(){const{parentRotation:A,parentDimensions:[I,nt]}=this;switch(A){case 90:return[0,nt,nt,I];case 180:return[I,nt,I,nt];case 270:return[I,0,nt,I];default:return[0,0,I,nt]}},nr=function(){const{ctx:A,color:I,opacity:nt,thickness:dt,parentScale:wt,scaleFactor:Lt}=this;A.lineWidth=dt*wt/Lt,A.lineCap="round",A.lineJoin="round",A.miterLimit=10,A.strokeStyle=`${I}${(0,Rt.opacityToHex)(nt)}`},Jr=function(A,I){this.canvas.addEventListener("contextmenu",tt.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,j)),this.canvas.addEventListener("pointermove",t(this,W)),this.canvas.addEventListener("pointerup",t(this,y)),this.canvas.removeEventListener("pointerdown",t(this,b)),this.isEditing=!0,t(this,S)||(gt(this,S,!0),Q(this,a,Nn).call(this),this.thickness||(this.thickness=Ft._defaultThickness),this.color||(this.color=Ft._defaultColor||T.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ft._defaultOpacity)),this.currentPath.push([A,I]),gt(this,g,!1),Q(this,a,nr).call(this),gt(this,u,()=>{Q(this,a,ts).call(this),t(this,u)&&window.requestAnimationFrame(t(this,u))}),window.requestAnimationFrame(t(this,u))},ir=function(A,I){const[nt,dt]=this.currentPath.at(-1);if(this.currentPath.length>1&&A===nt&&I===dt)return;const wt=this.currentPath;let Lt=t(this,k);if(wt.push([A,I]),gt(this,g,!0),wt.length<=2){Lt.moveTo(...wt[0]),Lt.lineTo(A,I);return}wt.length===3&&(gt(this,k,Lt=new Path2D),Lt.moveTo(...wt[0])),Q(this,a,es).call(this,Lt,...wt.at(-3),...wt.at(-2),A,I)},Zr=function(){if(this.currentPath.length===0)return;const A=this.currentPath.at(-1);t(this,k).lineTo(...A)},Qr=function(A,I){gt(this,u,null),A=Math.min(Math.max(A,0),this.canvas.width),I=Math.min(Math.max(I,0),this.canvas.height),Q(this,a,ir).call(this,A,I),Q(this,a,Zr).call(this);let nt;if(this.currentPath.length!==1)nt=Q(this,a,ns).call(this);else{const et=[A,I];nt=[[et,et.slice(),et.slice(),et]]}const dt=t(this,k),wt=this.currentPath;this.currentPath=[],gt(this,k,new Path2D);const Lt=()=>{this.allRawPaths.push(wt),this.paths.push(nt),this.bezierPath2D.push(dt),this.rebuild()},kt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Q(this,a,ui).call(this),Q(this,a,di).call(this)),Q(this,a,Bn).call(this))};this.addCommands({cmd:Lt,undo:kt,mustExec:!0})},ts=function(){if(!t(this,g))return;gt(this,g,!1);const A=Math.ceil(this.thickness*this.parentScale),I=this.currentPath.slice(-3),nt=I.map(Lt=>Lt[0]),dt=I.map(Lt=>Lt[1]);Math.min(...nt)-A,Math.max(...nt)+A,Math.min(...dt)-A,Math.max(...dt)+A;const{ctx:wt}=this;wt.save(),wt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Lt of this.bezierPath2D)wt.stroke(Lt);wt.stroke(t(this,k)),wt.restore()},es=function(A,I,nt,dt,wt,Lt,kt){const et=(I+dt)/2,Wt=(nt+wt)/2,Bt=(dt+Lt)/2,ge=(wt+kt)/2;A.bezierCurveTo(et+2*(dt-et)/3,Wt+2*(wt-Wt)/3,Bt+2*(dt-Bt)/3,ge+2*(wt-ge)/3,Bt,ge)},ns=function(){const A=this.currentPath;if(A.length<=2)return[[A[0],A[0],A.at(-1),A.at(-1)]];const I=[];let nt,[dt,wt]=A[0];for(nt=1;nt<A.length-2;nt++){const[le,Pe]=A[nt],[$t,ie]=A[nt+1],ye=(le+$t)/2,De=(Pe+ie)/2,Tt=[dt+2*(le-dt)/3,wt+2*(Pe-wt)/3],rt=[ye+2*(le-ye)/3,De+2*(Pe-De)/3];I.push([[dt,wt],Tt,rt,[ye,De]]),[dt,wt]=[ye,De]}const[Lt,kt]=A[nt],[et,Wt]=A[nt+1],Bt=[dt+2*(Lt-dt)/3,wt+2*(kt-wt)/3],ge=[et+2*(Lt-et)/3,Wt+2*(kt-Wt)/3];return I.push([[dt,wt],Bt,ge,[et,Wt]]),I},Sn=function(){if(this.isEmpty()){Q(this,a,fi).call(this);return}Q(this,a,nr).call(this);const{canvas:A,ctx:I}=this;I.setTransform(1,0,0,1,0,0),I.clearRect(0,0,A.width,A.height),Q(this,a,fi).call(this);for(const nt of this.bezierPath2D)I.stroke(nt)},rr=function(A){this.canvas.removeEventListener("pointerleave",t(this,j)),this.canvas.removeEventListener("pointermove",t(this,W)),this.canvas.removeEventListener("pointerup",t(this,y)),this.canvas.addEventListener("pointerdown",t(this,b)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",tt.noContextMenu)},10),Q(this,a,Qr).call(this,A.offsetX,A.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ui=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",T.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(A=>{var I;return(I=this.canvas)==null?void 0:I.setAttribute("aria-label",A)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},di=function(){gt(this,B,new ResizeObserver(A=>{const I=A[0].contentRect;I.width&&I.height&&this.setDimensions(I.width,I.height)})),t(this,B).observe(this.div)},Nn=function(){if(!t(this,S))return;const[A,I]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*A),this.canvas.height=Math.ceil(this.height*I),Q(this,a,fi).call(this)},sr=function(A,I){const nt=Q(this,a,pi).call(this),dt=(A-nt)/t(this,f),wt=(I-nt)/t(this,O);this.scaleFactor=Math.min(dt,wt)},fi=function(){const A=Q(this,a,pi).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+A,this.translationY*this.scaleFactor+A)},L=new WeakSet,is=function(A){const I=new Path2D;for(let nt=0,dt=A.length;nt<dt;nt++){const[wt,Lt,kt,et]=A[nt];nt===0&&I.moveTo(...wt),I.bezierCurveTo(Lt[0],Lt[1],kt[0],kt[1],et[0],et[1])}return I},ar=function(A,I,nt){const[dt,wt,Lt,kt]=I;switch(nt){case 0:for(let et=0,Wt=A.length;et<Wt;et+=2)A[et]+=dt,A[et+1]=kt-A[et+1];break;case 90:for(let et=0,Wt=A.length;et<Wt;et+=2){const Bt=A[et];A[et]=A[et+1]+dt,A[et+1]=Bt+wt}break;case 180:for(let et=0,Wt=A.length;et<Wt;et+=2)A[et]=Lt-A[et],A[et+1]+=wt;break;case 270:for(let et=0,Wt=A.length;et<Wt;et+=2){const Bt=A[et];A[et]=Lt-A[et+1],A[et+1]=kt-Bt}break;default:throw new Error("Invalid rotation")}return A},rs=function(A,I,nt){const[dt,wt,Lt,kt]=I;switch(nt){case 0:for(let et=0,Wt=A.length;et<Wt;et+=2)A[et]-=dt,A[et+1]=kt-A[et+1];break;case 90:for(let et=0,Wt=A.length;et<Wt;et+=2){const Bt=A[et];A[et]=A[et+1]-wt,A[et+1]=Bt-dt}break;case 180:for(let et=0,Wt=A.length;et<Wt;et+=2)A[et]=Lt-A[et],A[et+1]-=wt;break;case 270:for(let et=0,Wt=A.length;et<Wt;et+=2){const Bt=A[et];A[et]=kt-A[et+1],A[et+1]=Lt-Bt}break;default:throw new Error("Invalid rotation")}return A},ss=function(A,I,nt,dt){var Wt,Bt;const wt=[],Lt=this.thickness/2,kt=A*I+Lt,et=A*nt+Lt;for(const ge of this.paths){const le=[],Pe=[];for(let $t=0,ie=ge.length;$t<ie;$t++){const[ye,De,Tt,rt]=ge[$t],at=A*ye[0]+kt,Xt=A*ye[1]+et,Jt=A*De[0]+kt,oe=A*De[1]+et,H=A*Tt[0]+kt,Ct=A*Tt[1]+et,jt=A*rt[0]+kt,Zt=A*rt[1]+et;$t===0&&(le.push(at,Xt),Pe.push(at,Xt)),le.push(Jt,oe,H,Ct,jt,Zt),Pe.push(Jt,oe),$t===ie-1&&Pe.push(jt,Zt)}wt.push({bezier:Q(Wt=Ft,L,ar).call(Wt,le,dt,this.rotation),points:Q(Bt=Ft,L,ar).call(Bt,Pe,dt,this.rotation)})}return wt},or=function(){let A=1/0,I=-1/0,nt=1/0,dt=-1/0;for(const wt of this.paths)for(const[Lt,kt,et,Wt]of wt){const Bt=d.Util.bezierBoundingBox(...Lt,...kt,...et,...Wt);A=Math.min(A,Bt[0]),nt=Math.min(nt,Bt[1]),I=Math.max(I,Bt[2]),dt=Math.max(dt,Bt[3])}return[A,nt,I,dt]},pi=function(){return t(this,_)?Math.ceil(this.thickness*this.parentScale):0},Bn=function(A=!1){if(this.isEmpty())return;if(!t(this,_)){Q(this,a,Sn).call(this);return}const I=Q(this,a,or).call(this),nt=Q(this,a,pi).call(this);gt(this,f,Math.max(T.AnnotationEditor.MIN_SIZE,I[2]-I[0])),gt(this,O,Math.max(T.AnnotationEditor.MIN_SIZE,I[3]-I[1]));const dt=Math.ceil(nt+t(this,f)*this.scaleFactor),wt=Math.ceil(nt+t(this,O)*this.scaleFactor),[Lt,kt]=this.parentDimensions;this.width=dt/Lt,this.height=wt/kt,this.setAspectRatio(dt,wt);const et=this.translationX,Wt=this.translationY;this.translationX=-I[0],this.translationY=-I[1],Q(this,a,Nn).call(this),Q(this,a,Sn).call(this),gt(this,w,dt),gt(this,s,wt),this.setDims(dt,wt);const Bt=A?nt/this.scaleFactor/2:0;this.translate(et-this.translationX-Bt,Wt-this.translationY-Bt)},pt(Ft,L),qe(Ft,"_defaultColor",null),qe(Ft,"_defaultOpacity",1),qe(Ft,"_defaultThickness",1),qe(Ft,"_type","ink");let G=Ft;v.InkEditor=G},(h,v,At)=>{var G,O,f,W,j,y,b,k,_,g,S,Xn,$n,gi,lr,as,os,cr,mi,ls;Object.defineProperty(v,"__esModule",{value:!0}),v.StampEditor=void 0;var d=At(1),T=At(4),e=At(6),tt=At(29);const E=class E extends T.AnnotationEditor{constructor(Y){super({...Y,name:"stampEditor"});pt(this,S);pt(this,G,null);pt(this,O,null);pt(this,f,null);pt(this,W,null);pt(this,j,null);pt(this,y,null);pt(this,b,null);pt(this,k,null);pt(this,_,!1);pt(this,g,!1);gt(this,W,Y.bitmapUrl),gt(this,j,Y.bitmapFile)}static initialize(Y){T.AnnotationEditor.initialize(Y)}static get supportedTypes(){const Y=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,d.shadow)(this,"supportedTypes",Y.map(it=>`image/${it}`))}static get supportedTypesStr(){return(0,d.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Y){return this.supportedTypes.includes(Y)}static paste(Y,it){it.pasteEditor(d.AnnotationEditorType.STAMP,{bitmapFile:Y.getAsFile()})}remove(){var Y,it;t(this,O)&&(gt(this,G,null),this._uiManager.imageManager.deleteId(t(this,O)),(Y=t(this,y))==null||Y.remove(),gt(this,y,null),(it=t(this,b))==null||it.disconnect(),gt(this,b,null)),super.remove()}rebuild(){if(!this.parent){t(this,O)&&Q(this,S,gi).call(this);return}super.rebuild(),this.div!==null&&(t(this,O)&&Q(this,S,gi).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,f)||t(this,G)||t(this,W)||t(this,j))}get isResizable(){return!0}render(){if(this.div)return this.div;let Y,it;if(this.width&&(Y=this.x,it=this.y),super.render(),this.div.hidden=!0,t(this,G)?Q(this,S,lr).call(this):Q(this,S,gi).call(this),this.width){const[q,bt]=this.parentDimensions;this.setAt(Y*q,it*bt,this.width*q,this.height*bt)}return this.div}static deserialize(Y,it,q){if(Y instanceof tt.StampAnnotationElement)return null;const bt=super.deserialize(Y,it,q),{rect:M,bitmapUrl:X,bitmapId:lt,isSvg:P,accessibilityData:i}=Y;lt&&q.imageManager.isValidId(lt)?gt(bt,O,lt):gt(bt,W,X),gt(bt,_,P);const[r,m]=bt.pageDimensions;return bt.width=(M[2]-M[0])/r,bt.height=(M[3]-M[1])/m,i&&(bt.altTextData=i),bt}serialize(Y=!1,it=null){if(this.isEmpty())return null;const q={annotationType:d.AnnotationEditorType.STAMP,bitmapId:t(this,O),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,_),structTreeParentId:this._structTreeParentId};if(Y)return q.bitmapUrl=Q(this,S,mi).call(this,!0),q.accessibilityData=this.altTextData,q;const{decorative:bt,altText:M}=this.altTextData;if(!bt&&M&&(q.accessibilityData={type:"Figure",alt:M}),it===null)return q;it.stamps||(it.stamps=new Map);const X=t(this,_)?(q.rect[2]-q.rect[0])*(q.rect[3]-q.rect[1]):null;if(!it.stamps.has(t(this,O)))it.stamps.set(t(this,O),{area:X,serialized:q}),q.bitmap=Q(this,S,mi).call(this,!1);else if(t(this,_)){const lt=it.stamps.get(t(this,O));X>lt.area&&(lt.area=X,lt.serialized.bitmap.close(),lt.serialized.bitmap=Q(this,S,mi).call(this,!1))}return q}};G=new WeakMap,O=new WeakMap,f=new WeakMap,W=new WeakMap,j=new WeakMap,y=new WeakMap,b=new WeakMap,k=new WeakMap,_=new WeakMap,g=new WeakMap,S=new WeakSet,Xn=function(Y,it=!1){if(!Y){this.remove();return}gt(this,G,Y.bitmap),it||(gt(this,O,Y.id),gt(this,_,Y.isSvg)),Q(this,S,lr).call(this)},$n=function(){gt(this,f,null),this._uiManager.enableWaiting(!1),t(this,y)&&this.div.focus()},gi=function(){if(t(this,O)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,O)).then(it=>Q(this,S,Xn).call(this,it,!0)).finally(()=>Q(this,S,$n).call(this));return}if(t(this,W)){const it=t(this,W);gt(this,W,null),this._uiManager.enableWaiting(!0),gt(this,f,this._uiManager.imageManager.getFromUrl(it).then(q=>Q(this,S,Xn).call(this,q)).finally(()=>Q(this,S,$n).call(this)));return}if(t(this,j)){const it=t(this,j);gt(this,j,null),this._uiManager.enableWaiting(!0),gt(this,f,this._uiManager.imageManager.getFromFile(it).then(q=>Q(this,S,Xn).call(this,q)).finally(()=>Q(this,S,$n).call(this)));return}const Y=document.createElement("input");Y.type="file",Y.accept=E.supportedTypesStr,gt(this,f,new Promise(it=>{Y.addEventListener("change",async()=>{if(!Y.files||Y.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const q=await this._uiManager.imageManager.getFromFile(Y.files[0]);Q(this,S,Xn).call(this,q)}it()}),Y.addEventListener("cancel",()=>{this.remove(),it()})}).finally(()=>Q(this,S,$n).call(this))),Y.click()},lr=function(){const{div:Y}=this;let{width:it,height:q}=t(this,G);const[bt,M]=this.pageDimensions,X=.75;if(this.width)it=this.width*bt,q=this.height*M;else if(it>X*bt||q>X*M){const r=Math.min(X*bt/it,X*M/q);it*=r,q*=r}const[lt,P]=this.parentDimensions;this.setDims(it*lt/bt,q*P/M),this._uiManager.enableWaiting(!1);const i=gt(this,y,document.createElement("canvas"));Y.append(i),Y.hidden=!1,Q(this,S,cr).call(this,it,q),Q(this,S,ls).call(this),t(this,g)||(this.parent.addUndoableEditor(this),gt(this,g,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},as=function(Y,it){var X;const[q,bt]=this.parentDimensions;this.width=Y/q,this.height=it/bt,this.setDims(Y,it),(X=this._initialOptions)!=null&&X.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,k)!==null&&clearTimeout(t(this,k)),gt(this,k,setTimeout(()=>{gt(this,k,null),Q(this,S,cr).call(this,Y,it)},200))},os=function(Y,it){const{width:q,height:bt}=t(this,G);let M=q,X=bt,lt=t(this,G);for(;M>2*Y||X>2*it;){const P=M,i=X;M>2*Y&&(M=M>=16384?Math.floor(M/2)-1:Math.ceil(M/2)),X>2*it&&(X=X>=16384?Math.floor(X/2)-1:Math.ceil(X/2));const r=new OffscreenCanvas(M,X);r.getContext("2d").drawImage(lt,0,0,P,i,0,0,M,X),lt=r.transferToImageBitmap()}return lt},cr=function(Y,it){Y=Math.ceil(Y),it=Math.ceil(it);const q=t(this,y);if(!q||q.width===Y&&q.height===it)return;q.width=Y,q.height=it;const bt=t(this,_)?t(this,G):Q(this,S,os).call(this,Y,it),M=q.getContext("2d");M.filter=this._uiManager.hcmFilter,M.drawImage(bt,0,0,bt.width,bt.height,0,0,Y,it)},mi=function(Y){if(Y){if(t(this,_)){const bt=this._uiManager.imageManager.getSvgUrl(t(this,O));if(bt)return bt}const it=document.createElement("canvas");return{width:it.width,height:it.height}=t(this,G),it.getContext("2d").drawImage(t(this,G),0,0),it.toDataURL()}if(t(this,_)){const[it,q]=this.pageDimensions,bt=Math.round(this.width*it*e.PixelsPerInch.PDF_TO_CSS_UNITS),M=Math.round(this.height*q*e.PixelsPerInch.PDF_TO_CSS_UNITS),X=new OffscreenCanvas(bt,M);return X.getContext("2d").drawImage(t(this,G),0,0,t(this,G).width,t(this,G).height,0,0,bt,M),X.transferToImageBitmap()}return structuredClone(t(this,G))},ls=function(){gt(this,b,new ResizeObserver(Y=>{const it=Y[0].contentRect;it.width&&it.height&&Q(this,S,as).call(this,it.width,it.height)})),t(this,b).observe(this.div)},qe(E,"_type","stamp");let Rt=E;v.StampEditor=Rt}],__webpack_module_cache__={};function __w_pdfjs_require__(h){var v=__webpack_module_cache__[h];if(v!==void 0)return v.exports;var At=__webpack_module_cache__[h]={exports:{}};return __webpack_modules__[h](At,At.exports,__w_pdfjs_require__),At.exports}var __webpack_exports__={};return(()=>{var h=__webpack_exports__;Object.defineProperty(h,"__esModule",{value:!0}),Object.defineProperty(h,"AbortException",{enumerable:!0,get:function(){return v.AbortException}}),Object.defineProperty(h,"AnnotationEditorLayer",{enumerable:!0,get:function(){return e.AnnotationEditorLayer}}),Object.defineProperty(h,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return v.AnnotationEditorParamsType}}),Object.defineProperty(h,"AnnotationEditorType",{enumerable:!0,get:function(){return v.AnnotationEditorType}}),Object.defineProperty(h,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return tt.AnnotationEditorUIManager}}),Object.defineProperty(h,"AnnotationLayer",{enumerable:!0,get:function(){return Rt.AnnotationLayer}}),Object.defineProperty(h,"AnnotationMode",{enumerable:!0,get:function(){return v.AnnotationMode}}),Object.defineProperty(h,"CMapCompressionType",{enumerable:!0,get:function(){return v.CMapCompressionType}}),Object.defineProperty(h,"DOMSVGFactory",{enumerable:!0,get:function(){return d.DOMSVGFactory}}),Object.defineProperty(h,"FeatureTest",{enumerable:!0,get:function(){return v.FeatureTest}}),Object.defineProperty(h,"GlobalWorkerOptions",{enumerable:!0,get:function(){return G.GlobalWorkerOptions}}),Object.defineProperty(h,"ImageKind",{enumerable:!0,get:function(){return v.ImageKind}}),Object.defineProperty(h,"InvalidPDFException",{enumerable:!0,get:function(){return v.InvalidPDFException}}),Object.defineProperty(h,"MissingPDFException",{enumerable:!0,get:function(){return v.MissingPDFException}}),Object.defineProperty(h,"OPS",{enumerable:!0,get:function(){return v.OPS}}),Object.defineProperty(h,"PDFDataRangeTransport",{enumerable:!0,get:function(){return At.PDFDataRangeTransport}}),Object.defineProperty(h,"PDFDateString",{enumerable:!0,get:function(){return d.PDFDateString}}),Object.defineProperty(h,"PDFWorker",{enumerable:!0,get:function(){return At.PDFWorker}}),Object.defineProperty(h,"PasswordResponses",{enumerable:!0,get:function(){return v.PasswordResponses}}),Object.defineProperty(h,"PermissionFlag",{enumerable:!0,get:function(){return v.PermissionFlag}}),Object.defineProperty(h,"PixelsPerInch",{enumerable:!0,get:function(){return d.PixelsPerInch}}),Object.defineProperty(h,"PromiseCapability",{enumerable:!0,get:function(){return v.PromiseCapability}}),Object.defineProperty(h,"RenderingCancelledException",{enumerable:!0,get:function(){return d.RenderingCancelledException}}),Object.defineProperty(h,"SVGGraphics",{enumerable:!0,get:function(){return At.SVGGraphics}}),Object.defineProperty(h,"UnexpectedResponseException",{enumerable:!0,get:function(){return v.UnexpectedResponseException}}),Object.defineProperty(h,"Util",{enumerable:!0,get:function(){return v.Util}}),Object.defineProperty(h,"VerbosityLevel",{enumerable:!0,get:function(){return v.VerbosityLevel}}),Object.defineProperty(h,"XfaLayer",{enumerable:!0,get:function(){return O.XfaLayer}}),Object.defineProperty(h,"build",{enumerable:!0,get:function(){return At.build}}),Object.defineProperty(h,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return v.createValidAbsoluteUrl}}),Object.defineProperty(h,"getDocument",{enumerable:!0,get:function(){return At.getDocument}}),Object.defineProperty(h,"getFilenameFromUrl",{enumerable:!0,get:function(){return d.getFilenameFromUrl}}),Object.defineProperty(h,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return d.getPdfFilenameFromUrl}}),Object.defineProperty(h,"getXfaPageViewport",{enumerable:!0,get:function(){return d.getXfaPageViewport}}),Object.defineProperty(h,"isDataScheme",{enumerable:!0,get:function(){return d.isDataScheme}}),Object.defineProperty(h,"isPdfFile",{enumerable:!0,get:function(){return d.isPdfFile}}),Object.defineProperty(h,"loadScript",{enumerable:!0,get:function(){return d.loadScript}}),Object.defineProperty(h,"noContextMenu",{enumerable:!0,get:function(){return d.noContextMenu}}),Object.defineProperty(h,"normalizeUnicode",{enumerable:!0,get:function(){return v.normalizeUnicode}}),Object.defineProperty(h,"renderTextLayer",{enumerable:!0,get:function(){return T.renderTextLayer}}),Object.defineProperty(h,"setLayerDimensions",{enumerable:!0,get:function(){return d.setLayerDimensions}}),Object.defineProperty(h,"shadow",{enumerable:!0,get:function(){return v.shadow}}),Object.defineProperty(h,"updateTextLayer",{enumerable:!0,get:function(){return T.updateTextLayer}}),Object.defineProperty(h,"version",{enumerable:!0,get:function(){return At.version}});var v=__w_pdfjs_require__(1),At=__w_pdfjs_require__(2),d=__w_pdfjs_require__(6),T=__w_pdfjs_require__(26),e=__w_pdfjs_require__(27),tt=__w_pdfjs_require__(5),Rt=__w_pdfjs_require__(29),G=__w_pdfjs_require__(14),O=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(h){var v=reactExports,At=pdfExports;function d(n){var p=Object.create(null);return n&&Object.keys(n).forEach(function(U){if(U!=="default"){var z=Object.getOwnPropertyDescriptor(n,U);Object.defineProperty(p,U,z.get?z:{enumerable:!0,get:function(){return n[U]}})}}),p.default=n,Object.freeze(p)}var T,e=d(v),tt=d(At);h.AnnotationType=void 0,(T=h.AnnotationType||(h.AnnotationType={}))[T.Text=1]="Text",T[T.Link=2]="Link",T[T.FreeText=3]="FreeText",T[T.Line=4]="Line",T[T.Square=5]="Square",T[T.Circle=6]="Circle",T[T.Polygon=7]="Polygon",T[T.Polyline=8]="Polyline",T[T.Highlight=9]="Highlight",T[T.Underline=10]="Underline",T[T.Squiggly=11]="Squiggly",T[T.StrikeOut=12]="StrikeOut",T[T.Stamp=13]="Stamp",T[T.Caret=14]="Caret",T[T.Ink=15]="Ink",T[T.Popup=16]="Popup",T[T.FileAttachment=17]="FileAttachment";var Rt=function(n,p){return Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,z){U.__proto__=z}||function(U,z){for(var $ in z)Object.prototype.hasOwnProperty.call(z,$)&&(U[$]=z[$])},Rt(n,p)};function G(n,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function U(){this.constructor=n}Rt(n,p),n.prototype=p===null?Object.create(p):(U.prototype=p.prototype,new U)}var O,f=function(){return f=Object.assign||function(n){for(var p,U=1,z=arguments.length;U<z;U++)for(var $ in p=arguments[U])Object.prototype.hasOwnProperty.call(p,$)&&(n[$]=p[$]);return n},f.apply(this,arguments)};h.TextDirection=void 0,(O=h.TextDirection||(h.TextDirection={})).RightToLeft="RTL",O.LeftToRight="LTR";var W,j=e.createContext({currentTheme:"light",direction:h.TextDirection.LeftToRight,setCurrentTheme:function(){}}),y=function(n){var p=[];return Object.keys(n).forEach(function(U){U&&n[U]&&p.push(U)}),p.join(" ")},b=typeof window<"u"?e.useLayoutEffect:e.useEffect,k=function(n){var p=e.useRef(null),U=n.once,z=n.threshold,$=n.onVisibilityChanged;return b(function(){var J=p.current;if(J){var ft=new IntersectionObserver(function(st){st.forEach(function(V){var ht=V.isIntersecting,ot=V.intersectionRatio;$({isVisible:ht,ratio:ot}),ht&&U&&(ft.unobserve(J),ft.disconnect())})},{threshold:z||0});return ft.observe(J),function(){ft.unobserve(J),ft.disconnect()}}},[]),p},_=function(n){var p=n.children,U=n.ignoreDirection,z=U!==void 0&&U,$=n.size,J=$===void 0?24:$,ft=e.useContext(j).direction,st=!z&&ft===h.TextDirection.RightToLeft,V="".concat(J||24,"px");return e.createElement("svg",{"aria-hidden":"true",className:y({"rpv-core__icon":!0,"rpv-core__icon--rtl":st}),focusable:"false",height:V,viewBox:"0 0 24 24",width:V},p)},g=function(){return e.createElement(_,{size:16},e.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},S=function(n){var p=n.children,U=n.testId,z=n.onClick,$=e.useContext(j).direction===h.TextDirection.RightToLeft,J=U?{"data-testid":U}:{};return e.createElement("button",f({className:y({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":$}),type:"button",onClick:z},J),p)},B=function(n){var p=n.size,U=p===void 0?"4rem":p,z=n.testId,$=e.useState(!1),J=$[0],ft=$[1],st=z?{"data-testid":z}:{},V=k({onVisibilityChanged:function(ht){ft(ht.isVisible)}});return e.createElement("div",f({},st,{className:y({"rpv-core__spinner":!0,"rpv-core__spinner--animating":J}),ref:V,style:{height:U,width:U}}))},w=function(n){var p=n.ariaLabel,U=p===void 0?"":p,z=n.autoFocus,$=z!==void 0&&z,J=n.placeholder,ft=J===void 0?"":J,st=n.testId,V=n.type,ht=V===void 0?"text":V,ot=n.value,Ot=ot===void 0?"":ot,It=n.onChange,Dt=n.onKeyDown,Gt=Dt===void 0?function(){}:Dt,zt=e.useContext(j).direction,Ut=e.useRef(),Re=zt===h.TextDirection.RightToLeft,ue={ref:Ut,"data-testid":"","aria-label":U,className:y({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Re}),placeholder:ft,value:Ot,onChange:function(fe){return It(fe.target.value)},onKeyDown:Gt};return st&&(ue["data-testid"]=st),b(function(){if($){var fe=Ut.current;if(fe){var _e=window.scrollX,re=window.scrollY;fe.focus(),window.scrollTo(_e,re)}}},[]),ht==="text"?e.createElement("input",f({type:"text"},ue)):e.createElement("input",f({type:"password"},ue))};(function(n){n[n.ExitFullScreen=0]="ExitFullScreen",n[n.FullScreenChange=1]="FullScreenChange",n[n.FullScreenElement=2]="FullScreenElement",n[n.FullScreenEnabled=3]="FullScreenEnabled",n[n.RequestFullScreen=4]="RequestFullScreen"})(W||(W={}));var s,u={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},a={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},l={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},c=typeof window<"u",N=c&&(W.FullScreenEnabled in document&&u||a.FullScreenEnabled in document&&a||l.FullScreenEnabled in document&&l)||u,o=function(){return c&&N.FullScreenEnabled in document&&document[N.FullScreenEnabled]===!0},E=function(n){return c?n[N.ExitFullScreen]():Promise.resolve({})},D=function(){return c?document[N.FullScreenElement]:null},vt=function(n,p){var U=e.useRef(),z=function(){U.current&&clearTimeout(U.current)};return e.useEffect(function(){return function(){return z()}},[]),e.useCallback(function(){for(var $=[],J=0;J<arguments.length;J++)$[J]=arguments[J];z(),U.current=setTimeout(function(){n.apply(void 0,$)},p)},[n,p])},Y=function(){var n=e.useRef(!1);return e.useEffect(function(){return n.current=!0,function(){n.current=!1}},[]),n},it=function(n){var p=e.useRef(n);return e.useEffect(function(){p.current=n},[n]),p.current};(function(n){n.NotRenderedYet="NotRenderedYet",n.Rendering="Rendering",n.Rendered="Rendered"})(s||(s={}));var q,bt=-9999,M=function(n){var p=n.doc,U=p.numPages,z=p.loadingTask.docId,$=e.useMemo(function(){return Array(U).fill(null).map(function(st,V){return{pageIndex:V,renderStatus:s.NotRenderedYet,visibility:bt}})},[z]),J=e.useRef({currentRenderingPage:-1,startRange:0,endRange:U-1,visibilities:$}),ft=function(st,V){J.current.visibilities[st].visibility=V};return{getHighestPriorityPage:function(){var st=J.current.visibilities.slice(J.current.startRange,J.current.endRange+1).filter(function(It){return It.visibility>bt});if(!st.length)return-1;for(var V=st[0].pageIndex,ht=st[st.length-1].pageIndex,ot=st.length,Ot=0;Ot<ot;Ot++){if(st[Ot].renderStatus===s.Rendering)return-1;if(st[Ot].renderStatus===s.NotRenderedYet)return st[Ot].pageIndex}return ht+1<U&&J.current.visibilities[ht+1].renderStatus!==s.Rendered?ht+1:V-1>=0&&J.current.visibilities[V-1].renderStatus!==s.Rendered?V-1:-1},isInRange:function(st){return st>=J.current.startRange&&st<=J.current.endRange},markNotRendered:function(){for(var st=0;st<U;st++)J.current.visibilities[st].renderStatus=s.NotRenderedYet},markRendered:function(st){J.current.visibilities[st].renderStatus=s.Rendered},markRendering:function(st){J.current.currentRenderingPage!==-1&&J.current.currentRenderingPage!==st&&J.current.visibilities[J.current.currentRenderingPage].renderStatus===s.Rendering&&(J.current.visibilities[J.current.currentRenderingPage].renderStatus=s.NotRenderedYet),J.current.visibilities[st].renderStatus=s.Rendering,J.current.currentRenderingPage=st},setOutOfRange:function(st){ft(st,bt)},setRange:function(st,V){J.current.startRange=st,J.current.endRange=V;for(var ht=0;ht<U;ht++)(ht<st||ht>V)&&(J.current.visibilities[ht].visibility=bt,J.current.visibilities[ht].renderStatus=s.NotRenderedYet)},setVisibility:ft}},X={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},lt=e.createContext({l10n:X,setL10n:function(){}}),P=0,i=function(){return P++},r=function(n,p,U){var z=function($){var J=p.current;if(J){var ft=$.target;if(ft instanceof Element&&ft.shadowRoot){var st=$.composedPath();st.length>0&&!J.contains(st[0])&&U()}else J.contains(ft)||U()}};e.useEffect(function(){if(n){var $={capture:!0};return document.addEventListener("click",z,$),function(){document.removeEventListener("click",z,$)}}},[])},m=function(n){var p=function(U){U.key==="Escape"&&n()};e.useEffect(function(){return document.addEventListener("keyup",p),function(){document.removeEventListener("keyup",p)}},[])},F=function(n){var p=n.ariaControlsSuffix,U=n.children,z=n.closeOnClickOutside,$=n.closeOnEscape,J=n.onToggle,ft=e.useRef(),st=e.useContext(j).direction===h.TextDirection.RightToLeft;return e.useEffect(function(){var V=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=V}},[]),m(function(){ft.current&&$&&J()}),r(z,ft,J),b(function(){var V=ft.current;if(V){var ht=.75*document.body.clientHeight;V.getBoundingClientRect().height>=ht&&(V.style.overflow="auto",V.style.maxHeight="".concat(ht,"px"))}},[]),e.createElement("div",{"aria-modal":"true",className:y({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":st}),id:"rpv-core__modal-body-".concat(p),ref:ft,role:"dialog",tabIndex:-1},U)},L=function(n){var p=n.children;return e.createElement("div",{className:"rpv-core__modal-overlay"},p)};h.ToggleStatus=void 0,(q=h.ToggleStatus||(h.ToggleStatus={})).Close="Close",q.Open="Open",q.Toggle="Toggle";var x,Z=function(n){var p=e.useState(n),U=p[0],z=p[1];return{opened:U,toggle:function($){switch($){case h.ToggleStatus.Close:z(!1);break;case h.ToggleStatus.Open:z(!0);break;case h.ToggleStatus.Toggle:default:z(function(J){return!J})}}}},mt=function(n){var p=n.content,U=n.isOpened,z=U!==void 0&&U,$=n.target,J=Z(z),ft=J.opened,st=J.toggle;return e.createElement(e.Fragment,null,$&&$(st,ft),ft&&p(st))};h.Position=void 0,(x=h.Position||(h.Position={})).TopLeft="TOP_LEFT",x.TopCenter="TOP_CENTER",x.TopRight="TOP_RIGHT",x.RightTop="RIGHT_TOP",x.RightCenter="RIGHT_CENTER",x.RightBottom="RIGHT_BOTTOM",x.BottomLeft="BOTTOM_LEFT",x.BottomCenter="BOTTOM_CENTER",x.BottomRight="BOTTOM_RIGHT",x.LeftTop="LEFT_TOP",x.LeftCenter="LEFT_CENTER",x.LeftBottom="LEFT_BOTTOM";var St,Et,Pt,xt,Ft,ct,ut,A,I=function(n,p,U,z,$){b(function(){var J=p.current,ft=n.current,st=U.current;if(ft&&J&&st){var V=st.getBoundingClientRect(),ht=function(It,Dt,Gt,zt){var Ut=Dt.getBoundingClientRect(),Re=It.getBoundingClientRect(),ue=Re.height,fe=Re.width,_e=0,re=0;switch(Gt){case h.Position.TopLeft:_e=Ut.top-ue,re=Ut.left;break;case h.Position.TopCenter:_e=Ut.top-ue,re=Ut.left+Ut.width/2-fe/2;break;case h.Position.TopRight:_e=Ut.top-ue,re=Ut.left+Ut.width-fe;break;case h.Position.RightTop:_e=Ut.top,re=Ut.left+Ut.width;break;case h.Position.RightCenter:_e=Ut.top+Ut.height/2-ue/2,re=Ut.left+Ut.width;break;case h.Position.RightBottom:_e=Ut.top+Ut.height-ue,re=Ut.left+Ut.width;break;case h.Position.BottomLeft:_e=Ut.top+Ut.height,re=Ut.left;break;case h.Position.BottomCenter:_e=Ut.top+Ut.height,re=Ut.left+Ut.width/2-fe/2;break;case h.Position.BottomRight:_e=Ut.top+Ut.height,re=Ut.left+Ut.width-fe;break;case h.Position.LeftTop:_e=Ut.top,re=Ut.left-fe;break;case h.Position.LeftCenter:_e=Ut.top+Ut.height/2-ue/2,re=Ut.left-fe;break;case h.Position.LeftBottom:_e=Ut.top+Ut.height-ue,re=Ut.left-fe}return{left:re+(zt.left||0),top:_e+(zt.top||0)}}(ft,J,z,$),ot=ht.top,Ot=ht.left;ft.style.top="".concat(ot-V.top,"px"),ft.style.left="".concat(Ot-V.left,"px")}},[])},nt=function(n){var p,U=n.customClassName,z=n.position;return e.createElement("div",{className:y((p={"rpv-core__arrow":!0,"rpv-core__arrow--tl":z===h.Position.TopLeft,"rpv-core__arrow--tc":z===h.Position.TopCenter,"rpv-core__arrow--tr":z===h.Position.TopRight,"rpv-core__arrow--rt":z===h.Position.RightTop,"rpv-core__arrow--rc":z===h.Position.RightCenter,"rpv-core__arrow--rb":z===h.Position.RightBottom,"rpv-core__arrow--bl":z===h.Position.BottomLeft,"rpv-core__arrow--bc":z===h.Position.BottomCenter,"rpv-core__arrow--br":z===h.Position.BottomRight,"rpv-core__arrow--lt":z===h.Position.LeftTop,"rpv-core__arrow--lc":z===h.Position.LeftCenter,"rpv-core__arrow--lb":z===h.Position.LeftBottom},p["".concat(U)]=U!=="",p))})},dt=function(n){var p=n.ariaControlsSuffix,U=n.children,z=n.closeOnClickOutside,$=n.offset,J=n.position,ft=n.targetRef,st=n.onClose,V=e.useRef(),ht=e.useRef(),ot=e.useRef(),Ot=e.useContext(j).direction===h.TextDirection.RightToLeft;r(z,V,st),I(V,ft,ot,J,$),b(function(){var Dt=ht.current;if(Dt){var Gt=.75*document.body.clientHeight;Dt.getBoundingClientRect().height>=Gt&&(Dt.style.overflow="auto",Dt.style.maxHeight="".concat(Gt,"px"))}},[]);var It="rpv-core__popover-body-inner-".concat(p);return e.createElement(e.Fragment,null,e.createElement("div",{ref:ot,style:{left:0,position:"absolute",top:0}}),e.createElement("div",{"aria-describedby":It,className:y({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Ot}),id:"rpv-core__popover-body-".concat(p),ref:V,role:"dialog",tabIndex:-1},e.createElement(nt,{customClassName:"rpv-core__popover-body-arrow",position:J}),e.createElement("div",{id:It,ref:ht},U)))},wt=function(n){var p=n.closeOnEscape,U=n.onClose,z=e.useRef();return m(function(){z.current&&p&&U()}),e.createElement("div",{className:"rpv-core__popover-overlay",ref:z})},Lt=function(n){var p=n.ariaControlsSuffix,U=n.children,z=n.contentRef,$=n.offset,J=n.position,ft=n.targetRef,st=e.useRef(),V=e.useContext(j).direction===h.TextDirection.RightToLeft;return I(z,ft,st,J,$),e.createElement(e.Fragment,null,e.createElement("div",{ref:st,style:{left:0,position:"absolute",top:0}}),e.createElement("div",{className:y({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":V}),id:"rpv-core__tooltip-body-".concat(p),ref:z,role:"tooltip"},e.createElement(nt,{customClassName:"rpv-core__tooltip-body-arrow",position:J}),e.createElement("div",{className:"rpv-core__tooltip-body-content"},U)))};h.FullScreenMode=void 0,(St=h.FullScreenMode||(h.FullScreenMode={})).Normal="Normal",St.Entering="Entering",St.Entered="Entered",St.EnteredCompletely="EnteredCompletely",St.Exitting="Exitting",St.Exited="Exited",h.LayerRenderStatus=void 0,(Et=h.LayerRenderStatus||(h.LayerRenderStatus={}))[Et.PreRender=0]="PreRender",Et[Et.DidRender=1]="DidRender",h.PageMode=void 0,(Pt=h.PageMode||(h.PageMode={})).Attachments="UseAttachments",Pt.Bookmarks="UseOutlines",Pt.ContentGroup="UseOC",Pt.Default="UserNone",Pt.FullScreen="FullScreen",Pt.Thumbnails="UseThumbs",h.PasswordStatus=void 0,(xt=h.PasswordStatus||(h.PasswordStatus={})).RequiredPassword="RequiredPassword",xt.WrongPassword="WrongPassword",h.RotateDirection=void 0,(Ft=h.RotateDirection||(h.RotateDirection={})).Backward="Backward",Ft.Forward="Forward",h.ScrollMode=void 0,(ct=h.ScrollMode||(h.ScrollMode={})).Page="Page",ct.Horizontal="Horizontal",ct.Vertical="Vertical",ct.Wrapped="Wrapped",h.SpecialZoomLevel=void 0,(ut=h.SpecialZoomLevel||(h.SpecialZoomLevel={})).ActualSize="ActualSize",ut.PageFit="PageFit",ut.PageWidth="PageWidth",h.ViewMode=void 0,(A=h.ViewMode||(h.ViewMode={})).DualPage="DualPage",A.DualPageWithCover="DualPageWithCover",A.SinglePage="SinglePage";var kt,et=function(n,p){return n.reduce(function(U,z,$){return $%p?U[U.length-1].push(z):U.push([z]),U},[])},Wt=function(n,p){switch(p[1].name){case"XYZ":return{bottomOffset:function(U,z){return p[3]===null?z:p[3]},leftOffset:function(U,z){return p[2]===null?0:p[2]},pageIndex:n,scaleTo:p[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:n,scaleTo:h.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:p[2],leftOffset:0,pageIndex:n,scaleTo:h.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:n,scaleTo:1}}},Bt=new Map,ge=new Map,le=function(n,p){return"".concat(n.loadingTask.docId,"___").concat(p.num,"R").concat(p.gen===0?"":p.gen)},Pe=function(n,p,U){Bt.set(le(n,p),U)},$t=function(n,p){if(!n)return Promise.reject("The document is not loaded yet");var U="".concat(n.loadingTask.docId,"___").concat(p),z=ge.get(U);return z?Promise.resolve(z):new Promise(function($,J){n.getPage(p+1).then(function(ft){ge.set(U,ft),ft.ref&&Pe(n,ft.ref,p),$(ft)})})},ie=function(n,p){return new Promise(function(U){new Promise(function(z){typeof p=="string"?n.getDestination(p).then(function($){z($)}):z(p)}).then(function(z){if(typeof z[0]=="object"&&z[0]!==null){var $=z[0],J=function(st,V){var ht=le(st,V);return Bt.has(ht)?Bt.get(ht):null}(n,$);J===null?n.getPageIndex($).then(function(st){Pe(n,$,st),ie(n,p).then(function(V){return U(V)})}):U(Wt(J,z))}else{var ft=Wt(z[0],z);U(ft)}})})};(function(n){n[n.Solid=1]="Solid",n[n.Dashed=2]="Dashed",n[n.Beveled=3]="Beveled",n[n.Inset=4]="Inset",n[n.Underline=5]="Underline"})(kt||(kt={}));var ye,De=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),Tt=function(n,p,U,z){var $=parseInt(n,10);return $>=p&&$<=U?$:z},rt=function(n){return n.contentsObj?n.contentsObj.str:n.contents||""},at=function(n){return n.titleObj?n.titleObj.str:n.title||""},Xt=function(n){var p=n.annotation,U=e.useContext(j).direction,z=at(p),$=rt(p),J=U===h.TextDirection.RightToLeft,ft=e.useRef(),st="";if(p.modificationDate){var V=function(ht){var ot=De.exec(ht);if(!ot)return null;var Ot=parseInt(ot[1],10),It=Tt(ot[2],1,12,1)-1,Dt=Tt(ot[3],1,31,1),Gt=Tt(ot[4],0,23,0),zt=Tt(ot[5],0,59,0),Ut=Tt(ot[6],0,59,0),Re=ot[7]||"Z",ue=Tt(ot[8],0,23,0),fe=Tt(ot[9],0,59,0);switch(Re){case"-":Gt+=ue,zt+=fe;break;case"+":Gt-=ue,zt-=fe}return new Date(Date.UTC(Ot,It,Dt,Gt,zt,Ut))}(p.modificationDate);st=V?"".concat(V.toLocaleDateString(),", ").concat(V.toLocaleTimeString()):""}return e.useLayoutEffect(function(){if(ft.current){var ht=document.querySelector('[data-annotation-id="'.concat(p.id,'"]'));if(ht){var ot=ht;return ot.style.zIndex+=1,function(){ot.style.zIndex="".concat(parseInt(ot.style.zIndex,10)-1)}}}},[]),e.createElement("div",{ref:ft,className:y({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":J}),style:{top:p.annotationType===h.AnnotationType.Popup?"":"100%"}},z&&e.createElement(e.Fragment,null,e.createElement("div",{className:y({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!J,"rpv-core__annotation-popup-title--rtl":J})},z),e.createElement("div",{className:"rpv-core__annotation-popup-date"},st)),$&&e.createElement("div",{className:"rpv-core__annotation-popup-content"},$.split(`
`).map(function(ht,ot){return e.createElement(e.Fragment,{key:ot},ht,e.createElement("br",null))})))};(function(n){n.Click="Click",n.Hover="Hover"})(ye||(ye={}));var Jt,oe=function(n){var p,U=n.annotation,z=n.children,$=n.ignoreBorder,J=n.hasPopup,ft=n.isRenderable,st=n.page,V=n.viewport,ht=U.rect,ot=function(){var me=Z(!1),Oe=me.opened,Ie=me.toggle,Ne=e.useState(ye.Hover),Be=Ne[0],je=Ne[1];return{opened:Oe,closeOnHover:function(){Be===ye.Hover&&Ie(h.ToggleStatus.Close)},openOnHover:function(){Be===ye.Hover&&Ie(h.ToggleStatus.Open)},toggleOnClick:function(){switch(Be){case ye.Click:Oe&&je(ye.Hover),Ie(h.ToggleStatus.Toggle);break;case ye.Hover:je(ye.Click),Ie(h.ToggleStatus.Open)}}}}(),Ot=ot.closeOnHover,It=ot.opened,Dt=ot.openOnHover,Gt=ot.toggleOnClick,zt=(p=[ht[0],st.view[3]+st.view[1]-ht[1],ht[2],st.view[3]+st.view[1]-ht[3]],[Math.min(p[0],p[2]),Math.min(p[1],p[3]),Math.max(p[0],p[2]),Math.max(p[1],p[3])]),Ut=ht[2]-ht[0],Re=ht[3]-ht[1],ue={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!$&&U.borderStyle.width>0){switch(U.borderStyle.style){case kt.Dashed:ue.borderStyle="dashed";break;case kt.Solid:ue.borderStyle="solid";break;case kt.Underline:ue=Object.assign({borderBottomStyle:"solid"},ue);case kt.Beveled:case kt.Inset:}var fe=U.borderStyle.width;ue.borderWidth="".concat(fe,"px"),U.borderStyle.style!==kt.Underline&&(Ut-=2*fe,Re-=2*fe);var _e=U.borderStyle,re=_e.horizontalCornerRadius,Ae=_e.verticalCornerRadius;(re>0||Ae>0)&&(ue.borderRadius="".concat(re,"px / ").concat(Ae,"px")),U.color?ue.borderColor="rgb(".concat(0|U.color[0],", ").concat(0|U.color[1],", ").concat(0|U.color[2],")"):ue.borderWidth="0"}return e.createElement(e.Fragment,null,ft&&z({popup:{opened:It,closeOnHover:Ot,openOnHover:Dt,toggleOnClick:Gt},slot:{attrs:{style:Object.assign({height:"".concat(Re,"px"),left:"".concat(zt[0],"px"),top:"".concat(zt[1],"px"),transform:"matrix(".concat(V.transform.join(","),")"),transformOrigin:"-".concat(zt[0],"px -").concat(zt[1],"px"),width:"".concat(Ut,"px")},ue)},children:e.createElement(e.Fragment,null,J&&It&&e.createElement(Xt,{annotation:U}))}}))},H=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft);return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},Ct=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft),V=p.rect,ht=V[2]-V[0],ot=V[3]-V[1],Ot=p.borderStyle.width;return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(It){return e.createElement("div",f({},It.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":p.id,onClick:It.popup.toggleOnClick,onMouseEnter:It.popup.openOnHover,onMouseLeave:It.popup.closeOnHover}),e.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(ot),width:"".concat(ht,"px")},e.createElement("circle",{cy:ot/2,fill:"none",rx:ht/2-Ot/2,ry:ot/2-Ot/2,stroke:"transparent",strokeWidth:Ot||1})),It.slot.children)})},jt=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=at(p),J=rt(p),ft=!(p.hasPopup!==!1||!$&&!J),st=function(){var V,ht,ot,Ot,It=p.file;It&&(V=It.filename,ht=It.content,ot=typeof ht=="string"?"":URL.createObjectURL(new Blob([ht],{type:""})),(Ot=document.createElement("a")).style.display="none",Ot.href=ot||V,Ot.setAttribute("download",function(Dt){var Gt=Dt.split("/").pop();return Gt?Gt.split("#")[0].split("?")[0]:Dt}(V)),document.body.appendChild(Ot),Ot.click(),document.body.removeChild(Ot),ot&&URL.revokeObjectURL(ot))};return e.createElement(oe,{annotation:p,hasPopup:ft,ignoreBorder:!0,isRenderable:!0,page:U,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onDoubleClick:st,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},Zt=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft);return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},ee=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=at(p),J=rt(p),ft=!(!$&&!J),st=!p.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(p.parentType)!==-1;return b(function(){if(p.parentId){var V=document.querySelector('[data-annotation-id="'.concat(p.parentId,'"]')),ht=document.querySelector('[data-annotation-id="'.concat(p.id,'"]'));if(V&&ht){var ot=parseFloat(V.style.left),Ot=parseFloat(V.style.top)+parseFloat(V.style.height);ht.style.left="".concat(ot,"px"),ht.style.top="".concat(Ot,"px"),ht.style.transformOrigin="-".concat(ot,"px -").concat(Ot,"px")}}},[]),e.createElement(oe,{annotation:p,hasPopup:st,ignoreBorder:!1,isRenderable:ft,page:U,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":p.id}),e.createElement(Xt,{annotation:p}))})},qt=function(n){var p=n.annotation,U=n.childAnnotation,z=n.page,$=n.viewport,J=p.hasPopup===!1,ft=at(p),st=rt(p),V=!!(p.hasPopup||ft||st);if(p.quadPoints&&p.quadPoints.length>0){var ht=p.quadPoints.map(function(ot){return Object.assign({},p,{rect:[ot[2].x,ot[2].y,ot[1].x,ot[1].y],quadPoints:[]})});return e.createElement(e.Fragment,null,ht.map(function(ot,Ot){return e.createElement(qt,{key:Ot,annotation:ot,childAnnotation:U,page:z,viewport:$})}))}return e.createElement(oe,{annotation:p,hasPopup:J,ignoreBorder:!0,isRenderable:V,page:z,viewport:$},function(ot){return e.createElement(e.Fragment,null,e.createElement("div",f({},ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":p.id,onClick:ot.popup.toggleOnClick,onMouseEnter:ot.popup.openOnHover,onMouseLeave:ot.popup.closeOnHover}),ot.slot.children),U&&U.annotationType===h.AnnotationType.Popup&&ot.popup.opened&&e.createElement(ee,{annotation:U,page:z,viewport:$}))})},R=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft),V=p.rect,ht=V[2]-V[0],ot=V[3]-V[1],Ot=p.borderStyle.width;return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(It){return e.createElement("div",f({},It.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":p.id,onClick:It.popup.toggleOnClick,onMouseEnter:It.popup.openOnHover,onMouseLeave:It.popup.closeOnHover}),p.inkLists&&p.inkLists.length&&e.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(ot),width:"".concat(ht,"px")},p.inkLists.map(function(Dt,Gt){return e.createElement("polyline",{key:Gt,fill:"none",stroke:"transparent",strokeWidth:Ot||1,points:Dt.map(function(zt){return"".concat(zt.x-V[0],",").concat(V[3]-zt.y)}).join(" ")})})),It.slot.children)})},C=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft),V=p.rect,ht=V[2]-V[0],ot=V[3]-V[1],Ot=p.borderStyle.width;return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(It){return e.createElement("div",f({},It.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":p.id,onClick:It.popup.toggleOnClick,onMouseEnter:It.popup.openOnHover,onMouseLeave:It.popup.closeOnHover}),e.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(ot),width:"".concat(ht,"px")},e.createElement("line",{stroke:"transparent",strokeWidth:Ot||1,x1:V[2]-p.lineCoordinates[0],x2:V[2]-p.lineCoordinates[2],y1:V[3]-p.lineCoordinates[1],y2:V[3]-p.lineCoordinates[3]})),It.slot.children)})},K=/^([^\w]*)(javascript|data|vbscript)/im,_t=/&#(\w+)(^\w|;)?/g,yt=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Mt=/^([^:]+):/gm,Nt=function(n,p){var U,z=(U=n||"",U.replace(_t,function(st,V){return String.fromCharCode(V)})).replace(yt,"").trim();if(!z)return p;var $=z[0];if($==="."||$==="/")return z;var J=z.match(Mt);if(!J)return z;var ft=J[0];return K.test(ft)?p:z},Qt=function(n){var p,U=n.annotation,z=n.annotationContainerRef,$=n.doc,J=n.outlines,ft=n.page,st=n.pageIndex,V=n.scale,ht=n.viewport,ot=n.onExecuteNamedAction,Ot=n.onJumpFromLinkAnnotation,It=n.onJumpToDest,Dt=e.useRef(),Gt=J&&J.length&&U.dest&&typeof U.dest=="string"?(p=J.find(function(ue){return ue.dest===U.dest}))===null||p===void 0?void 0:p.title:"",zt=!!(U.url||U.dest||U.action||U.unsafeUrl),Ut={};if(U.url||U.unsafeUrl){var Re=Nt(U.url||U.unsafeUrl,"");Re?Ut={"data-target":"external",href:Re,rel:"noopener noreferrer nofollow",target:U.newWindow?"_blank":"",title:Re}:zt=!1}else Ut={href:"","data-annotation-link":U.id,onClick:function(ue){ue.preventDefault(),U.action?ot(U.action):ie($,U.dest).then(function(fe){var _e=Dt.current,re=z.current;if(_e&&re){var Ae=_e.getBoundingClientRect();re.style.setProperty("height","100%"),re.style.setProperty("width","100%");var me=re.getBoundingClientRect();re.style.removeProperty("height"),re.style.removeProperty("width");var Oe=(Ae.left-me.left)/V,Ie=(me.bottom-Ae.bottom+Ae.height)/V;Ot({bottomOffset:Ie,label:Gt,leftOffset:Oe,pageIndex:st})}It(fe)})}};return Gt&&(Ut=Object.assign({},Ut,{title:Gt,"aria-label":Gt})),e.createElement(oe,{annotation:U,hasPopup:!1,ignoreBorder:!1,isRenderable:zt,page:ft,viewport:ht},function(ue){return e.createElement("div",f({},ue.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":U.id,"data-testid":"core__annotation--link-".concat(U.id)}),e.createElement("a",f({ref:Dt},Ut)))})},Yt=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft),V=p.rect,ht=V[2]-V[0],ot=V[3]-V[1],Ot=p.borderStyle.width;return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(It){return e.createElement("div",f({},It.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":p.id,onClick:It.popup.toggleOnClick,onMouseEnter:It.popup.openOnHover,onMouseLeave:It.popup.closeOnHover}),p.vertices&&p.vertices.length&&e.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(ot),width:"".concat(ht,"px")},e.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Ot||1,points:p.vertices.map(function(Dt){return"".concat(Dt.x-V[0],",").concat(V[3]-Dt.y)}).join(" ")})),It.slot.children)})},Vt=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft),V=p.rect,ht=V[2]-V[0],ot=V[3]-V[1],Ot=p.borderStyle.width;return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(It){return e.createElement("div",f({},It.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":p.id,onClick:It.popup.toggleOnClick,onMouseEnter:It.popup.openOnHover,onMouseLeave:It.popup.closeOnHover}),p.vertices&&p.vertices.length&&e.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(ot),width:"".concat(ht,"px")},e.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Ot||1,points:p.vertices.map(function(Dt){return"".concat(Dt.x-V[0],",").concat(V[3]-Dt.y)}).join(" ")})),It.slot.children)})},be=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft),V=p.rect,ht=V[2]-V[0],ot=V[3]-V[1],Ot=p.borderStyle.width;return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(It){return e.createElement("div",f({},It.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":p.id,onClick:It.popup.toggleOnClick,onMouseEnter:It.popup.openOnHover,onMouseLeave:It.popup.closeOnHover}),e.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(ht," ").concat(ot),width:"".concat(ht,"px")},e.createElement("rect",{height:ot-Ot,fill:"none",stroke:"transparent",strokeWidth:Ot||1,x:Ot/2,y:Ot/2,width:ht-Ot})),It.slot.children)})},Kt=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft);return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},ne=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft);return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},de=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft);return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},Ee=function(){return e.createElement(_,{size:16},e.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),e.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),e.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),e.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},xe=function(){return e.createElement(_,{size:16},e.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),e.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),e.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),e.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),e.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),e.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),e.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),e.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),e.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),e.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Ue=function(){return e.createElement(_,{size:16},e.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),e.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},sn=function(){return e.createElement(_,{size:16},e.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),e.createElement("path",{d:"M6 4.5L6 0.5"}),e.createElement("path",{d:"M18 4.5L18 0.5"}),e.createElement("path",{d:"M10 4.5L10 0.5"}),e.createElement("path",{d:"M14 4.5L14 0.5"}))},Je=function(){return e.createElement(_,{size:16},e.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),e.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),e.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},mn=function(){return e.createElement(_,{size:16},e.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},bn=function(n){var p=n.annotation,U=n.childAnnotation,z=n.page,$=n.viewport,J=p.hasPopup===!1,ft=at(p),st=rt(p),V=!!(p.hasPopup||ft||st),ht=p.name?p.name.toLowerCase():"";return e.createElement(oe,{annotation:p,hasPopup:J,ignoreBorder:!1,isRenderable:V,page:z,viewport:$},function(ot){return e.createElement(e.Fragment,null,e.createElement("div",f({},ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":p.id,onClick:ot.popup.toggleOnClick,onMouseEnter:ot.popup.openOnHover,onMouseLeave:ot.popup.closeOnHover}),ht&&e.createElement("div",{className:"rpv-core__annotation-text-icon"},ht==="check"&&e.createElement(g,null),ht==="comment"&&e.createElement(Ee,null),ht==="help"&&e.createElement(xe,null),ht==="insert"&&e.createElement(mn,null),ht==="key"&&e.createElement(Ue,null),ht==="note"&&e.createElement(sn,null),(ht==="newparagraph"||ht==="paragraph")&&e.createElement(Je,null)),ot.slot.children),U&&U.annotationType===h.AnnotationType.Popup&&ot.popup.opened&&e.createElement(ee,{annotation:U,page:z,viewport:$}))})},_n=function(n){var p=n.annotation,U=n.page,z=n.viewport,$=p.hasPopup===!1,J=at(p),ft=rt(p),st=!!(p.hasPopup||J||ft);return e.createElement(oe,{annotation:p,hasPopup:$,ignoreBorder:!0,isRenderable:st,page:U,viewport:z},function(V){return e.createElement("div",f({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":p.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},Yn=function(n){var p=n.annotations,U=n.doc,z=n.outlines,$=n.page,J=n.pageIndex,ft=n.plugins,st=n.rotation,V=n.scale,ht=n.onExecuteNamedAction,ot=n.onJumpFromLinkAnnotation,Ot=n.onJumpToDest,It=e.useRef(),Dt=$.getViewport({rotation:st,scale:V}).clone({dontFlip:!0}),Gt=p.filter(function(zt){return!zt.parentId});return b(function(){var zt=It.current;zt&&ft.forEach(function(Ut){Ut.onAnnotationLayerRender&&Ut.onAnnotationLayerRender({annotations:Gt,container:zt,pageIndex:J,rotation:st,scale:V})})},[]),e.createElement("div",{ref:It,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(J)},Gt.map(function(zt){var Ut=p.find(function(Re){return Re.parentId===zt.id});switch(zt.annotationType){case h.AnnotationType.Caret:return e.createElement(H,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.Circle:return e.createElement(Ct,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.FileAttachment:return e.createElement(jt,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.FreeText:return e.createElement(Zt,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.Highlight:return e.createElement(qt,{key:zt.id,annotation:zt,childAnnotation:Ut,page:$,viewport:Dt});case h.AnnotationType.Ink:return e.createElement(R,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.Line:return e.createElement(C,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.Link:return e.createElement(Qt,{key:zt.id,annotation:zt,annotationContainerRef:It,doc:U,outlines:z,page:$,pageIndex:J,scale:V,viewport:Dt,onExecuteNamedAction:ht,onJumpFromLinkAnnotation:ot,onJumpToDest:Ot});case h.AnnotationType.Polygon:return e.createElement(Yt,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.Polyline:return e.createElement(Vt,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.Popup:return e.createElement(ee,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.Square:return e.createElement(be,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.Squiggly:return e.createElement(Kt,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.Stamp:return e.createElement(ne,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.StrikeOut:return e.createElement(de,{key:zt.id,annotation:zt,page:$,viewport:Dt});case h.AnnotationType.Text:return e.createElement(bn,{key:zt.id,annotation:zt,childAnnotation:Ut,page:$,viewport:Dt});case h.AnnotationType.Underline:return e.createElement(_n,{key:zt.id,annotation:zt,page:$,viewport:Dt});default:return e.createElement(e.Fragment,{key:zt.id})}}))},cs=function(n){var p=n.page,U=n.renderAnnotations,z=Y(),$=e.useState({loading:!0,annotations:[]}),J=$[0],ft=$[1];return e.useEffect(function(){p.getAnnotations({intent:"display"}).then(function(st){z.current&&ft({loading:!1,annotations:st})})},[]),J.loading?e.createElement(e.Fragment,null):U(J.annotations)},hs=function(n){var p=n.doc,U=n.outlines,z=n.page,$=n.pageIndex,J=n.plugins,ft=n.rotation,st=n.scale,V=n.onExecuteNamedAction,ht=n.onJumpFromLinkAnnotation,ot=n.onJumpToDest;return e.createElement(cs,{page:z,renderAnnotations:function(Ot){return e.createElement(Yn,{annotations:Ot,doc:p,outlines:U,page:z,pageIndex:$,plugins:J,rotation:ft,scale:st,onExecuteNamedAction:V,onJumpFromLinkAnnotation:ht,onJumpToDest:ot})}})},Kn=function(n,p){var U=n%p;return U===0?n:Math.floor(n-U)},us=function(n){var p=n.canvasLayerRef,U=n.height,z=n.page,$=n.pageIndex,J=n.plugins,ft=n.rotation,st=n.scale,V=n.width,ht=n.onRenderCanvasCompleted,ot=e.useRef();return b(function(){var Ot=ot.current;Ot&&Ot.cancel();var It=p.current;It.removeAttribute("data-testid"),J.forEach(function(me){me.onCanvasLayerRender&&me.onCanvasLayerRender({ele:It,pageIndex:$,rotation:ft,scale:st,status:h.LayerRenderStatus.PreRender})});var Dt=z.getViewport({rotation:ft,scale:st}),Gt=window.devicePixelRatio||1,zt=Math.sqrt(16777216/(Dt.width*Dt.height)),Ut=Gt>zt;Ut?It.style.transform="scale(1, 1)":It.style.removeProperty("transform");var Re=Math.min(zt,Gt),ue=function(me,Oe){var Ie,Ne;if(Math.floor(me)===me)return[me,1];var Be=1/me;if(Be>Oe)return[1,Oe];if(Math.floor(Be)===Be)return[1,Be];for(var je=me>1?Be:me,nn=0,Ye=1,rn=1,Ze=1;;){var tn=nn+rn,en=Ye+Ze;if(en>Oe)break;je<=tn/en?(rn=(Ie=[tn,en])[0],Ze=Ie[1]):(nn=(Ne=[tn,en])[0],Ye=Ne[1])}return je<(nn/Ye+rn/Ze)/2?je===me?[nn,Ye]:[Ye,nn]:je===me?[rn,Ze]:[Ze,rn]}(Re,8),fe=ue[0],_e=ue[1];It.width=Kn(Dt.width*Re,fe),It.height=Kn(Dt.height*Re,fe),It.style.width="".concat(Kn(Dt.width,_e),"px"),It.style.height="".concat(Kn(Dt.height,_e),"px"),It.hidden=!0;var re=It.getContext("2d",{alpha:!1}),Ae=Ut||Gt!==1?[Re,0,0,Re,0,0]:null;return ot.current=z.render({canvasContext:re,transform:Ae,viewport:Dt}),ot.current.promise.then(function(){It.hidden=!1,It.setAttribute("data-testid","core__canvas-layer-".concat($)),J.forEach(function(me){me.onCanvasLayerRender&&me.onCanvasLayerRender({ele:It,pageIndex:$,rotation:ft,scale:st,status:h.LayerRenderStatus.DidRender})}),ht()},function(){ht()}),function(){It&&(It.width=0,It.height=0)}},[]),e.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(U,"px"),width:"".concat(V,"px")}},e.createElement("canvas",{ref:p}))},ds=function(n){var p=n.height,U=n.page,z=n.rotation,$=n.scale,J=n.width,ft=e.useRef();return b(function(){var st=ft.current,V=U.getViewport({rotation:z,scale:$});U.getOperatorList().then(function(ht){(function(){var ot=ft.current;ot&&(ot.innerHTML="")})(),new tt.SVGGraphics(U.commonObjs,U.objs).getSVG(ht,V).then(function(ot){ot.style.height="".concat(p,"px"),ot.style.width="".concat(J,"px"),st.appendChild(ot)})})},[]),e.createElement("div",{className:"rpv-core__svg-layer",ref:ft})},fs=function(n){var p=n.containerRef,U=n.page,z=n.pageIndex,$=n.plugins,J=n.rotation,ft=n.scale,st=n.onRenderTextCompleted,V=e.useRef(),ht=function(){var ot=p.current;ot&&([].slice.call(ot.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Ot){return ot.removeChild(Ot)}),[].slice.call(ot.querySelectorAll('br[role="presentation"]')).forEach(function(Ot){return ot.removeChild(Ot)}))};return b(function(){var ot=V.current;ot&&ot.cancel();var Ot=p.current;if(Ot){Ot.removeAttribute("data-testid");var It=U.getViewport({rotation:J,scale:ft});return $.forEach(function(Dt){Dt.onTextLayerRender&&Dt.onTextLayerRender({ele:Ot,pageIndex:z,scale:ft,status:h.LayerRenderStatus.PreRender})}),U.getTextContent().then(function(Dt){ht(),V.current=tt.renderTextLayer({container:Ot,textContent:Dt,textContentSource:Dt,viewport:It}),V.current.promise.then(function(){Ot.setAttribute("data-testid","core__text-layer-".concat(z)),[].slice.call(Ot.children).forEach(function(Gt){Gt.classList.contains("rpv-core__text-layer-text--not")||Gt.classList.add("rpv-core__text-layer-text")}),$.forEach(function(Gt){Gt.onTextLayerRender&&Gt.onTextLayerRender({ele:Ot,pageIndex:z,scale:ft,status:h.LayerRenderStatus.DidRender})}),st()},function(){Ot.removeAttribute("data-testid"),st()})}),function(){var Dt;ht(),(Dt=V.current)===null||Dt===void 0||Dt.cancel()}}},[]),e.createElement("div",{className:"rpv-core__text-layer",ref:p})},ps=function(n){var p=n.doc,U=n.measureRef,z=n.outlines,$=n.pageIndex,J=n.pageRotation,ft=n.pageSize,st=n.plugins,V=n.renderPage,ht=n.renderQueueKey,ot=n.rotation,Ot=n.scale,It=n.shouldRender,Dt=n.viewMode,Gt=n.onExecuteNamedAction,zt=n.onJumpFromLinkAnnotation,Ut=n.onJumpToDest,Re=n.onRenderCompleted,ue=n.onRotatePage,fe=Y(),_e=e.useState(null),re=_e[0],Ae=_e[1],me=e.useState(!1),Oe=me[0],Ie=me[1],Ne=e.useState(!1),Be=Ne[0],je=Ne[1],nn=e.useRef(),Ye=e.useRef(),rn=Math.abs(ot+J)%180==0,Ze=ft.pageWidth*Ot,tn=ft.pageHeight*Ot,en=rn?Ze:tn,Qe=rn?tn:Ze,un=(ft.rotation+ot+J)%360,yn=e.useRef(0),vn=V||function(ln){return e.createElement(e.Fragment,null,ln.canvasLayer.children,ln.textLayer.children,ln.annotationLayer.children)};return e.useEffect(function(){Ae(null),Ie(!1),je(!1)},[J,ot,Ot]),e.useEffect(function(){It&&fe.current&&!re&&$t(p,$).then(function(ln){fe.current&&(yn.current=ht,Ae(ln))})},[It,re]),e.useEffect(function(){Oe&&Be&&(ht!==yn.current?(Ae(null),Ie(!1),je(!1)):Re($))},[Oe,Be]),e.createElement("div",{className:y({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":Dt===h.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":Dt===h.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":Dt===h.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat($),ref:U,style:{height:"".concat(Qe,"px"),width:"".concat(en,"px")}},re?e.createElement(e.Fragment,null,vn({annotationLayer:{attrs:{},children:e.createElement(hs,{doc:p,outlines:z,page:re,pageIndex:$,plugins:st,rotation:un,scale:Ot,onExecuteNamedAction:Gt,onJumpFromLinkAnnotation:zt,onJumpToDest:Ut})},canvasLayer:{attrs:{},children:e.createElement(us,{canvasLayerRef:nn,height:Qe,page:re,pageIndex:$,plugins:st,rotation:un,scale:Ot,width:en,onRenderCanvasCompleted:function(){fe.current&&Ie(!0)}})},canvasLayerRendered:Oe,doc:p,height:Qe,pageIndex:$,rotation:un,scale:Ot,svgLayer:{attrs:{},children:e.createElement(ds,{height:Qe,page:re,rotation:un,scale:Ot,width:en})},textLayer:{attrs:{},children:e.createElement(fs,{containerRef:Ye,page:re,pageIndex:$,plugins:st,rotation:un,scale:Ot,onRenderTextCompleted:function(){fe.current&&je(!0)}})},textLayerRendered:Be,width:en,markRendered:Re,onRotatePage:function(ln){return ue($,ln)}}),st.map(function(ln,dn){return ln.renderPageLayer?e.createElement(e.Fragment,{key:dn},ln.renderPageLayer({canvasLayerRef:nn,canvasLayerRendered:Oe,doc:p,height:Qe,pageIndex:$,rotation:un,scale:Ot,textLayerRef:Ye,textLayerRendered:Be,width:en})):e.createElement(e.Fragment,{key:dn})})):e.createElement(B,{testId:"core__page-layer-loading-".concat($)}))},gs=function(n,p){var U=p.rect;return n.height!==U.height||n.width!==U.width?U:n};(function(n){n.Horizontal="Horizontal",n.Vertical="Vertical",n.Both="Both"})(Jt||(Jt={}));var ms=function(n){return 1-Math.pow(1-n,4)},Jn=1e-4,hr={left:0,top:0},ur={capture:!1,passive:!0},vs=function(n){var p=n.elementRef,U=n.enableSmoothScroll,z=n.isRtl,$=n.scrollDirection,J=n.onSmoothScroll,ft=e.useState(hr),st=ft[0],V=ft[1],ht=e.useState(p.current),ot=ht[0],Ot=ht[1],It=z?-1:1,Dt=e.useRef($);Dt.current=$;var Gt=e.useRef(hr),zt=e.useRef(!0),Ut=e.useCallback(function(){zt.current=!0,U&&V(Gt.current),J(!1)},[]),Re=e.useCallback(function(){if(ot){switch(Dt.current){case Jt.Horizontal:Gt.current={left:It*ot.scrollLeft,top:0};break;case Jt.Both:Gt.current={left:It*ot.scrollLeft,top:ot.scrollTop};break;case Jt.Vertical:default:Gt.current={left:0,top:ot.scrollTop}}U&&!zt.current||V(Gt.current)}},[ot]);b(function(){Ot(p.current)}),b(function(){if(ot)return ot.addEventListener("scroll",Re,ur),function(){ot.removeEventListener("scroll",Re,ur)}},[ot]);var ue=e.useCallback(function(fe,_e){var re=p.current;if(!re)return Promise.resolve();var Ae={left:0,top:0};switch(Dt.current){case Jt.Horizontal:Ae.left=It*fe.left;break;case Jt.Both:Ae.left=It*fe.left,Ae.top=fe.top;break;case Jt.Vertical:default:Ae.top=fe.top}return _e?(zt.current=!1,J(!0),new Promise(function(me,Oe){(function(Ie,Ne,Be,je,nn,Ye){nn===void 0&&(nn=function(dn){return dn}),Ye===void 0&&(Ye=function(){});var rn=0,Ze=0,tn=!1;switch(Ne){case Jt.Horizontal:Ze=Ie.scrollLeft,rn=0;case Jt.Both:Ze=Ie.scrollLeft,rn=Ie.scrollTop;break;case Jt.Vertical:default:Ze=0,rn=Ie.scrollTop}var en=function(){tn||(tn=!0,Ie.scrollLeft=Be.left,Ie.scrollTop=Be.top,Ye())};if(Math.abs(rn-Be.top)<=Jn&&Ne===Jt.Vertical)en();else if(Math.abs(Ze-Be.left)<=Jn&&Ne===Jt.Horizontal)en();else{var Qe,un=-1,yn=Ze-Be.left,vn=rn-Be.top,ln=function(dn){un===-1&&(un=dn);var An=dn-un,ve=Math.min(An/je,1),pe=nn(ve),se={left:Ze-yn*pe,top:rn-vn*pe};switch(Ne){case Jt.Horizontal:Ie.scrollLeft=se.left;break;case Jt.Both:Ie.scrollLeft=se.left,Ie.scrollTop=se.top;break;case Jt.Vertical:default:Ie.scrollTop=se.top}Math.abs(se.top-Be.top)<=Jn&&Math.abs(se.left-Be.left)<=Jn&&!tn&&(window.cancelAnimationFrame(Qe),en()),An<je?Qe=window.requestAnimationFrame(ln):window.cancelAnimationFrame(Qe)};Qe=window.requestAnimationFrame(ln)}})(re,Dt.current,Ae,400,ms,function(){Ut(),me()})})):new Promise(function(me,Oe){switch(Dt.current){case Jt.Horizontal:re.scrollLeft=Ae.left;break;case Jt.Both:re.scrollLeft=Ae.left,re.scrollTop=Ae.top;break;case Jt.Vertical:default:re.scrollTop=Ae.top}me()})},[p]);return{scrollOffset:st,scrollTo:ue}},Hn=function(n,p,U){return Math.max(n,Math.min(U,p))},bs=function(n,p){if(p!==h.ViewMode.DualPageWithCover)return 0;if(!function($){var J=$.length;if(J===1)return!1;for(var ft=1;ft<J;ft++)if($[ft].height!==$[0].height||$[ft].width!==$[0].width)return!0;return!1}(n))return 2*n[0].width;var U=et(n.slice(1),2).map(function($){return $.length===2?$[0].width+$[1].width:$[0].width}),z=[n[0].width].concat(U);return Math.max.apply(Math,z)},_s={left:0,top:0},ys={left:0,top:0},vi={left:0,top:0},As={left:0,top:0},Ss={height:0,width:0},dr={left:0,top:0},fr="data-virtual-index",Es=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],ws=function(n){var p=n.enableSmoothScroll,U=n.isRtl,z=n.numberOfItems,$=n.parentRef,J=n.setRenderRange,ft=n.sizes,st=n.scrollMode,V=n.viewMode,ht=e.useState(!1),ot=ht[0],Ot=ht[1],It=e.useCallback(function(ve){return Ot(ve)},[]),Dt=e.useRef(st);Dt.current=st;var Gt=e.useRef(V);Gt.current=V;var zt=st===h.ScrollMode.Wrapped||V===h.ViewMode.DualPageWithCover||V===h.ViewMode.DualPage?Jt.Both:st===h.ScrollMode.Horizontal?Jt.Horizontal:Jt.Vertical,Ut=vs({elementRef:$,enableSmoothScroll:p,isRtl:U,scrollDirection:zt,onSmoothScroll:It}),Re=Ut.scrollOffset,ue=Ut.scrollTo,fe=function(ve){var pe=ve.elementRef,se=e.useState(pe.current),ce=se[0],ae=se[1],Se=e.useRef(!1),we=e.useReducer(gs,{height:0,width:0}),he=we[0],te=we[1];return b(function(){pe.current!==ce&&ae(pe.current)}),b(function(){if(ce&&!Se.current){Se.current=!0;var Te=ce.getBoundingClientRect(),Me=Te.height,Xe=Te.width;te({rect:{height:Me,width:Xe}})}},[ce]),e.useEffect(function(){if(ce){var Te=new ResizeObserver(function(Me,Xe){Me.forEach(function(Ve){if(Ve.target===ce){var cn=Ve.contentRect,fn=cn.height,ke=cn.width;te({rect:{height:fn,width:ke}})}})});return Te.observe(ce),function(){Te.unobserve(ce)}}},[ce]),he}({elementRef:$}),_e=e.useRef({scrollOffset:dr,measurements:[]});_e.current.scrollOffset=Re;var re=e.useMemo(function(){return Array(z).fill(-1)},[]),Ae=e.useState(re),me=Ae[0],Oe=Ae[1],Ie=e.useMemo(function(){var ve=new IntersectionObserver(function(pe){pe.forEach(function(se){var ce=se.isIntersecting?se.intersectionRatio:-1,ae=se.target.getAttribute(fr);if(ae){var Se=parseInt(ae,10);0<=Se&&Se<z&&Oe(function(we){return we[Se]=ce,function(he,te,Te){for(var Me,Xe=0,Ve=te.length;Xe<Ve;Xe++)!Me&&Xe in te||(Me||(Me=Array.prototype.slice.call(te,0,Xe)),Me[Xe]=te[Xe]);return he.concat(Me||Array.prototype.slice.call(te))}([],we)})}})},{threshold:Es});return ve},[]),Ne=e.useMemo(function(){return st===h.ScrollMode.Page&&V===h.ViewMode.SinglePage?function(ve,pe,se){for(var ce=[],ae=0;ae<ve;ae++){var Se={height:Math.max(pe.height,se[ae].height),width:Math.max(pe.width,se[ae].width)},we=ae===0?As:ce[ae-1].end,he={left:we.left+Se.width,top:we.top+Se.height};ce[ae]={index:ae,start:we,size:Se,end:he,visibility:-1}}return ce}(z,fe,ft):V===h.ViewMode.DualPageWithCover?function(ve,pe,se,ce){for(var ae=[],Se=0,we=0,he=vi,te=0;te<ve;te++){var Te=te===0?{height:ce===h.ScrollMode.Page?Math.max(pe.height,se[te].height):se[te].height,width:ce===h.ScrollMode.Page?Math.max(pe.width,se[te].width):se[te].width}:{height:ce===h.ScrollMode.Page?Math.max(pe.height,se[te].height):se[te].height,width:Math.max(pe.width/2,se[te].width)};ce===h.ScrollMode.Page?he=te===0?vi:{left:te%2==0?Te.width:0,top:Math.floor((te-1)/2)*Te.height+ae[0].end.top}:te===0?(he=vi,Se=se[0].height,we=0):te%2==1?(he={left:0,top:Se+=we},we=te===ve-1?se[te].height:Math.max(se[te].height,se[te+1].height)):he={left:ae[te-1].end.left,top:Se};var Me={left:he.left+Te.width,top:he.top+Te.height};ae[te]={index:te,start:he,size:Te,end:Me,visibility:-1}}return ae}(z,fe,ft,st):V===h.ViewMode.DualPage?function(ve,pe,se,ce){for(var ae=[],Se=0,we=0,he=ys,te=0;te<ve;te++){var Te={height:ce===h.ScrollMode.Page?Math.max(pe.height,se[te].height):se[te].height,width:Math.max(pe.width/2,se[te].width)};ce===h.ScrollMode.Page?he={left:te%2==0?0:Te.width,top:Math.floor(te/2)*Te.height}:te%2==0?(he={left:0,top:Se+=we},we=te===ve-1?se[te].height:Math.max(se[te].height,se[te+1].height)):he={left:ae[te-1].end.left,top:Se};var Me={left:he.left+Te.width,top:he.top+Te.height};ae[te]={index:te,start:he,size:Te,end:Me,visibility:-1}}return ae}(z,fe,ft,st):function(ve,pe,se,ce){for(var ae=[],Se=0,we={left:0,top:0},he=0,te=_s,Te=0;Te<ve;Te++){var Me=se[Te];if(Te===0)Se=Me.width,we={left:0,top:0},he=Me.height;else switch(ce){case h.ScrollMode.Wrapped:(Se+=Me.width)<pe.width?(te={left:ae[Te-1].end.left,top:we.top},he=Math.max(he,Me.height)):(Se=Me.width,we={left:(te={left:we.left,top:we.top+he}).left,top:te.top},he=Me.height);break;case h.ScrollMode.Horizontal:case h.ScrollMode.Vertical:default:te=ae[Te-1].end}var Xe={left:te.left+Me.width,top:te.top+Me.height};ae[Te]={index:Te,start:te,size:Me,end:Xe,visibility:-1}}return ae}(z,fe,ft,st)},[st,ft,V,fe]),Be=Ne[z-1]?{height:Ne[z-1].end.top,width:Ne[z-1].end.left}:Ss;_e.current.measurements=Ne;var je=e.useMemo(function(){var ve=function(Te,Me,Xe,Ve){var cn=0;switch(Te){case Jt.Horizontal:cn=Ve.left;break;case Jt.Vertical:default:cn=Ve.top}var fn=Me.length-1,ke=function(ze,En,Fn,Qn){for(;ze<=En;){var kn=(ze+En)/2|0,Un=Qn(kn);if(Un<Fn)ze=kn+1;else{if(!(Un>Fn))return kn;En=kn-1}}return ze>0?ze-1:0}(0,fn,cn,function(ze){switch(Te){case Jt.Horizontal:return Me[ze].start.left;case Jt.Both:case Jt.Vertical:default:return Me[ze].start.top}});if(Te===Jt.Both)for(var hn=Me[ke].start.top;ke-1>=0&&Me[ke-1].start.top===hn&&Me[ke-1].start.left>=Ve.left;)ke--;for(var $e=ke;$e<=fn;){var Ke={top:Me[$e].start.top-Ve.top,left:Me[$e].start.left-Ve.left},an={height:Xe.height-Ke.top,width:Xe.width-Ke.left};if(Te===Jt.Horizontal&&an.width<0||Te===Jt.Vertical&&an.height<0||Te===Jt.Both&&(an.width<0||an.height<0))break;$e++}return{start:ke,end:$e}}(zt,Ne,fe,Re),pe=ve.start,se=ve.end,ce=me.slice(Hn(0,z,pe),Hn(0,z,se)),ae=pe+ce.reduce(function(Te,Me,Xe,Ve){return Me>Ve[Te]?Xe:Te},0),Se=ae=Hn(0,z-1,ae),we=J({endPage:se,numPages:z,startPage:pe}),he=we.startPage,te=we.endPage;switch(he=Math.max(he,0),te=Math.min(te,z-1),V){case h.ViewMode.DualPageWithCover:ae>0&&(Se=ae%2==1?ae:ae-1),he=he===0?0:he%2==1?he:he-1,z-(te=te%2==1?te-1:te)<=2&&(te=z-1);break;case h.ViewMode.DualPage:Se=ae%2==0?ae:ae-1,he=he%2==0?he:he-1,te=te%2==1?te:te-1;break;case h.ViewMode.SinglePage:default:Se=ae}return{startPage:he,endPage:te,maxVisbilityIndex:Se}},[Ne,fe,Re,V,me]),nn=je.startPage,Ye=je.endPage,rn=je.maxVisbilityIndex,Ze=e.useMemo(function(){for(var ve=[],pe=function(ce){var ae=Ne[ce],Se=f(f({},ae),{visibility:me[ce]!==void 0?me[ce]:-1,measureRef:function(we){we&&(we.setAttribute(fr,"".concat(ce)),Ie.observe(we))}});ve.push(Se)},se=nn;se<=Ye;se++)pe(se);return ve},[nn,Ye,me,Ne]),tn=e.useCallback(function(ve,pe){var se=_e.current.measurements[Hn(0,z-1,ve)],ce=Dt.current===h.ScrollMode.Page?dr:pe;return se?ue({left:ce.left+se.start.left,top:ce.top+se.start.top},p):Promise.resolve()},[ue,p]),en=e.useCallback(function(ve,pe){var se=_e.current.measurements,ce=se[ve].start,ae=se.find(function(we){return we.start.top-ce.top>1e-12});if(!ae)return Promise.resolve();var Se=ae.index;switch(Gt.current){case h.ViewMode.DualPage:Se=Se%2==0?Se:Se+1;break;case h.ViewMode.DualPageWithCover:Se=Se%2==1?Se:Se+1}return tn(Se,pe)},[]),Qe=e.useCallback(function(ve,pe){for(var se=_e.current.measurements,ce=se[ve].start,ae=ve,Se=!1,we=z-1;we>=0;we--)if(ce.top-se[we].start.top>1e-12){Se=!0,ae=se[we].index;break}if(!Se)return Promise.resolve();switch(Gt.current){case h.ViewMode.DualPage:ae=ae%2==0?ae:ae-1;break;case h.ViewMode.DualPageWithCover:ae=ae%2==0?ae-1:ae}return ae===ve&&(ae=ve-1),tn(ae,pe)},[]),un=e.useCallback(function(ve,pe){if(Gt.current===h.ViewMode.DualPageWithCover||Gt.current===h.ViewMode.DualPage)return en(ve,pe);switch(Dt.current){case h.ScrollMode.Wrapped:return en(ve,pe);case h.ScrollMode.Horizontal:case h.ScrollMode.Vertical:default:return tn(ve+1,pe)}},[]),yn=e.useCallback(function(ve,pe){if(Gt.current===h.ViewMode.DualPageWithCover||Gt.current===h.ViewMode.DualPage)return Qe(ve,pe);switch(Dt.current){case h.ScrollMode.Wrapped:return Qe(ve,pe);case h.ScrollMode.Horizontal:case h.ScrollMode.Vertical:default:return tn(ve-1,pe)}},[]),vn=e.useCallback(function(){return function(ve,pe){switch(pe){case h.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(ve.width,"px")};case h.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(ve.height,"px"),width:"100%"}}}(Be,Dt.current)},[Be]),ln=e.useCallback(function(ve){return function(pe,se,ce){return ce!==h.ScrollMode.Page?{}:{height:"".concat(se.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(pe.start.top,"px)")}}(ve,fe,Dt.current)},[fe]),dn=e.useCallback(function(ve){return function(pe,se,ce,ae,Se){var we,he,te,Te,Me,Xe,Ve,cn=se?"right":"left",fn=se?-1:1,ke=ce.length,hn=pe.start.left*fn,$e=pe.size,Ke=$e.height,an=$e.width;if(ae===h.ViewMode.DualPageWithCover){var ze=Se===h.ScrollMode.Page?0:pe.start.top;return pe.index===0||ke%2==0&&pe.index===ke-1?((we={height:"".concat(Ke,"px"),minWidth:"".concat(bs(ce,ae),"px"),width:"100%"})[cn]=0,we.position="absolute",we.top=0,we.transform="translate(".concat(hn,"px, ").concat(ze,"px)"),we):((he={height:"".concat(Ke,"px"),width:"".concat(an,"px")})[cn]=0,he.position="absolute",he.top=0,he.transform="translate(".concat(hn,"px, ").concat(ze,"px)"),he)}if(ae===h.ViewMode.DualPage)return(te={height:"".concat(Ke,"px"),width:"".concat(an,"px")})[cn]=0,te.position="absolute",te.top=0,te.transform="translate(".concat(hn,"px, ").concat(Se===h.ScrollMode.Page?0:pe.start.top,"px)"),te;switch(Se){case h.ScrollMode.Horizontal:return(Te={height:"100%",width:"".concat(an,"px")})[cn]=0,Te.position="absolute",Te.top=0,Te.transform="translateX(".concat(hn,"px)"),Te;case h.ScrollMode.Page:return(Me={height:"".concat(Ke,"px"),width:"".concat(an,"px")})[cn]=0,Me.position="absolute",Me.top=0,Me;case h.ScrollMode.Wrapped:return(Xe={height:"".concat(Ke,"px"),width:"".concat(an,"px")})[cn]=0,Xe.position="absolute",Xe.top=0,Xe.transform="translate(".concat(hn,"px, ").concat(pe.start.top,"px)"),Xe;case h.ScrollMode.Vertical:default:return(Ve={height:"".concat(Ke,"px"),width:"100%"})[cn]=0,Ve.position="absolute",Ve.top=0,Ve.transform="translateY(".concat(pe.start.top,"px)"),Ve}}(ve,U,ft,Gt.current,Dt.current)},[U,ft]),An=e.useCallback(function(ve,pe){var se=_e.current,ce=se.measurements,ae=se.scrollOffset,Se=ce[Hn(0,z-1,pe)];if(Se){var we=Dt.current===h.ScrollMode.Page?{left:Se.start.left,top:Se.start.top}:{left:ae.left*ve,top:ae.top*ve};return ue(we,!1)}return Promise.resolve()},[]);return e.useEffect(function(){return function(){Ie.disconnect()}},[]),{boundingClientRect:fe,isSmoothScrolling:ot,startPage:nn,endPage:Ye,maxVisbilityIndex:rn,virtualItems:Ze,getContainerStyles:vn,getItemContainerStyles:ln,getItemStyles:dn,scrollToItem:tn,scrollToNextItem:un,scrollToPreviousItem:yn,zoom:An}},bi=function(n,p,U,z,$,J){var ft=U;switch(!0){case($===h.ViewMode.DualPageWithCover&&J>=3):case($===h.ViewMode.DualPage&&J>=3):ft=2*U;break;default:ft=U}switch(z){case h.SpecialZoomLevel.ActualSize:return 1;case h.SpecialZoomLevel.PageFit:return Math.min((n.clientWidth-17)/ft,(n.clientHeight-16)/p);case h.SpecialZoomLevel.PageWidth:return(n.clientWidth-17)/ft}},Cs=function(n){var p,U,z=n.getCurrentPage,$=(p=50,U=e.useRef([]),e.useEffect(function(){return function(){U.current=[]}},[]),{push:function(ht){var ot=U.current;ot.length+1>p&&ot.shift(),ot.push(ht),U.current=ot},map:function(ht){return U.current.map(function(ot){return ht(ot)})},pop:function(){var ht=U.current;if(ht.length===0)return null;var ot=ht.pop();return U.current=ht,ot}}),J=function(ht){var ot=e.useRef([]);return e.useEffect(function(){return function(){ot.current=[]}},[]),{dequeue:function(){var Ot=ot.current;if(Ot.length===0)return null;var It=Ot.shift();return ot.current=Ot,It||null},enqueue:function(Ot){var It=ot.current;It.length+1>ht&&It.pop(),ot.current=[Ot].concat(It)},map:function(Ot){return ot.current.map(function(It){return Ot(It)})}}}(50),ft=function(){var ht=J.dequeue();return ht&&$.push(ht),ht&&ht.pageIndex===z()?ft():ht},st=function(){var ht=$.pop();return ht&&J.enqueue(ht),ht&&ht.pageIndex===z()?st():ht},V=e.useCallback(function(ht){$.push(ht)},[]);return{getNextDestination:ft,getPreviousDestination:st,markVisitedDestination:V}},pr=function(n){var p=[];return n.map(function(U){p=p.concat(U).concat(function(z){var $=[];return z.items&&z.items.length>0&&($=$.concat(pr(z.items))),$}(U))}),p},gr={capture:!1,passive:!0},Ps={height:0,width:0},_i={height:0,width:0},Ts=function(n){var p=n.getCurrentPage,U=n.getCurrentScrollMode,z=n.jumpToPage,$=n.targetRef,J=e.useState(h.FullScreenMode.Normal),ft=J[0],st=J[1],V=function(){var me=e.useState(Ps),Oe=me[0],Ie=me[1],Ne=vt(function(){Ie({height:window.innerHeight,width:window.innerWidth})},100);return b(function(){return window.addEventListener("resize",Ne,gr),function(){window.removeEventListener("resize",Ne,gr)}},[]),Oe}(),ht=e.useState(_i),ot=ht[0],Ot=ht[1],It=e.useRef(_i),Dt=e.useRef(p()),Gt=e.useRef(_i),zt=e.useState($.current),Ut=zt[0],Re=zt[1],ue=e.useRef();b(function(){$.current!==Ut&&Re($.current)},[]),b(function(){if(Ut){var me=new ResizeObserver(function(Oe){Oe.forEach(function(Ie){var Ne=Ie.target.getBoundingClientRect(),Be=Ne.height,je=Ne.width;Ot({height:Be,width:je})})});return me.observe(Ut),function(){me.unobserve(Ut),me.disconnect()}}},[Ut]);var fe=e.useCallback(function(me){var Oe=D();return Oe&&Oe!==me?(st(h.FullScreenMode.Normal),E(Oe)):Promise.resolve()},[]),_e=e.useCallback(function(me){me&&o()&&(Re(me),fe(me).then(function(){ue.current=me,st(h.FullScreenMode.Entering),function(Oe){c&&Oe[N.RequestFullScreen]()}(me)}))},[]),re=e.useCallback(function(){D()&&(st(h.FullScreenMode.Exitting),E(document))},[]),Ae=e.useCallback(function(){Ut&&D()!==Ut&&st(h.FullScreenMode.Exitting)},[Ut]);return e.useEffect(function(){switch(ft){case h.FullScreenMode.Entering:ue.current&&(ue.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),Dt.current=p(),It.current={height:window.innerHeight,width:window.innerWidth};break;case h.FullScreenMode.Entered:U()===h.ScrollMode.Page?z(Dt.current).then(function(){st(h.FullScreenMode.EnteredCompletely)}):st(h.FullScreenMode.EnteredCompletely);break;case h.FullScreenMode.Exitting:ue.current&&(ue.current.style.backgroundColor="",ue.current=null),Dt.current=p();break;case h.FullScreenMode.Exited:st(h.FullScreenMode.Normal),U()===h.ScrollMode.Page&&z(Dt.current)}},[ft]),e.useEffect(function(){if(ft!==h.FullScreenMode.Normal)return ft===h.FullScreenMode.Entering&&V.height===ot.height&&V.width===ot.width&&V.height>0&&V.width>0&&(Gt.current.height===0||V.height==Gt.current.height)?(Gt.current={height:window.innerHeight,width:window.innerWidth},void st(h.FullScreenMode.Entered)):void(ft===h.FullScreenMode.Exitting&&It.current.height===V.height&&It.current.width===V.width&&V.height>0&&V.width>0&&st(h.FullScreenMode.Exited))},[ft,V,ot]),e.useEffect(function(){var me;return me=Ae,c&&document.addEventListener(N.FullScreenChange,me),function(){(function(Oe){c&&document.removeEventListener(N.FullScreenChange,Oe)})(Ae)}},[Ut]),{enterFullScreenMode:_e,exitFullScreenMode:re,fullScreenMode:ft}},ks={buildPageStyles:function(){return{}},transformSize:function(n){return n.size}},xn={left:0,top:0},Rs=function(n){var p=n.currentFile,U=n.defaultScale,z=n.doc,$=n.enableSmoothScroll,J=n.initialPage,ft=n.initialRotation,st=n.initialScale,V=n.pageLayout,ht=n.pageSizes,ot=n.plugins,Ot=n.renderPage,It=n.scrollMode,Dt=n.setRenderRange,Gt=n.viewMode,zt=n.viewerState,Ut=n.onDocumentLoad,Re=n.onOpenFile,ue=n.onPageChange,fe=n.onRotate,_e=n.onRotatePage,re=n.onZoom,Ae=z.numPages,me=z.loadingTask.docId,Oe=e.useContext(lt).l10n,Ie=e.useContext(j),Ne=Ie.direction===h.TextDirection.RightToLeft,Be=e.useRef(),je=e.useRef(),nn=e.useState(J),Ye=nn[0],rn=nn[1],Ze=e.useRef(null),tn=Cs({getCurrentPage:function(){return ke.current.pageIndex}}),en=e.useState(ft),Qe=en[0],un=en[1],yn=it(Qe),vn=e.useState(!1),ln=vn[0],dn=vn[1],An=e.useState(new Map),ve=An[0],pe=An[1],se=e.useState(It),ce=se[0],ae=se[1],Se=it(ce),we=e.useState(Gt),he=we[0],te=we[1],Te=it(he),Me=function(Ht){var Ce=Y(),Fe=e.useState([]),We=Fe[0],He=Fe[1];return e.useEffect(function(){Ht.getOutline().then(function(Le){if(Ce.current&&Le!==null){var on=pr(Le);He(on)}})},[]),We}(z),Xe=e.useState(st),Ve=Xe[0],cn=Xe[1],fn=it(Ve),ke=e.useRef(zt),hn=e.useRef(typeof U=="string"?U:null),$e=e.useRef(-1),Ke=e.useRef(-1),an=e.useRef(J),ze=Ts({getCurrentPage:function(){return ke.current.pageIndex},getCurrentScrollMode:function(){return ke.current.scrollMode},jumpToPage:function(Ht){return Cn(Ht)},targetRef:je}),En=e.useState(-1),Fn=En[0],Qn=En[1],kn=e.useState(0),Un=kn[0],Is=kn[1],pn=M({doc:z});e.useEffect(function(){return function(){Bt.clear(),ge.clear()}},[me]);var _r=e.useMemo(function(){return Object.assign({},ks,V)},[]),Os=e.useMemo(function(){return Array(Ae).fill(0).map(function(Ht,Ce){var Fe=[ht[Ce].pageHeight,ht[Ce].pageWidth],We=Math.abs(Qe)%180==0?{height:Fe[0],width:Fe[1]}:{height:Fe[1],width:Fe[0]},He={height:We.height*Ve,width:We.width*Ve};return _r.transformSize({numPages:Ae,pageIndex:Ce,size:He})})},[Qe,Ve]),Ge=ws({enableSmoothScroll:$,isRtl:Ne,numberOfItems:Ae,parentRef:je,scrollMode:ce,setRenderRange:Dt,sizes:Os,viewMode:he}),Ns=vt(function(){!hn.current||ke.current.fullScreenMode!==h.FullScreenMode.Normal||J>0&&an.current===J||Rn(hn.current)},200);(function(Ht){var Ce=Ht.targetRef,Fe=Ht.onResize;b(function(){var We=new ResizeObserver(function(Le){Le.forEach(function(on){Fe(on.target)})}),He=Ce.current;if(He)return We.observe(He),function(){We.unobserve(He)}},[])})({targetRef:je,onResize:Ns});var wn=function(Ht){var Ce=Ht;ot.forEach(function(Fe){Fe.onViewerStateChange&&(Ce=Fe.onViewerStateChange(Ce))}),ke.current=Ce},Bs=function(){return je.current},Hs=function(){return ke.current},Us=e.useCallback(function(Ht){tn.markVisitedDestination(Ht)},[]),Si=e.useCallback(function(Ht){var Ce=Ht.pageIndex,Fe=Ht.bottomOffset,We=Ht.leftOffset,He=Ht.scaleTo,Le=je.current,on=ke.current;return Le&&on?new Promise(function(Pn,ki){$t(z,Ce).then(function(ti){var Tn=ti.getViewport({scale:1}),ei=0,Tr=(typeof Fe=="function"?Fe(Tn.width,Tn.height):Fe)||0,ni=(typeof We=="function"?We(Tn.width,Tn.height):We)||0,Ln=on.scale;switch(He){case h.SpecialZoomLevel.PageFit:ei=0,ni=0,Rn(h.SpecialZoomLevel.PageFit);break;case h.SpecialZoomLevel.PageWidth:Ln=bi(Le,ht[Ce].pageHeight,ht[Ce].pageWidth,h.SpecialZoomLevel.PageWidth,Gt,Ae),ei=(Tn.height-Tr)*Ln,ni*=Ln,Rn(Ln);break;default:ei=(Tn.height-Tr)*Ln,ni*=Ln}switch(on.scrollMode){case h.ScrollMode.Horizontal:Ge.scrollToItem(Ce,{left:ni,top:0}).then(function(){Pn()});break;case h.ScrollMode.Vertical:default:Ge.scrollToItem(Ce,{left:0,top:ei}).then(function(){Pn()})}})}):Promise.resolve()},[]),yr=e.useCallback(function(Ht){return tn.markVisitedDestination(Ht),Si(Ht)},[]),js=e.useCallback(function(){var Ht=tn.getNextDestination();return Ht?Si(Ht):Promise.resolve()},[]),Ws=e.useCallback(function(){var Ht=tn.getPreviousDestination();return Ht?Si(Ht):Promise.resolve()},[]),zs=e.useCallback(function(){return Ge.scrollToNextItem(ke.current.pageIndex,xn)},[]),Cn=e.useCallback(function(Ht){return 0<=Ht&&Ht<Ae?Ge.scrollToItem(Ht,xn):Promise.resolve()},[]),Vs=e.useCallback(function(){return Ge.scrollToPreviousItem(ke.current.pageIndex,xn)},[]),Ar=e.useCallback(function(Ht){var Ce,Fe;(Ce=Ht.name,Fe=Ce.split(/\./).pop(),Fe?Fe.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(We){var He=new FileReader;He.readAsArrayBuffer(Ht),He.onload=function(){var Le=new Uint8Array(He.result);We(Le)}}).then(function(We){Re(Ht.name,We)})},[Re]),Sr=e.useCallback(function(Ht){var Ce=Ht===h.RotateDirection.Backward?-90:90,Fe=ke.current.rotation,We=Fe===360||Fe===-360?Ce:Fe+Ce;pn.markNotRendered(),un(We),wn(f(f({},ke.current),{rotation:We})),fe({direction:Ht,doc:z,rotation:We})},[]),Ei=e.useCallback(function(Ht,Ce){var Fe=Ce===h.RotateDirection.Backward?-90:90,We=ke.current.pagesRotation,He=(We.has(Ht)?We.get(Ht):ft)+Fe,Le=We.set(Ht,He);pe(Le),dn(function(on){return!on}),wn(f(f({},ke.current),{pagesRotation:Le,rotatedPage:Ht})),_e({direction:Ce,doc:z,pageIndex:Ht,rotation:He}),pn.markRendering(Ht),Qn(Ht)},[]),Er=e.useCallback(function(Ht){wn(f(f({},ke.current),{scrollMode:Ht})),ae(Ht)},[]),wr=e.useCallback(function(Ht){wn(f(f({},ke.current),{viewMode:Ht})),te(Ht)},[]),Rn=e.useCallback(function(Ht){var Ce=je.current,Fe=ke.current.pageIndex;if(!(Fe<0||Fe>=Ae)){var We=ht[Fe].pageHeight,He=ht[Fe].pageWidth,Le=Ce?typeof Ht=="string"?bi(Ce,We,He,Ht,ke.current.viewMode,Ae):Ht:1;hn.current=typeof Ht=="string"?Ht:null,Le!==ke.current.scale&&(Is(function(on){return on+1}),pn.markNotRendered(),cn(Le),re({doc:z,scale:Le}),wn(f(f({},ke.current),{scale:Le})))}},[]),Gs=e.useCallback(function(Ht){ze.enterFullScreenMode(Ht)},[]),qs=e.useCallback(function(){ze.exitFullScreenMode()},[]);e.useEffect(function(){wn(f(f({},ke.current),{fullScreenMode:ze.fullScreenMode}))},[ze.fullScreenMode]),e.useEffect(function(){var Ht={enterFullScreenMode:Gs,exitFullScreenMode:qs,getPagesContainer:Bs,getViewerState:Hs,jumpToDestination:yr,jumpToNextDestination:js,jumpToPreviousDestination:Ws,jumpToNextPage:zs,jumpToPreviousPage:Vs,jumpToPage:Cn,openFile:Ar,rotate:Sr,rotatePage:Ei,setViewerState:wn,switchScrollMode:Er,switchViewMode:wr,zoom:Rn};return ot.forEach(function(Ce){Ce.install&&Ce.install(Ht)}),function(){ot.forEach(function(Ce){Ce.uninstall&&Ce.uninstall(Ht)})}},[me]),e.useEffect(function(){Ut({doc:z,file:p}),ot.forEach(function(Ht){Ht.onDocumentLoad&&Ht.onDocumentLoad({doc:z,file:p})})},[me]);var wi,Ci,Pi,Cr=Ge.boundingClientRect;wi=function(){J&&Cn(J)},Ci=Cr.height>0&&Cr.width>0,Pi=e.useRef(!1),b(function(){Ci&&!Pi.current&&(Pi.current=!0,wi())},[wi,Ci]),b(function(){var Ht=ke.current.pageIndex;Ht>-1&&Se!==ce&&Ge.scrollToItem(Ht,xn).then(function(){ze.fullScreenMode===h.FullScreenMode.EnteredCompletely&&($||pn.markNotRendered(),$e.current=-1)})},[ce]),b(function(){var Ht=ke.current.pageIndex;Ht>-1&&yn!==Qe&&Ge.scrollToItem(Ht,xn)},[Qe]),b(function(){fn!=0&&fn!=ke.current.scale&&Ge.zoom(ke.current.scale/fn,ke.current.pageIndex).then(function(){ze.fullScreenMode===h.FullScreenMode.EnteredCompletely&&(Ke.current=-1)})},[Ve]),b(function(){if(Te!==ke.current.viewMode){var Ht=Ge.startPage,Ce=Ge.endPage,Fe=Ge.virtualItems;pn.markNotRendered(),pn.setRange(Ht,Ce);for(var We=function(Le){var on=Fe.find(function(Pn){return Pn.index===Le});on&&pn.setVisibility(Le,on.visibility)},He=Ht;He<=Ce;He++)We(He);Ti()}},[he]),b(function(){var Ht=ke.current.pageIndex;Ht>-1&&Te!==he&&Ge.scrollToItem(Ht,xn)},[he]),b(function(){var Ht=ke.current.pageIndex;Ht>0&&Ht===J&&an.current===J&&hn.current&&(an.current=-1,Rn(hn.current))},[Ye]),e.useEffect(function(){Ge.isSmoothScrolling||Ze.current!==null&&Ze.current===Ye||(Ze.current=Ye,ue({currentPage:Ye,doc:z}))},[Ye,Ge.isSmoothScrolling]),e.useEffect(function(){ze.fullScreenMode===h.FullScreenMode.Entering&&ke.current.scrollMode===h.ScrollMode.Page&&($e.current=ke.current.pageIndex),ze.fullScreenMode===h.FullScreenMode.EnteredCompletely&&ke.current.scrollMode===h.ScrollMode.Page&&$&&($e.current=-1),ze.fullScreenMode===h.FullScreenMode.EnteredCompletely&&hn.current&&(Ke.current=ke.current.pageIndex,Rn(hn.current))},[ze.fullScreenMode]),e.useEffect(function(){if(ze.fullScreenMode!==h.FullScreenMode.Entering&&ze.fullScreenMode!==h.FullScreenMode.Exitting&&!Ge.isSmoothScrolling){var Ht=Ge.startPage,Ce=Ge.endPage,Fe=Ge.maxVisbilityIndex,We=Ge.virtualItems,He=Fe,Le=ze.fullScreenMode===h.FullScreenMode.Entered||ze.fullScreenMode===h.FullScreenMode.EnteredCompletely;if(!(Le&&He!==$e.current&&$e.current>-1||Le&&He!==Ke.current&&Ke.current>-1)){rn(He),wn(f(f({},ke.current),{pageIndex:He})),pn.setRange(Ht,Ce);for(var on=function(ki){var ti=We.find(function(Tn){return Tn.index===ki});ti&&pn.setVisibility(ki,ti.visibility)},Pn=Ht;Pn<=Ce;Pn++)on(Pn);Ti()}}},[Ge.startPage,Ge.endPage,Ge.isSmoothScrolling,Ge.maxVisbilityIndex,ze.fullScreenMode,ln,Qe,Ve]);var Xs=e.useCallback(function(Ht){pn.markRendered(Ht),Ti()},[Un]),Ti=function(){var Ht=pn.getHighestPriorityPage();Ht>-1&&pn.isInRange(Ht)&&(pn.markRendering(Ht),Qn(Ht))},$s=function(Ht){var Ce=Ye-1,Fe=Ye+1;switch(Ht){case"FirstPage":Cn(0);break;case"LastPage":Cn(Ae-1);break;case"NextPage":Fe<Ae&&Cn(Fe);break;case"PrevPage":Ce>=0&&Cn(Ce)}},Ys=e.useCallback(function(){var Ht=Ge.virtualItems,Ce=[];switch(he){case h.ViewMode.DualPage:Ce=et(Ht,2);break;case h.ViewMode.DualPageWithCover:Ht.length&&(Ce=Ht[0].index===0?[[Ht[0]]].concat(et(Ht.slice(1),2)):et(Ht,2));break;case h.ViewMode.SinglePage:default:Ce=et(Ht,1)}var Fe=Oe&&Oe.core?Oe.core.pageLabel:"Page {{pageIndex}}",We={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:Be,style:{height:"100%"}},children:e.createElement(e.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:y({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":ce===h.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":Ne,"rpv-core__inner-pages--single":ce===h.ScrollMode.Page,"rpv-core__inner-pages--vertical":ce===h.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":ce===h.ScrollMode.Wrapped}),ref:je,style:{height:"100%",position:"relative"}},children:e.createElement("div",{"data-testid":"core__inner-current-page-".concat(Ye),style:Object.assign({"--scale-factor":Ve},Ge.getContainerStyles())},Ce.map(function(He){return e.createElement("div",{className:y({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":ce===h.ScrollMode.Page}),style:Ge.getItemContainerStyles(He[0]),key:"".concat(He[0].index,"-").concat(he)},He.map(function(Le){var on=he===h.ViewMode.DualPageWithCover&&(Le.index===0||Ae%2==0&&Le.index===Ae-1);return e.createElement("div",{"aria-label":Fe.replace("{{pageIndex}}","".concat(Le.index+1)),className:y({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":he===h.ViewMode.DualPage&&Le.index%2==0,"rpv-core__inner-page--dual-odd":he===h.ViewMode.DualPage&&Le.index%2==1,"rpv-core__inner-page--dual-cover":on,"rpv-core__inner-page--dual-cover-even":he===h.ViewMode.DualPageWithCover&&!on&&Le.index%2==0,"rpv-core__inner-page--dual-cover-odd":he===h.ViewMode.DualPageWithCover&&!on&&Le.index%2==1,"rpv-core__inner-page--single":he===h.ViewMode.SinglePage&&ce===h.ScrollMode.Page}),role:"region",key:"".concat(Le.index,"-").concat(he),style:Object.assign({},Ge.getItemStyles(Le),_r.buildPageStyles({numPages:Ae,pageIndex:Le.index,scrollMode:ce,viewMode:he}))},e.createElement(ps,{doc:z,measureRef:Le.measureRef,outlines:Me,pageIndex:Le.index,pageRotation:ve.has(Le.index)?ve.get(Le.index):0,pageSize:ht[Le.index],plugins:ot,renderPage:Ot,renderQueueKey:Un,rotation:Qe,scale:Ve,shouldRender:Fn===Le.index,viewMode:he,onExecuteNamedAction:$s,onJumpFromLinkAnnotation:Us,onJumpToDest:yr,onRenderCompleted:Xs,onRotatePage:Ei}))}))}))}};return ot.forEach(function(He){He.renderViewer&&(We=He.renderViewer({containerRef:Be,doc:z,pagesContainerRef:je,pagesRotation:ve,pageSizes:ht,rotation:Qe,slot:We,themeContext:Ie,jumpToPage:Cn,openFile:Ar,rotate:Sr,rotatePage:Ei,switchScrollMode:Er,switchViewMode:wr,zoom:Rn}))}),We},[ot,Ge]),Pr=e.useCallback(function(Ht){return e.createElement("div",f({},Ht.attrs,{style:Ht.attrs&&Ht.attrs.style?Ht.attrs.style:{}}),Ht.children,Ht.subSlot&&Pr(Ht.subSlot))},[]);return Pr(Ys())},mr=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Ms=function(n){var p=n.defaultScale,U=n.doc,z=n.render,$=n.scrollMode,J=n.viewMode,ft=e.useRef(),st=e.useState({pageSizes:[],scale:0}),V=st[0],ht=st[1];return e.useLayoutEffect(function(){var ot=Array(U.numPages).fill(0).map(function(Ot,It){return new Promise(function(Dt,Gt){$t(U,It).then(function(zt){var Ut=zt.getViewport({scale:1});Dt({pageHeight:Ut.height,pageWidth:Ut.width,rotation:Ut.rotation})})})});Promise.all(ot).then(function(Ot){var It=ft.current;if(It&&Ot.length!==0){var Dt=Ot[0].pageWidth,Gt=Ot[0].pageHeight,zt=It.parentElement,Ut=(zt.clientWidth-45)/Dt,Re=(zt.clientHeight-45)/Gt,ue=Ut;switch($){case h.ScrollMode.Horizontal:ue=Math.min(Ut,Re);break;case h.ScrollMode.Vertical:default:ue=Ut}var fe,_e,re=p?typeof p=="string"?bi(zt,Gt,Dt,p,J,U.numPages):p:(fe=ue,(_e=mr.findIndex(function(Ae){return Ae>=fe}))===-1||_e===0?fe:mr[_e-1]);ht({pageSizes:Ot,scale:re})}})},[U.loadingTask.docId]),V.pageSizes.length===0||V.scale===0?e.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:ft},e.createElement(B,null)):z(V.pageSizes,V.scale)},Zn=function(){},yi=function(n){function p(U,z){var $=n.call(this)||this;return $.verifyPassword=U,$.passwordStatus=z,$}return G(p,n),p}(Zn),xs=function(n){var p=n.passwordStatus,U=n.renderProtectedView,z=n.verifyPassword,$=n.onDocumentAskPassword,J=e.useContext(lt).l10n,ft=e.useState(""),st=ft[0],V=ft[1],ht=e.useContext(j).direction===h.TextDirection.RightToLeft,ot=function(){return z(st)};return e.useEffect(function(){$&&$({verifyPassword:z})},[]),U?U({passwordStatus:p,verifyPassword:z}):e.createElement("div",{className:"rpv-core__asking-password-wrapper"},e.createElement("div",{className:y({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":ht})},e.createElement("div",{className:"rpv-core__asking-password-message"},p===h.PasswordStatus.RequiredPassword&&J.core.askingPassword.requirePasswordToOpen,p===h.PasswordStatus.WrongPassword&&J.core.wrongPassword.tryAgain),e.createElement("div",{className:"rpv-core__asking-password-body"},e.createElement("div",{className:y({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!ht,"rpv-core__asking-password-input--rtl":ht})},e.createElement(w,{testId:"core__asking-password-input",type:"password",value:st,onChange:V,onKeyDown:function(Ot){Ot.key==="Enter"&&ot()}})),e.createElement(S,{onClick:ot},J.core.askingPassword.submit))))},vr=function(n){function p(U){var z=n.call(this)||this;return z.doc=U,z}return G(p,n),p}(Zn),br=function(n){function p(U){var z=n.call(this)||this;return z.error=U,z}return G(p,n),p}(Zn),Ai=function(n){function p(U){var z=n.call(this)||this;return z.percentages=U,z}return G(p,n),p}(Zn),Fs=function(n){var p=n.characterMap,U=n.file,z=n.httpHeaders,$=n.render,J=n.renderError,ft=n.renderLoader,st=n.renderProtectedView,V=n.transformGetDocumentParams,ht=n.withCredentials,ot=n.onDocumentAskPassword,Ot=e.useContext(j).direction===h.TextDirection.RightToLeft,It=e.useState(new Ai(0)),Dt=It[0],Gt=It[1],zt=e.useRef(""),Ut=Y();return e.useEffect(function(){zt.current="",Gt(new Ai(0));var Re=new tt.PDFWorker({name:"PDFWorker_".concat(Date.now())}),ue=Object.assign({httpHeaders:z,withCredentials:ht,worker:Re},typeof U=="string"?{url:U}:{data:U},p?{cMapUrl:p.url,cMapPacked:p.isCompressed}:{}),fe=V?V(ue):ue,_e=tt.getDocument(fe);return _e.onPassword=function(re,Ae){switch(Ae){case tt.PasswordResponses.NEED_PASSWORD:Ut.current&&Gt(new yi(re,h.PasswordStatus.RequiredPassword));break;case tt.PasswordResponses.INCORRECT_PASSWORD:Ut.current&&Gt(new yi(re,h.PasswordStatus.WrongPassword))}},_e.onProgress=function(re){var Ae=re.total>0?Math.min(100,100*re.loaded/re.total):100;Ut.current&&zt.current===""&&Gt(new Ai(Ae))},_e.promise.then(function(re){zt.current=re.loadingTask.docId,Ut.current&&Gt(new vr(re))},function(re){return Ut.current&&!Re.destroyed&&Gt(new br({message:re.message||"Cannot load document",name:re.name}))}),function(){_e.destroy(),Re.destroy()}},[U]),Dt instanceof yi?e.createElement(xs,{passwordStatus:Dt.passwordStatus,renderProtectedView:st,verifyPassword:Dt.verifyPassword,onDocumentAskPassword:ot}):Dt instanceof vr?$(Dt.doc):Dt instanceof br?J?J(Dt.error):e.createElement("div",{className:y({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Ot})},e.createElement("div",{className:"rpv-core__doc-error-text"},Dt.error.message)):e.createElement("div",{"data-testid":"core__doc-loading",className:y({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Ot})},ft?ft(Dt.percentages):e.createElement(B,null))},Ls=function(n,p){var U=e.useMemo(function(){return n==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":n},[]),z=e.useState(U),$=z[0],J=z[1],ft=it($);return e.useEffect(function(){if(n==="auto"){var st=window.matchMedia("(prefers-color-scheme: dark)"),V=function(ht){J(ht.matches?"dark":"light")};return st.addEventListener("change",V),function(){return st.removeEventListener("change",V)}}},[]),e.useEffect(function(){$!==ft&&p&&p($)},[$]),e.useEffect(function(){n!==$&&J(n)},[n]),{currentTheme:$,setCurrentTheme:J}},Ds=function(n){return{startPage:n.startPage-3,endPage:n.endPage+3}};h.Button=function(n){var p=n.children,U=n.testId,z=n.onClick,$=e.useContext(j).direction===h.TextDirection.RightToLeft,J=U?{"data-testid":U}:{};return e.createElement("button",f({className:y({"rpv-core__button":!0,"rpv-core__button--rtl":$}),type:"button",onClick:z},J),p)},h.Icon=_,h.LazyRender=function(n){var p=n.attrs,U=n.children,z=n.testId,$=e.useState(!1),J=$[0],ft=$[1],st=z?f(f({},p),{"data-testid":z}):p,V=k({once:!0,onVisibilityChanged:function(ht){ht.isVisible&&ft(!0)}});return e.createElement("div",f({ref:V},st),J&&U)},h.LocalizationContext=lt,h.Menu=function(n){var p=n.children,U=e.useRef(),z=e.useRef([]),$=e.useContext(j).direction===h.TextDirection.RightToLeft,J=function(st){if(U.current)switch(st.key){case"Tab":st.preventDefault();break;case"ArrowDown":st.preventDefault(),ft(function(V,ht){return ht+1});break;case"ArrowUp":st.preventDefault(),ft(function(V,ht){return ht-1});break;case"End":st.preventDefault(),ft(function(V,ht){return V.length-1});break;case"Home":st.preventDefault(),ft(function(V,ht){return 0})}},ft=function(st){if(U.current){var V=z.current,ht=V.findIndex(function(Ot){return Ot.getAttribute("tabindex")==="0"}),ot=Math.min(V.length-1,Math.max(0,st(V,ht)));ht>=0&&ht<=V.length-1&&V[ht].setAttribute("tabindex","-1"),V[ot].setAttribute("tabindex","0"),V[ot].focus()}};return b(function(){var st=U.current;if(st){var V=function(ht){var ot=[];return ht.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Ot){if(Ot instanceof HTMLElement){var It=Ot.parentElement;(It===ht||window.getComputedStyle(It).display!=="none")&&ot.push(Ot)}}),ot}(st);z.current=V}},[]),b(function(){return document.addEventListener("keydown",J),function(){document.removeEventListener("keydown",J)}},[]),e.createElement("div",{ref:U,"aria-orientation":"vertical",className:y({"rpv-core__menu":!0,"rpv-core__menu--rtl":$}),role:"menu",tabIndex:0},p)},h.MenuDivider=function(){return e.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},h.MenuItem=function(n){var p=n.checked,U=p!==void 0&&p,z=n.children,$=n.icon,J=$===void 0?null:$,ft=n.isDisabled,st=ft!==void 0&&ft,V=n.testId,ht=n.onClick,ot=e.useContext(j).direction===h.TextDirection.RightToLeft,Ot=V?{"data-testid":V}:{};return e.createElement("button",f({className:y({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":st,"rpv-core__menu-item--ltr":!ot,"rpv-core__menu-item--rtl":ot}),role:"menuitem",tabIndex:-1,type:"button",onClick:ht},Ot),e.createElement("div",{className:y({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!ot,"rpv-core__menu-item-icon--rtl":ot})},J),e.createElement("div",{className:y({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!ot,"rpv-core__menu-item-label--rtl":ot})},z),e.createElement("div",{className:y({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!ot,"rpv-core__menu-item-check--rtl":ot})},U&&e.createElement(g,null)))},h.MinimalButton=function(n){var p=n.ariaLabel,U=p===void 0?"":p,z=n.ariaKeyShortcuts,$=z===void 0?"":z,J=n.children,ft=n.isDisabled,st=ft!==void 0&&ft,V=n.isSelected,ht=V!==void 0&&V,ot=n.testId,Ot=n.onClick,It=e.useContext(j).direction===h.TextDirection.RightToLeft,Dt=ot?{"data-testid":ot}:{};return e.createElement("button",f({"aria-label":U},$&&{"aria-keyshortcuts":$},st&&{"aria-disabled":!0},{className:y({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":st,"rpv-core__minimal-button--rtl":It,"rpv-core__minimal-button--selected":ht}),type:"button",onClick:Ot},Dt),J)},h.Modal=function(n){var p=n.ariaControlsSuffix,U=n.closeOnClickOutside,z=n.closeOnEscape,$=n.content,J=n.isOpened,ft=J!==void 0&&J,st=n.target,V=p||"".concat(i());return e.createElement(mt,{target:st?function(ht,ot){return e.createElement("div",{"aria-expanded":ot?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(V)},st(ht,ot))}:null,content:function(ht){return e.createElement(L,null,e.createElement(F,{ariaControlsSuffix:V,closeOnClickOutside:U,closeOnEscape:z,onToggle:ht},$(ht)))},isOpened:ft})},h.Popover=function(n){var p=n.ariaHasPopup,U=p===void 0?"dialog":p,z=n.ariaControlsSuffix,$=n.closeOnClickOutside,J=n.closeOnEscape,ft=n.content,st=n.lockScroll,V=st===void 0||st,ht=n.offset,ot=n.position,Ot=n.target,It=Z(!1),Dt=It.opened,Gt=It.toggle,zt=e.useRef(),Ut=e.useMemo(function(){return z||"".concat(i())},[]);return e.createElement("div",{ref:zt,"aria-expanded":Dt?"true":"false","aria-haspopup":U,"aria-controls":"rpv-core__popver-body-".concat(Ut)},Ot(Gt,Dt),Dt&&e.createElement(e.Fragment,null,V&&e.createElement(wt,{closeOnEscape:J,onClose:Gt}),e.createElement(dt,{ariaControlsSuffix:Ut,closeOnClickOutside:$,offset:ht,position:ot,targetRef:zt,onClose:Gt},ft(Gt))))},h.PrimaryButton=S,h.ProgressBar=function(n){var p=n.progress,U=e.useContext(j).direction===h.TextDirection.RightToLeft;return e.createElement("div",{className:y({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":U})},e.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(p,"%")}},p,"%"))},h.Separator=function(){return e.createElement("div",{className:"rpv-core__separator"})},h.Spinner=B,h.Splitter=function(n){var p=n.constrain,U=e.useContext(j).direction===h.TextDirection.RightToLeft,z=e.useRef(),$=e.useRef(),J=e.useRef(),ft=e.useRef(0),st=e.useRef(0),V=e.useRef(0),ht=e.useRef(0),ot={capture:!0},Ot=function(Dt){var Gt=z.current,zt=$.current,Ut=J.current;if(Gt&&zt&&Ut){var Re=ht.current,ue=Dt.clientX-ft.current,fe=V.current+(U?-ue:ue),_e=Gt.parentElement.getBoundingClientRect().width,re=100*fe/_e;if(Gt.classList.add("rpv-core__splitter--resizing"),p){var Ae=_e-fe-Re;if(!p({firstHalfPercentage:re,firstHalfSize:fe,secondHalfPercentage:100*Ae/_e,secondHalfSize:Ae}))return}zt.style.width="".concat(re,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),zt.classList.add("rpv-core__splitter-sibling--resizing"),Ut.classList.add("rpv-core__splitter-sibling--resizing")}},It=function(Dt){var Gt=z.current,zt=$.current,Ut=J.current;Gt&&zt&&Ut&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),Gt.classList.remove("rpv-core__splitter--resizing"),zt.classList.remove("rpv-core__splitter-sibling--resizing"),Ut.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Ot,ot),document.removeEventListener("mouseup",It,ot))};return e.useEffect(function(){var Dt=z.current;Dt&&(ht.current=Dt.getBoundingClientRect().width,$.current=Dt.previousElementSibling,J.current=Dt.nextElementSibling)},[]),e.createElement("div",{ref:z,className:"rpv-core__splitter",onMouseDown:function(Dt){var Gt=$.current;Gt&&(ft.current=Dt.clientX,st.current=Dt.clientY,V.current=Gt.getBoundingClientRect().width,document.addEventListener("mousemove",Ot,ot),document.addEventListener("mouseup",It,ot))}})},h.TextBox=w,h.ThemeContext=j,h.Tooltip=function(n){var p=n.ariaControlsSuffix,U=n.content,z=n.offset,$=n.position,J=n.target,ft=Z(!1),st=ft.opened,V=ft.toggle,ht=e.useRef(),ot=e.useRef(),Ot=e.useMemo(function(){return p||"".concat(i())},[]);m(function(){ht.current&&document.activeElement&&ht.current.contains(document.activeElement)&&Dt()});var It=function(){V(h.ToggleStatus.Open)},Dt=function(){V(h.ToggleStatus.Close)};return e.createElement(e.Fragment,null,e.createElement("div",{ref:ht,"aria-describedby":"rpv-core__tooltip-body-".concat(Ot),onBlur:function(Gt){Gt.relatedTarget instanceof HTMLElement&&Gt.currentTarget.parentElement&&Gt.currentTarget.parentElement.contains(Gt.relatedTarget)?ot.current&&(ot.current.style.display="none"):Dt()},onFocus:It,onMouseEnter:It,onMouseLeave:Dt},J),st&&e.createElement(Lt,{ariaControlsSuffix:Ot,contentRef:ot,offset:z,position:$,targetRef:ht},U()))},h.Viewer=function(n){var p=n.characterMap,U=n.defaultScale,z=n.enableSmoothScroll,$=z===void 0||z,J=n.fileUrl,ft=n.httpHeaders,st=ft===void 0?{}:ft,V=n.initialPage,ht=V===void 0?0:V,ot=n.pageLayout,Ot=n.initialRotation,It=Ot===void 0?0:Ot,Dt=n.localization,Gt=n.plugins,zt=Gt===void 0?[]:Gt,Ut=n.renderError,Re=n.renderLoader,ue=n.renderPage,fe=n.renderProtectedView,_e=n.scrollMode,re=_e===void 0?h.ScrollMode.Vertical:_e,Ae=n.setRenderRange,me=Ae===void 0?Ds:Ae,Oe=n.transformGetDocumentParams,Ie=n.theme,Ne=Ie===void 0?{direction:h.TextDirection.LeftToRight,theme:"light"}:Ie,Be=n.viewMode,je=Be===void 0?h.ViewMode.SinglePage:Be,nn=n.withCredentials,Ye=nn!==void 0&&nn,rn=n.onDocumentAskPassword,Ze=n.onDocumentLoad,tn=Ze===void 0?function(){}:Ze,en=n.onPageChange,Qe=en===void 0?function(){}:en,un=n.onRotate,yn=un===void 0?function(){}:un,vn=n.onRotatePage,ln=vn===void 0?function(){}:vn,dn=n.onSwitchTheme,An=dn===void 0?function(){}:dn,ve=n.onZoom,pe=ve===void 0?function(){}:ve,se=e.useState({data:J,name:typeof J=="string"?J:"",shouldLoad:!1}),ce=se[0],ae=se[1],Se=function($e,Ke){ae({data:Ke,name:$e,shouldLoad:!0})},we=e.useState(!1),he=we[0],te=we[1],Te=it(ce);e.useEffect(function(){var $e,Ke,an,ze;$e=Te.data,ze=typeof(Ke=J),(an=typeof $e)=="string"&&ze==="string"&&$e===Ke||an==="object"&&ze==="object"&&$e.length===Ke.length&&$e.every(function(En,Fn){return En===Ke[Fn]})||ae({data:J,name:typeof J=="string"?J:"",shouldLoad:he})},[J,he]);var Me=k({onVisibilityChanged:function($e){te($e.isVisible),$e.isVisible&&ae(function(Ke){return Object.assign({},Ke,{shouldLoad:!0})})}}),Xe=typeof Ne=="string"?{direction:h.TextDirection.LeftToRight,theme:Ne}:Ne,Ve=e.useState(Dt||X),cn=Ve[0],fn=Ve[1],ke={l10n:cn,setL10n:fn},hn=Object.assign({},{direction:Xe.direction},Ls(Xe.theme||"light",An));return e.useEffect(function(){Dt&&fn(Dt)},[Dt]),e.createElement(lt.Provider,{value:ke},e.createElement(j.Provider,{value:hn},e.createElement("div",{ref:Me,className:"rpv-core__viewer rpv-core__viewer--".concat(hn.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},ce.shouldLoad&&e.createElement(Fs,{characterMap:p,file:ce.data,httpHeaders:st,render:function($e){return e.createElement(Ms,{defaultScale:U,doc:$e,render:function(Ke,an){return e.createElement(Rs,{currentFile:{data:ce.data,name:ce.name},defaultScale:U,doc:$e,enableSmoothScroll:$,initialPage:ht,initialRotation:It,initialScale:an,pageLayout:ot,pageSizes:Ke,plugins:zt,renderPage:ue,scrollMode:re,setRenderRange:me,viewMode:je,viewerState:{file:ce,fullScreenMode:h.FullScreenMode.Normal,pageIndex:-1,pageHeight:Ke[0].pageHeight,pageWidth:Ke[0].pageWidth,pagesRotation:new Map,rotation:It,scale:an,scrollMode:re,viewMode:je},onDocumentLoad:tn,onOpenFile:Se,onPageChange:Qe,onRotate:yn,onRotatePage:ln,onZoom:pe})},scrollMode:re,viewMode:je})},renderError:Ut,renderLoader:Re,renderProtectedView:fe,transformGetDocumentParams:Oe,withCredentials:Ye,onDocumentAskPassword:rn}))))},h.Worker=function(n){var p=n.children,U=n.workerUrl;return tt.GlobalWorkerOptions.workerSrc=U,e.createElement(e.Fragment,null,p)},h.chunk=et,h.classNames=y,h.createStore=function(n){var p=n||{},U={},z=function(J,ft){var st;p=f(f({},p),((st={})[J]=ft,st)),(U[J]||[]).forEach(function(V){return V(p[J])})},$=function(J){return p[J]};return{subscribe:function(J,ft){U[J]=(U[J]||[]).concat(ft)},unsubscribe:function(J,ft){U[J]=(U[J]||[]).filter(function(st){return st!==ft})},update:function(J,ft){z(J,ft)},updateCurrentValue:function(J,ft){var st=$(J);st!==void 0&&z(J,ft(st))},get:function(J){return $(J)}}},h.getDestination=ie,h.getPage=$t,h.isFullScreenEnabled=o,h.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},h.useDebounceCallback=vt,h.useIntersectionObserver=k,h.useIsMounted=Y,h.useIsomorphicLayoutEffect=b,h.usePrevious=it,h.useRenderQueue=M})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=core_min;var libExports=lib.exports;const VerPdf=({urlPdf:h,show:v,setShow:At,tipo:d})=>{const[T,e]=reactExports.useState("light");return reactExports.useEffect(()=>{var tt;(tt=document.querySelector("body"))!=null&&tt.classList.contains("dark-mode")?e("dark"):e("light")}),console.log(getFullUrl(`/files/${h}`)),jsxRuntimeExports.jsxs(Offcanvas,{show:v,onHide:()=>At(!1),placement:"end",className:"ancho40",children:[jsxRuntimeExports.jsxs(Offcanvas.Header,{children:[jsxRuntimeExports.jsx("a",{href:`${getFullUrl(`/files/${h}`)}`,target:"_BLANK",className:"btn btn-danger",download:!0,children:"Descargar archivo PDF"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary ms-2",onClick:()=>{const tt=window.open(`${getFullUrl(`/files/${h}`)}`,"_blank");tt&&(tt.onload=function(){tt.focus(),tt.print()})},children:"Imprimir PDF"}),jsxRuntimeExports.jsx(Offcanvas.Title,{}),jsxRuntimeExports.jsx("span",{className:"d-flex ms-auto",onClick:()=>At(!1),children:jsxRuntimeExports.jsx("i",{className:"fe fe-x ms-auto"})})]}),jsxRuntimeExports.jsx(Offcanvas.Body,{children:d==="pdf"?jsxRuntimeExports.jsx(libExports.Worker,{workerUrl:`${window.location.protocol}//procesosacademicos.buap.mx/vd/public/js/pdf.worker.min.js`,children:jsxRuntimeExports.jsx(libExports.Viewer,{theme:{theme:T},fileUrl:`${getFullUrl(`/files/${h}`)}`})}):jsxRuntimeExports.jsx(Col,{className:"text-center",children:jsxRuntimeExports.jsx("img",{src:`${getFullUrl(`/files/${h}`)}`,alt:""})})})]})};export{VerPdf as V,commonjsRequire as c};
